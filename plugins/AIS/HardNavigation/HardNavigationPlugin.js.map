{"version":3,"sources":["webpack:///webpack/bootstrap 0972450aac3e9f5899a3","webpack:///./src/entry.js","webpack:///./src/all.css","webpack:///./src/Views/View.css","webpack:///./src/locale.js","webpack:///./src/PluginPanel.js","webpack:///./src/ViewsFactory.js","webpack:///./src/Views/MyCollectionView.js","webpack:///./src/Views/MyCollection.css","webpack:///./src/Views/BaseView.js","webpack:///./src/Models/MyCollectionModel.js","webpack:///./src/Polyfill.js"],"names":["PRODUCTION","require","pluginName","menuId","toolbarIconId","cssTable","modulePath","gmxCore","getModulePath","PluginPanel","ViewsFactory","publicInterface","afterViewer","params","map","options","layer","viewFactory","pluginPanel","sidebar","window","iconSidebarWidget","tab","createTabFunction","icon","active","inactive","hint","_gtxt","tabDiv","querySelector","sidebarPane","setPane","createTab","append","innerHTML","addEventListener","e","_activeTabId","show","addModule","css","_translationsHash","addtext","module","exports","_isReady","_activeView","_canvas","_div","_views","create","_create","$","v","frame","resize","_returnInstance","call","MyCollectionView","MyCollectionModel","_mcm","_mcv","model","BaseView","_stateUI","_createBut","_chooseBut","_layer","_thisView","_hidden","_visible","nsGmx","gmxMap","layersByID","isDirty","widgets","commonCalendar","getDateInterval","on","repaint","isVisible","inProgress","setFilter","_isVisible","Handlebars","compile","gifLoader","_addCalendar","container","find","footer","tableTemplate","Object","defineProperty","get","getBoundingClientRect","height","_copyRegion","bind","_createRegion","previousPage","nextPage","createAttributesTable","_isActual","reg","mapDateInterval","atttributes","getGmxProperties","attributes","iOrigin","indexOf","iState","iDate","iTime","iDateChange","iTimeChange","iNextDatetCh","iNextTimeCh","id","properties","toString","state","dtBegin","getTime","dtEnd","curVer","d","t","dt","nextVer","search","_isActual0","version","test","isLatest","key","getDataManager","_activeTileKeys","data","_tiles","tile","i","length","curId","curVersion","calendar","dateInterval","DateInterval","set","setDateInterval","update","CalendarWidget","name","dateMin","Date","dateMax","dateFormat","minimized","showSwitcher","style","display","tr","insertCell","db","getUTCDayBoundary","dateBegin","dateEnd","_checkVersion","setTimeout","L","gmx","layersVersion","chkVersion","_layerClickHandler","event","target","props","identityField","bringToTopItem","sendCrossDomainJSONRequest","serverBase","response","Status","toLowerCase","result","Result","fields","obj","leafletMap","gmxDrawing","addGeoJSON","gmxUtil","geometryToGeoJSON","values","gmx_id","origin","parseInt","date","time","type","media","eoc","EditObjectControl","drawingObject","initPromise","done","dlg","title","closest","each","el","querySelectorAll","innerText","getAll","DateChange","TimeChange","page","updatePromise","then","console","log","click","addClass","disableFlip","disablePopup","removeClass","enableFlip","enablePopup","off","_onDrawStop","object","lprops","layers","forEach","_container","cursor","clearCreate","_clean","_infoClickHandler","_visClickHandler","_showClickHandler","_editClickHandler","prototype","progress","hide","td","currentTarget","parentElement","descData","_gmx","dataManager","getItem","mediaDescDialog","jQuery","dialog","width","minHeight","maxWidth","minWidth","modal","autoOpen","dialogClass","close","remove","html","svg","vis","hid","layerName","encodeURIComponent","parseResponse","columnNames","row","fitBoundsOptions","maxZoom","geom","bounds","getGeometryBounds","fitBounds","min","y","x","max","_stateClickHandler","className","layerTitle","isDelete","pagesTotal","pager","pages","text","attr","regions","Time","NextDateChange","NextTimeChange","State","Origin","classList","add","_map","addLayer","apply","arguments","scrollCont","empty","view","isActive","is","clean","h","topOffset","bottomOffset","content","mCustomScrollbar","mcsbOptions","rc","Polyfill","_actualUpdate","_data","_page","_pageSize","_count","_layerName","_checkResponse","r","_initPromise","Promise","resolve","reject","columns","a","push","Name","OldName","ColumnSimpleType","attrTypes","IsPrimary","IsIdentity","IsComputed","expression","def","asyncTaskManager","sendGmxPostRequest","VectorLayerID","MetaProperties","JSON","stringify","mediaDescField","Type","Value","Columns","promise","fail","resolved","value","Math","ceil","thisModel","formatDt","getFullYear","getMonth","slice","getDate","format","isNaN","getTimezoneOffset","toLocaleDateString","toLocaleTimeString","f","j","DateTime","DateTimeChange","StateColor","reduce","p","c","catch","msg","txt","error","predicate","list","thisArg","undefined","findIndex"],"mappings":"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","file":"HardNavigationPlugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0972450aac3e9f5899a3","let PRODUCTION = false;\r\nif (has('PRODUCTION')) PRODUCTION = true;\r\n\r\nrequire(\"./all.css\")\r\nrequire(\"./Views/View.css\")\r\nrequire(\"./locale.js\")\r\n\r\n// Handlebars.registerHelper('aisinfoid', function (context) {\r\n//     return context.mmsi + \" \" + context.imo;\r\n// });\r\n\r\n// Handlebars.registerHelper('aisjson', function (context) {\r\n//     return JSON.stringify(context);\r\n// });\r\n\r\nconst pluginName = PRODUCTION ? 'HardNavigationPlugin' : 'HardNavigationPluginTest',\r\n      menuId = 'HardNavigationPlugin',\r\n      toolbarIconId = null, \r\n      cssTable = PRODUCTION ? 'HardNavigationPlugin' : 'HardNavigationPlugin',\r\n      modulePath = gmxCore.getModulePath(pluginName);\r\n\r\nconst PluginPanel = require('./PluginPanel.js'),\r\n      ViewsFactory = require('./ViewsFactory');\r\n\r\nconst publicInterface = {\r\n    pluginName: pluginName,\r\n    afterViewer: function (params, map) {\r\n        const options = {\r\n                modulePath: modulePath,\r\n                layer: params.layer\r\n            },\r\n            viewFactory = new ViewsFactory(options),\r\n            pluginPanel = new PluginPanel(viewFactory);\r\n        pluginPanel.menuId = menuId;\r\n\r\n        let sidebar = window.iconSidebarWidget,\r\n        tab = window.createTabFunction({\r\n                    icon: \"HardNavigation\", //menuId,\r\n                    active: \"hardnav-sidebar-icon\",\r\n                    inactive: \"hardnav-sidebar-icon\",\r\n                    hint: _gtxt('HardNavigation.title')\r\n                })()\r\n\r\n        let tabDiv = tab.querySelector('.HardNavigation');\r\n        pluginPanel.sidebarPane = sidebar.setPane(\r\n            menuId, {\r\n                createTab: ()=>{      \r\n                    !tab.querySelector('.HardNavigation') && tab.append(tabDiv);  \r\n                     tab.querySelector('.HardNavigation').innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 14\" width=\"20\" height=\"20\"><path d=\"M 13.13 0 H 0.88 A 0.83 0.83 0 0 0 0 0.88 V 13.13 A 0.83 0.83 0 0 0 0.88 14 H 13.13 A 0.83 0.83 0 0 0 14 13.13 V 0.88 A 0.83 0.83 0 0 0 13.13 0 Z M 12.25 12.25 H 1.75 V 1.75 h 10.5 v 10.5 Z\" />\r\n                     <rect transform=\"rotate(45 2 7)\" x=\"2\" y=\"7\" width=\"8\" height=\"1\" />\r\n                     <rect transform=\"rotate(45 2 3)\" x=\"2\" y=\"3\" width=\"14\" height=\"1\" />\r\n                     <rect transform=\"rotate(45 2 -1)\" x=\"4\" y=\"-1\" width=\"14\" height=\"1\" />\r\n                     <rect transform=\"rotate(45 2 -5)\" x=\"10\" y=\"-5\" width=\"8\" height=\"1\" />   </svg>`;\r\n                    return tab;\r\n                }\r\n            }\r\n        )\r\n        sidebar.addEventListener('opened', function (e) {\r\n            if (sidebar._activeTabId == menuId)\r\n                pluginPanel.show();\r\n        });\r\n    }\r\n};\r\n\r\ngmxCore.addModule(pluginName, publicInterface, {\r\n    css: cssTable + '.css'\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/entry.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/all.css\n// module id = 1\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Views/View.css\n// module id = 3\n// module chunks = 0","\r\n    _translationsHash.addtext('rus', {\r\n        \"HardNavigation.title\": \"Тяжелые районы судоходства\",\r\n        \"HardNavigation.page_lbl\": \"Страница\",\r\n        \"HardNavigation.choose_reg\": \"Выбор района\",\r\n        \"HardNavigation.create_reg\": \"Новый район\",\r\n        \"HardNavigation.instr_hint\": \"Очертите новый район или выберите существующий для редактирования\",\r\n        \"HardNavigation.attr_tbl\": \"Таблица атрибутов\",\r\n        \"HardNavigation.reg_id\": \"ID района\",\r\n        \"HardNavigation.reg_created\": \"Создан\",\r\n        \"HardNavigation.reg_updated\": \"Изменен\",\r\n        \"HardNavigation.add_new\": \"Добавить новый объект\",\r\n        \"HardNavigation.add_copy\": \"Добавить выбранный объект\",\r\n        \"HardNavigation.no_origin\": \"нет\",\r\n        \"HardNavigation.save\": \"Сохранить\",\r\n        \"HardNavigation.cancel\": \"Отмена\",\r\n        \"HardNavigation.description_lbl\": \"Описание\",\r\n        \"HardNavigation.description_ttl\": \"Медиа описание\",\r\n        \"HardNavigation.edit_description_lbl\": \"Редактировать\",\r\n        \"HardNavigation.edit_description_ttl\": \"Редактировать медиа описание\",\r\n        \"HardNavigation.calendar_today\": \"сегодня\",\r\n        \"HardNavigation.layer_error\": 'Ошибка слоя'\r\n        \r\n    });\r\n    _translationsHash.addtext('eng', {\r\n        \"HardNavigation.title\": \"Hard navigation\",\r\n        \"HardNavigation.page_lbl\": \"Page\",\r\n        \"HardNavigation.choose_reg\": \"Choose region\",\r\n        \"HardNavigation.create_reg\": \"Create region\",\r\n        \"HardNavigation.instr_hint\": \"Draw a region or choose existing\",\r\n        \"HardNavigation.attr_tbl\": \"Table of attrobutes\",\r\n        \"HardNavigation.reg_id\": \"Region ID\",\r\n        \"HardNavigation.reg_created\": \"Created\",\r\n        \"HardNavigation.reg_updated\": \"Changed\",\r\n        \"HardNavigation.add_new\": \"Добавить новый объект\",\r\n        \"HardNavigation.add_copy\": \"Добавить выбранный объект\",\r\n        \"HardNavigation.no_origin\": \"no\",\r\n        \"HardNavigation.save\": \"Save\",\r\n        \"HardNavigation.cancel\": \"Cancel\",\r\n        \"HardNavigation.description_lbl\": \"Description\",\r\n        \"HardNavigation.description_ttl\": \"Media description\",\r\n        \"HardNavigation.edit_description_lbl\": \"Edit description\",\r\n        \"HardNavigation.edit_description_ttl\": \"Edit media description\",\r\n        \"HardNavigation.calendar_today\": \"today\",\r\n        \"HardNavigation.layer_error\": 'Layer error'\r\n    });\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/locale.js","let PRODUCTION = false;\r\nif (has('PRODUCTION'))\r\n    PRODUCTION = true;\r\n\r\n\r\nmodule.exports = function (viewFactory) {\r\n    let _isReady = false,\r\n        _activeView,\r\n        _canvas = _div(null),\r\n        _views = viewFactory.create(),\r\n        _create = function () {\r\n            $(this.sidebarPane).append(_canvas);\r\n            $(_canvas).append(_views.map(v => v.frame));\r\n            _views[0].resize(true);\r\n            _views[0].show();\r\n            _activeView = _views[0];\r\n            _isReady = true;\r\n        };\r\n    const _returnInstance = {\r\n        show: function () {          \r\n            if (!_isReady)\r\n            {\r\n                _create.call(this);\r\n            }\r\n            else{       \r\n                _activeView && _activeView.show();\r\n            }\r\n        }\r\n    }\r\n    return _returnInstance;\r\n    /*\r\n    let _leftMenuBlock,\r\n        _canvas = _div(null),\r\n        _activeView,\r\n        _views = viewFactory.create(),\r\n        // _aisSearchView,\r\n        // _myFleetMembersView,\r\n        // _historyView,\r\n        //_gifLoader = '<img src=\"img/progress.gif\">',\r\n        _isReady = false,\r\n        _createTabs = function () {\r\n            let tabsTemplate = '<table class=\"ais_tabs\" border=0><tr>' +\r\n                '<td class=\"ais_tab dbsearch_tab unselectable\" unselectable=\"on\">' +\r\n                '<div>{{i \"AISSearch2.DbSearchTab\"}}</div>' +\r\n                '</td><td class=\"ais_tab scrsearch_tab unselectable\" unselectable=\"on\">' +\r\n                '<div>{{i \"AISSearch2.ScreenSearchTab\"}}</div>' +\r\n                '</td><td class=\"ais_tab myfleet_tab unselectable\" unselectable=\"on\">' + // ACTIVE\r\n                '<div>{{i \"AISSearch2.MyFleetTab\"}}</div>' +\r\n                '</td></tr></table>'\r\n\r\n            if (NOSIDEBAR)\r\n                $(_leftMenuBlock.workCanvas).append(_canvas);\r\n            else\r\n                $(this.sidebarPane).append(_canvas);\r\n\r\n            $(_canvas).append(Handlebars.compile(tabsTemplate));\r\n            $(_canvas).append(_views.map(v => v.frame));\r\n    \r\n            let tabs = $('.ais_tab', _canvas),\r\n                _this = this;           \r\n            _views.forEach((v,i) =>{\r\n                v.tab = tabs.eq(i);\r\n                v.resize(true);\r\n            }); \r\n            tabs.on('click', function () {\r\n                if (!$(this).is('.active')) {\r\n                    let target = this;\r\n                    tabs.each(function (i, tab) {\r\n                        if (!$(tab).is('.active') && target == tab) {\r\n                            $(tab).addClass('active');\r\n                            _views[i].show();\r\n                            _activeView = _views[i];\r\n                        }\r\n                        else {\r\n                            $(tab).removeClass('active');\r\n                            _views[i].hide();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            // Show the first tab\r\n            tabs.eq(0).removeClass('active').click();\r\n\r\n            if (NOSIDEBAR) {\r\n                _returnInstance.hide = function () {\r\n                    $(_leftMenuBlock.parentWorkCanvas).hide();\r\n                    nsGmx.leafletMap.removeLayer(highlight);\r\n                }\r\n\r\n                $(_leftMenuBlock.parentWorkCanvas)\r\n                    .attr('class', 'left_aispanel')\r\n                    .insertAfter('.layers-before');\r\n                var blockItem = _leftMenuBlock.leftPanelItem,\r\n                    blockTitle = $('.leftmenu-path', blockItem.panelCanvas);\r\n                var toggleTitle = function () {\r\n                    if (blockItem.isCollapsed())\r\n                        blockTitle.show();\r\n                    else\r\n                        blockTitle.hide();\r\n                }\r\n                $(blockItem).on('changeVisibility', toggleTitle);\r\n                toggleTitle();\r\n            }\r\n\r\n            // All has been done at first time\r\n            _isReady = true;\r\n        },\r\n\r\n    _returnInstance = {\r\n        show: function () {\r\n            let lmap = nsGmx.leafletMap;\r\n            if (NOSIDEBAR && !_leftMenuBlock)\r\n                _leftMenuBlock = new leftMenu();\r\n\r\n            if ((NOSIDEBAR && (!_leftMenuBlock.createWorkCanvas(\"aispanel\",\r\n                function () { lmap.gmxControlIconManager.get(this.menuId)._iconClick() },\r\n                { path: [_gtxt('AISSearch2.caption')] })\r\n            )) || (!_isReady)) // SIDEBAR\r\n            {\r\n                _createTabs.call(this);\r\n            }\r\n            else{\r\n                if (NOSIDEBAR){\r\n                    $(_leftMenuBlock.parentWorkCanvas)\r\n                    .insertAfter('.layers-before');\r\n                }            \r\n                _activeView && _activeView.show();\r\n            }\r\n        }\r\n    };\r\n    return _returnInstance;\r\n    */\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/PluginPanel.js","const MyCollectionView = require('./Views/MyCollectionView'),\r\n      MyCollectionModel = require('./Models/MyCollectionModel');\r\nmodule.exports = function (options) {   \r\n    const _mcm = new MyCollectionModel({layer: options.layer}),\r\n          _mcv = new MyCollectionView({model:_mcm, layer: options.layer}); \r\n    return {\r\n        create: function () {\r\n            return [_mcv];\r\n        }\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ViewsFactory.js","require(\"./MyCollection.css\")\r\nconst BaseView = require('./BaseView.js');\r\n\r\nlet _stateUI = '',\r\n_createBut, _chooseBut,        \r\n_layer, \r\n_thisView,\r\n_hidden = {},\r\n_visible = {};\r\n\r\nconst MyCollectionView = function ({ model, layer }) {\r\n    _thisView = this;\r\n\r\n        _layer = nsGmx.gmxMap.layersByID[layer];\r\n        if (!_layer){\r\n            model.isDirty = false;\r\n            return;\r\n        }\r\n\r\n        nsGmx.widgets.commonCalendar.getDateInterval().on('change', e=>{\r\n            _hidden = {};\r\n            _visible = {};\r\n            _layer.repaint(); \r\n            if (!_thisView.isVisible){\r\n                //_thisView.repaint();\r\n                _thisView.inProgress(true);\r\n                _thisView.model.isDirty = true;\r\n            }\r\n        });\r\n        _layer.setFilter(_isVisible);\r\n\r\n        BaseView.call(this, model);\r\n        this.frame = $(Handlebars.compile(`<div class=\"hardnav-view\">\r\n            <div class=\"header\">\r\n                <table border=0>\r\n                <tr><td class=\"hint\" colspan=\"2\">${_gtxt('HardNavigation.instr_hint')}</td>\r\n                <td><div class=\"refresh\"><div style=\"display:none\">${this.gifLoader}</div></div></td></tr>\r\n                </table> \r\n\r\n                <table border=0 class=\"instruments unselectable\">\r\n                <tr>\r\n                    <td class=\"but choose\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#selectreg\"></use></svg>${_gtxt('HardNavigation.choose_reg')}</td>\r\n                    <td class=\"but create\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#polygon\"></use></svg>${_gtxt('HardNavigation.create_reg')}</td>\r\n                </tr>\r\n                </table> \r\n\r\n                <div class=\"calendar\"></div>\r\n\r\n                <table border=0 class=\"grid-header\">\r\n                <tr><td class=\"color-transparent\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#eye\"></use></svg></td>\r\n                <td>${_gtxt('HardNavigation.reg_id')}</td>\r\n                <td>${_gtxt('HardNavigation.reg_created')}</td>\r\n                <td>${_gtxt('HardNavigation.reg_updated')}</td>\r\n                <td class=\"color-transparent\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#eye\"></use></td>\r\n                <td class=\"color-transparent\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#eye\"></use></td>\r\n                <td class=\"color-transparent\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#eye\"></use></td>\r\n                <td class=\"color-transparent\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#eye\"></use></td></tr>\r\n                </table> \r\n            </div> \r\n            <div class=\"grid\">\r\n\r\n            </div>\r\n            <div class=\"footer unselectable\">\r\n                <table border=0 class=\"pager\">\r\n                    <tr><td class=\"but arrow arrow-prev\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#arrow-left\"></use></svg></td>\r\n                    <td class=\"current\">${_gtxt('HardNavigation.page_lbl')} <span class=\"pages\"></span></td>\r\n                    <td class=\"but arrow arrow-next\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#arrow-right\"></use></svg></td></tr>\r\n                </table>  \r\n                <div class=\"but but-attributes\">${_gtxt('HardNavigation.attr_tbl')}</div>          \r\n            </div>\r\n            </div>`\r\n        )());\r\n        _addCalendar.call(this);\r\n\r\n        this.container = this.frame.find('.grid');\r\n        this.footer = this.frame.find('.footer');\r\n\r\n        this.tableTemplate = '<table border=0 class=\"grid\">{{#each regions}}<tr id=\"{{gmx_id}}\">' +                \r\n                '<td class=\"visibility\">' +\r\n                '<svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#eye\"></use></svg>' +\r\n                '<svg style=\"display:none\"><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#eye-off\"></use></svg></td>' +\r\n                '<td class=\"identity\">{{id}}</td>' +\r\n                '<td class=\"identity\">{{{DateTime}}}</td>' +\r\n                '<td>{{{DateTimeChange}}}</td>' +\r\n                '<td class=\"{{StateColor}} state\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#circle\"></use></svg></td>' +\r\n                '<td class=\"edit\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#pen\"></use></svg></td>' +\r\n                '<td class=\"show\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#target\"></use></svg></td>' +\r\n                '<td class=\"info\"><svg><use xlink:href=\"plugins/ais/hardnavigation/icons.svg#info\"></use></svg></td>' +\r\n            '</tr>{{/each}}</table>' +\r\n            '{{#each msg}}<div class=\"msg\">{{txt}}</div>{{/each}}';\r\n\r\n        Object.defineProperty(this, \"topOffset\", {\r\n            get: function () { \r\n                return this.frame.find('.header')[0].getBoundingClientRect().height;\r\n            }\r\n        });  \r\n        Object.defineProperty(this, \"bottomOffset\", {\r\n            get: function () {             \r\n                return this.frame.find('.footer')[0].getBoundingClientRect().height;\r\n            }\r\n        }); \r\n\r\n        _chooseBut = this.frame.find('.but.choose');\r\n        _createBut = this.frame.find('.but.create');       \r\n        _chooseBut.on('click', _copyRegion.bind(this));      \r\n        _createBut.on('click', _createRegion.bind(this));\r\n             \r\n        this.frame.find('.but.arrow-prev').on('click', this.model.previousPage.bind(this.model));      \r\n        this.frame.find('.but.arrow-next').on('click', this.model.nextPage.bind(this.model));\r\n        this.frame.find('.but.but-attributes').on('click', ()=>nsGmx.createAttributesTable(layer));\r\n\r\n    },  \r\n    \r\n    _isActual = function(reg){\r\n        const mapDateInterval = nsGmx.widgets.commonCalendar.getDateInterval(),\r\n            atttributes = _layer.getGmxProperties().attributes,\r\n            iOrigin = atttributes.indexOf(\"Origin\") + 1,\r\n            iState = atttributes.indexOf(\"State\") + 1,\r\n            iDate = atttributes.indexOf(\"Date\") + 1,\r\n            iTime = atttributes.indexOf(\"Time\") + 1,\r\n            iDateChange = atttributes.indexOf(\"DateChange\") + 1,\r\n            iTimeChange = atttributes.indexOf(\"TimeChange\") + 1,\r\n            iNextDatetCh = atttributes.indexOf(\"NextDateChange\") + 1,\r\n            iNextTimeCh = atttributes.indexOf(\"NextTimeChange\") + 1,\r\n            id = reg.properties[iOrigin] == '' ? reg.properties[0].toString() : reg.properties[iOrigin],\r\n            state = !reg.properties[iState] ? '' : reg.properties[atttributes.indexOf(\"State\") + 1],\r\n            dtBegin = mapDateInterval.get('dateBegin').getTime(),\r\n            dtEnd = mapDateInterval.get('dateEnd').getTime();\r\n\r\n        let curVer = {d:reg.properties[iDateChange] * 1000, t:reg.properties[iTimeChange] * 1000, get dt(){return this.d+this.t;}},\r\n            nextVer = {d:reg.properties[iNextDatetCh] * 1000, t:reg.properties[iNextTimeCh] * 1000, get dt(){return this.d+this.t;}};\r\n        if (curVer.d === 0){\r\n            curVer.d = reg.properties[iDate] * 1000;\r\n            curVer.t = reg.properties[iTime] * 1000;\r\n        }\r\n\r\n        if (curVer.dt<dtEnd){\r\n            if (nextVer.d==0 && (state.search(/archive/)<0 || curVer.dt>=dtBegin))\r\n                return true;\r\n            else if (nextVer.dt>=dtEnd)\r\n                   return true;\r\n            else \r\n                return false;\r\n        }\r\n        else\r\n            return false;\r\n    },\r\n    _isActual0 = function(reg){\r\n        const mapDateInterval = nsGmx.widgets.commonCalendar.getDateInterval(),\r\n            atttributes = _layer.getGmxProperties().attributes,\r\n            iOrigin = atttributes.indexOf(\"Origin\") + 1,\r\n            iState = atttributes.indexOf(\"State\") + 1,\r\n            iDate = atttributes.indexOf(\"Date\") + 1,\r\n            iTime = atttributes.indexOf(\"Time\") + 1,\r\n            iDateChange = atttributes.indexOf(\"DateChange\") + 1,\r\n            iTimeChange = atttributes.indexOf(\"TimeChange\") + 1,\r\n            id = reg.properties[iOrigin] == '' ? reg.properties[0].toString() : reg.properties[iOrigin],\r\n            state = !reg.properties[iState] ? '' : reg.properties[atttributes.indexOf(\"State\") + 1],\r\n            dtBegin = mapDateInterval.get('dateBegin').getTime(),\r\n            dtEnd = mapDateInterval.get('dateEnd').getTime();\r\n\r\n        let version = {d:reg.properties[iDateChange] * 1000, t:reg.properties[iTimeChange] * 1000};\r\n        if (version.d === 0){\r\n            version.d = reg.properties[iDate] * 1000;\r\n            version.t = reg.properties[iTime] * 1000;\r\n        }\r\n \r\n//console.log(`>>${id}`, version, version.d < dtEnd)\r\n        if (version.d < dtEnd){\r\n            let test = true, isLatest = true;               \r\n            // Search region of same id and the more late version on a certain moment\r\n            for(let key in _layer.getDataManager()._activeTileKeys) { \r\n                test = true;\r\n                let data = _layer.getDataManager()._tiles[key].tile.data;\r\n                if (data)\r\n                for(let i=0; i<data.length; ++i){\r\n                    let curId = data[i][iOrigin] != '' ? data[i][iOrigin] : data[i][0],\r\n                        curVersion = { d: data[i][iDateChange] * 1000, t: data[i][iTimeChange] * 1000 };\r\n                    if (curVersion.d == 0)\r\n                        curVersion = { d: data[i][iDate] * 1000, t: data[i][iTime] * 1000 };\r\n                    if (curId != id) continue;\r\n                    if (curVersion.d >= dtEnd) {isLatest = false; continue;}\r\n                    test = !(version.d < curVersion.d || (version.d == curVersion.d && version.t < curVersion.t));\r\n                    if (!test) {\r\n//console.log(curId, curVersion)\r\n                        break;\r\n                    }\r\n                }\r\n                if (!test) break;\r\n            }\r\n            if (test && isLatest && state.search(/archive/)>-1 && version.d < dtBegin)\r\n                return false;\r\n            return test ;\r\n        }\r\n        else\r\n            return false;\r\n    },\r\n    _isVisible = function(reg){\r\n        const id = reg.properties[0].toString();\r\n\r\n        if (_visible[id])\r\n            return true;\r\n\r\n        if (_hidden[id] || !_isActual(reg))\r\n            return false;\r\n        else\r\n            return true;\r\n    },\r\n    _addCalendar = function(){\r\n            \r\n        let calendar = this.frame.find('.calendar')[0];\r\n        // walkaround with focus at first input in ui-dialog\r\n        calendar.innerHTML = ('<span class=\"ui-helper-hidden-accessible\"><input type=\"text\"/></span>');\r\n\r\n        let mapDateInterval = nsGmx.widgets.commonCalendar.getDateInterval(),\r\n            dateInterval = new nsGmx.DateInterval();\r\n\r\n        dateInterval\r\n            .set('dateBegin', mapDateInterval.get('dateBegin'))\r\n            .set('dateEnd', mapDateInterval.get('dateEnd'))\r\n            .on('change', function (e) {\r\n//console.log(dateInterval.get('dateBegin'), dateInterval.get('dateEnd'));\r\n                nsGmx.widgets.commonCalendar.setDateInterval(dateInterval.get('dateBegin'), dateInterval.get('dateEnd'));                \r\n                if (_thisView.isVisible){\r\n                    _thisView.inProgress(true);\r\n                    _thisView.model.isDirty = true;\r\n                    _thisView.model.update();\r\n                }\r\n            }.bind(this));\r\n\r\n        this.calendar = new nsGmx.CalendarWidget({\r\n            dateInterval: dateInterval,\r\n            name: 'catalogInterval',\r\n            container: calendar,\r\n            dateMin: new Date(0, 0, 0),\r\n            dateMax: new Date(),\r\n            dateFormat: 'dd.mm.yy',\r\n            minimized: false,\r\n            showSwitcher: false\r\n        })\r\n\r\n        calendar.querySelector('.CalendarWidget-dateBegin').style.display = 'none';\r\n        let tr = calendar.querySelector('tr:nth-of-type(1)');\r\n        //tr.insertCell(2).innerHTML = '&nbsp;&nbsp;–&nbsp;&nbsp;';\r\n        tr.insertCell(4).innerHTML = \r\n        '<img class=\"default_date\" style=\"cursor:pointer; padding-right:10px\" title=\"'+_gtxt('HardNavigation.calendar_today')+'\" src=\"plugins/AIS/AISSearch/svg/calendar.svg\">';\r\n \r\n        // let td = tr.insertCell(6);\r\n        // td.innerHTML = '<div class=\"select\"><select class=\"\"><option value=\"00\" selected>00</option><option value=\"01\">01</option><option value=\"02\">02</option><option value=\"03\">03</option><option value=\"04\">04</option><option value=\"05\">05</option><option value=\"06\">06</option><option value=\"07\">07</option><option value=\"08\">08</option><option value=\"09\">09</option><option value=\"10\">10</option><option value=\"11\">11</option><option value=\"12\">12</option><option value=\"13\">13</option><option value=\"14\">14</option><option value=\"15\">15</option><option value=\"16\">16</option><option value=\"17\">17</option><option value=\"18\">18</option><option value=\"19\">19</option><option value=\"20\">20</option><option value=\"21\">21</option><option value=\"22\">22</option><option value=\"23\">23</option><option value=\"24\">24</option></div></select>';       \r\n        // tr.insertCell(7).innerHTML = '&nbsp;&nbsp;–&nbsp;&nbsp;';       \r\n        // td = tr.insertCell(8);\r\n        // td.innerHTML = '<div class=\"select\"><select class=\"\"><option value=\"00\">00</option><option value=\"01\">01</option><option value=\"02\">02</option><option value=\"03\">03</option><option value=\"04\">04</option><option value=\"05\">05</option><option value=\"06\">06</option><option value=\"07\">07</option><option value=\"08\">08</option><option value=\"09\">09</option><option value=\"10\">10</option><option value=\"11\">11</option><option value=\"12\">12</option><option value=\"13\">13</option><option value=\"14\">14</option><option value=\"15\">15</option><option value=\"16\">16</option><option value=\"17\">17</option><option value=\"18\">18</option><option value=\"19\">19</option><option value=\"20\">20</option><option value=\"21\">21</option><option value=\"22\">22</option><option value=\"23\">23</option><option value=\"24\" selected>24</option></div></select>';       \r\n        \r\n\r\n        calendar.querySelector('.default_date').addEventListener('click', () => {\r\n            let db = nsGmx.DateInterval.getUTCDayBoundary(new Date());\r\n            this.calendar.getDateInterval().set('dateBegin', db.dateBegin);\r\n            this.calendar.getDateInterval().set('dateEnd', db.dateEnd);\r\n//console.log(dateInterval.get('dateBegin'), dateInterval.get('dateEnd'));\r\n            nsGmx.widgets.commonCalendar.setDateInterval(db.dateBegin, db.dateEnd);              \r\n            if (_thisView.isVisible){\r\n                _thisView.inProgress(true);\r\n                _thisView.model.isDirty = true;\r\n                _thisView.model.update();\r\n            }\r\n        });\r\n    },\r\n    _checkVersion = function(){\r\n        setTimeout(()=>{\r\n            L.gmx.layersVersion.chkVersion(_layer);\r\n//console.log('ChV')                   \r\n            setTimeout(()=>{\r\n                L.gmx.layersVersion.chkVersion(_layer);\r\n//console.log('ChV')                   \r\n                setTimeout(()=>{\r\n                    L.gmx.layersVersion.chkVersion(_layer); \r\n//console.log('ChV')                   \r\n                }, 3000);\r\n            }, 3000);                                            \r\n        }, 3000);\r\n    },\r\n    _layerClickHandler = function (event) {\r\n        var layer = event.target,\r\n            props = layer.getGmxProperties(),\r\n            id = event.gmx.properties[props.identityField];\r\n\r\n        layer.bringToTopItem(id);\r\n                sendCrossDomainJSONRequest(`${serverBase}VectorLayer/Search.ashx?WrapStyle=func&layer=${props.name}&page=0&pagesize=1&orderby=${props.identityField}&geometry=true&query=[${props.identityField}]=${id}`,\r\n                function (response) {\r\n                    if (_stateUI == 'copy_region') {\r\n                        if (response.Status && response.Status.toLowerCase() == 'ok') {\r\n                            const result = response.Result,\r\n                                i = result.fields.indexOf('geomixergeojson'),\r\n                                obj=nsGmx.leafletMap.gmxDrawing.addGeoJSON(L.gmxUtil.geometryToGeoJSON(result.values[0][i], true)),\r\n                                gmx_id = result.values[0][result.fields.indexOf(props.identityField)],\r\n                                origin = parseInt(result.values[0][result.fields.indexOf('Origin')]),\r\n                                date = parseInt(result.values[0][result.fields.indexOf('Date')]),\r\n                                time = parseInt(result.values[0][result.fields.indexOf('Time')]),\r\n                                name = result.values[0][result.fields.indexOf('Name')],\r\n                                type = result.values[0][result.fields.indexOf('Type')],    \r\n                                media = result.values[0][result.fields.indexOf('_mediadescript_')],                   \r\n                                eoc = new nsGmx.EditObjectControl(props.name, null, {drawingObject: obj[0]}),\r\n                                dt = new Date(); \r\n                            eoc.initPromise.done(()=>{      \r\n                                eoc.set('Origin', origin && origin!='' ? origin : gmx_id);     \r\n                                eoc.set('Name', name); \r\n                                eoc.set('Type', type);  \r\n                                eoc.set('_mediadescript_', media);       \r\n                                eoc.set('Time', date + time); \r\n                                eoc.set('Date', date + time);       \r\n                                eoc.set('TimeChange', dt.getTime()/1000); \r\n                                eoc.set('DateChange', dt.getTime()/1000); \r\n                        \r\n                                const dlg = $(`span:contains(\"${_gtxt(\"Создать объект слоя [value0]\", props.title)}\")`).closest('.ui-dialog');\r\n                                dlg.find('tr').each((i, el)=>{\r\n                                    let name = el.querySelectorAll('td')[0].innerText;\r\n                                    if (name.search(/\\b(gmx_id|Name|Type|Date|Time)\\b/i)<0)\r\n                                    //if (i==0 || name.search(/\\b(State)\\b/i)==0)\r\n                                        el.style.display = 'none';\r\n                                });  \r\n                                dlg.find(`.buttonLink:contains(\"${_gtxt(\"Создать\")}\")`).on('click', e=>{\r\n                                    _thisView.inProgress(true);\r\n                                });  \r\n                            });\r\n                            $(eoc).on('modify', e=>{\r\n//console.log(e.target.getAll());\r\n                                let values = e.target.getAll();\r\n                                sendCrossDomainJSONRequest(`${serverBase}VectorLayer/ModifyVectorObjects.ashx?WrapStyle=func&LayerName=${props.name}&objects=[{\"properties\":{\"State\":\"archive\",\"NextDateChange\":${values.DateChange},\"NextTimeChange\":${values.TimeChange}},\"id\":\"${id}\",\"action\":\"update\"}]`,\r\n                                    function (response) {\r\n                                        _thisView.model.page = 0; // model update                                                       \r\n                                        _thisView.model.updatePromise.then(_checkVersion);\r\n\r\n                                        if (response.Status && response.Status.toLowerCase() == 'ok') {\r\n                                        }\r\n                                        else {\r\n                                            console.log(response);\r\n                                        }\r\n                                    });\r\n\r\n                            });                      \r\n                        }\r\n                        else{\r\n                            console.log(response);\r\n                        }\r\n                        _chooseBut.click(); \r\n                    }                \r\n                });\r\n        return true;\r\n    },\r\n    _copyRegion = function(){\r\n        const layer = _layer,\r\n              props = layer.getGmxProperties();\r\n        if (_stateUI == 'create_region' || _stateUI == '') {\r\n            if (_stateUI == 'create_region')\r\n                _createBut.click();\r\n\r\n            _stateUI = 'copy_region';\r\n            _chooseBut.addClass('active');\r\n            if (layer.disableFlip && layer.disablePopup) {\r\n                layer.disableFlip();\r\n                layer.disablePopup();\r\n            }\r\n            layer.on('click', _layerClickHandler);\r\n        }\r\n        else if (_stateUI == 'copy_region'){\r\n            _stateUI = '';\r\n            _chooseBut.removeClass('active');\r\n            if (layer.disableFlip && layer.disablePopup) {\r\n                layer.enableFlip();\r\n                layer.enablePopup();\r\n            }\r\n            layer.off('click', _layerClickHandler);\r\n        }\r\n    },\r\n    _onDrawStop = function(e){\r\n                    const obj = e.object,\r\n                          lprops = _layer.getGmxProperties(),\r\n                          eoc = new nsGmx.EditObjectControl(lprops.name, null, {drawingObject: obj});\r\n                    eoc.initPromise.done(()=>{      \r\n                        let dt = new Date();        \r\n                        eoc.set('Time', dt.getTime()/1000); \r\n                        eoc.set('Date', dt.getTime()/1000);                    \r\n                        const dlg = $(`span:contains(\"${_gtxt(\"Создать объект слоя [value0]\", lprops.title)}\")`).closest('.ui-dialog');\r\n                        dlg.find('tr').each((i, el)=>{\r\n                            let name = el.querySelectorAll('td')[0].innerText;\r\n                            if (name.search(/\\b(gmx_id|Name|Type|Date|Time)\\b/i)<0)\r\n                                el.style.display = 'none';\r\n                        }); \r\n                        dlg.find(`.buttonLink:contains(\"${_gtxt(\"Создать\")}\")`).on('click', e=>{\r\n                            _thisView.inProgress(true);\r\n                        });   \r\n                    });                              \r\n                    $(eoc).on('modify', e=>{\r\n                        _thisView.model.page = 0; // Model update\r\n                        _thisView.model.updatePromise.then(_checkVersion);\r\n                    });\r\n                    // Continue command\r\n                    //nsGmx.leafletMap._container.style.cursor='pointer'; \r\n                    //nsGmx.leafletMap.gmxDrawing.create('Polygon'); \r\n\r\n                    // Discontinue command\r\n                    if (_stateUI == 'create_region')\r\n                        _createBut.click();\r\n            },\r\n    _createRegion = function(){\r\n        if (_stateUI == 'copy_region' || _stateUI == ''){\r\n            if (_stateUI == 'copy_region')\r\n                _chooseBut.click();  \r\n            _stateUI = 'create_region'; \r\n            _createBut.addClass('active'); \r\n            nsGmx.leafletMap.gmxDrawing.on('drawstop', _onDrawStop);\r\n\r\n            nsGmx.gmxMap.layers.forEach( layer=>{\r\n                if (layer.disableFlip && layer.disablePopup) {\r\n                    layer.disableFlip();\r\n                    layer.disablePopup();\r\n                }\r\n            });\r\n \r\n            nsGmx.leafletMap._container.style.cursor='pointer';   \r\n            nsGmx.leafletMap.gmxDrawing.create('Polygon');\r\n        }\r\n        else if (_stateUI == 'create_region'){\r\n            _stateUI = '';\r\n            _createBut.removeClass('active');    \r\n            nsGmx.leafletMap._container.style.cursor='';     \r\n            nsGmx.leafletMap.gmxDrawing.off('drawstop', _onDrawStop);\r\n//console.log(`drawstop ${nsGmx.leafletMap.gmxDrawing._events.drawstop.length}`)\r\n\r\n            nsGmx.gmxMap.layers.forEach( layer=>{\r\n                if (layer.disableFlip && layer.disablePopup) {\r\n                    layer.enableFlip();\r\n                    layer.enablePopup();\r\n                }\r\n            });\r\n\r\n            nsGmx.leafletMap.gmxDrawing.clearCreate();\r\n        }\r\n    },\r\n    _clean = function () {\r\n\r\n        this.frame.find('.grid .info').off('click', _infoClickHandler);\r\n        this.frame.find('.grid .visibility').off('click', _visClickHandler);\r\n        this.frame.find('.grid .show').off('click', _showClickHandler);\r\n        //this.frame.find('.grid .state').off('click', _stateClickHandler);\r\n        this.frame.find('.grid .edit').off('click', _editClickHandler);\r\n\r\n    };\r\n\r\nMyCollectionView.prototype = Object.create(BaseView.prototype);\r\n\r\nMyCollectionView.prototype.inProgress = function (state) {\r\n    let progress = this.frame.find('.refresh div');\r\n    if (state)\r\n        progress.show();\r\n    else\r\n        progress.hide();\r\n};\r\n\r\n// MyCollectionView.prototype.resize = function () { \r\n//     let h = $('.iconSidebarControl-pane').height() - this.frame.find('.instruments').outerHeight()\r\n//     - this.frame.find('.results').outerHeight() - this.frame.find('.menu').outerHeight();\r\n//     this.container.height(h+1);\r\n// };\r\n\r\nconst _infoClickHandler = function(e){\r\n        let td = e.currentTarget,\r\n            id = td.parentElement.id,\r\n            descData = _layer._gmx.dataManager.getItem(parseInt(id)).properties[_layer.getGmxProperties().attributes.indexOf('_mediadescript_') + 1],\r\n            mediaDescDialog = jQuery('<div class=\"mediaDesc-Div\"><img src=\"plugins/external/GMXPluginMedia/addit/media_img_load.gif\"></img></div>');\r\n\r\n        mediaDescDialog.dialog({\r\n            title: _gtxt('mediaPlugin2.mediaDescDialogTitleRead.label'),\r\n            width: 510,\r\n            height: 505, //dialogSettings.dialogDescHeight,\r\n            minHeight: 505, //dialogSettings.dialogDescHeight,\r\n            maxWidth: 510,\r\n            minWidth: 510,\r\n            modal: false,\r\n            autoOpen: false,\r\n            dialogClass: 'media-DescDialog',\r\n            close: function () { mediaDescDialog.dialog('close').remove(); }\r\n        });\r\n\r\n        mediaDescDialog.html('<div class=\"media-descDiv\">' + descData + '</div>');\r\n        mediaDescDialog.dialog('open');\r\n    },\r\n     _visClickHandler = function(e){\r\n        let td = e.currentTarget,\r\n            id = td.parentElement.id,\r\n            svg = td.querySelectorAll('svg'),\r\n            vis = 0, hid = 1;\r\n        if (svg[0].style.display != 'none'){\r\n            delete _visible[id];\r\n            _hidden[id] = true;\r\n            vis = 1; hid = 0;\r\n        }\r\n        else{\r\n            _visible[id] = true;\r\n            delete _hidden[id];\r\n            vis = 0; hid = 1;\r\n        }\r\n        svg[hid].style.display = 'none';\r\n        svg[vis].style.display = 'block';\r\n        _layer.repaint();\r\n//console.log(_hidden)\r\n    },\r\n    _showClickHandler = function(e){\r\n        var id = e.currentTarget.parentElement.id,\r\n            layer = _layer,\r\n            props = layer.getGmxProperties(),\r\n            layerName = props.name;\r\n        sendCrossDomainJSONRequest(window.serverBase + 'VectorLayer/Search.ashx?WrapStyle=func&layer=' + layerName + '&page=0&pagesize=1&geometry=true&query=' + encodeURIComponent('[' + props.identityField + ']=' + id), function(response) {\r\n            if (!window.parseResponse(response)) {\r\n                return;\r\n            }\r\n            var columnNames = response.Result.fields;\r\n            var row = response.Result.values[0];\r\n            //for (var i = 0; i < row.length; ++i)\r\n            var i = columnNames.indexOf('geomixergeojson');\r\n            {\r\n                if (columnNames[i] === 'geomixergeojson' && row[i])\r\n                {\r\n                    var fitBoundsOptions = layer ? {maxZoom: layer.options.maxZoom} : {};\r\n\r\n                    var geom = L.gmxUtil.geometryToGeoJSON(row[i], true);\r\n                    var bounds = L.gmxUtil.getGeometryBounds(geom);\r\n                    nsGmx.leafletMap.fitBounds([\r\n                        [bounds.min.y, bounds.min.x],\r\n                        [bounds.max.y, bounds.max.x]\r\n                    ], fitBoundsOptions);\t\t\t\t\t\t\r\n                }\r\n            }\r\n        });\r\n    },\r\n    _stateClickHandler = function(e){\r\n        let td = e.currentTarget,\r\n        id = td.parentElement.id,\r\n        state = '';\r\n\r\n        if (td.className.search(/green/)!=-1)\r\n            state = 'archive';\r\n\r\n        sendCrossDomainJSONRequest(`${serverBase}VectorLayer/ModifyVectorObjects.ashx?WrapStyle=func&LayerName=${_layer.getGmxProperties().name}&objects=[{\"properties\":{\"State\":\"${state}\"},\"id\":\"${id}\",\"action\":\"update\"}]`,\r\n        function (response) {\r\n            if (response.Status && response.Status.toLowerCase() == 'ok') {\r\n                _thisView.inProgress(true);\r\n                _thisView.model.isDirty = true;\r\n                _thisView.model.update();                                                      \r\n                _thisView.model.updatePromise.then(_checkVersion);\r\n            }\r\n            else\r\n                console.log(response);\r\n        });                \r\n    },\r\n    _editClickHandler = function(e){\r\n\r\n        if (_stateUI != '')\r\n            return;\r\n        _stateUI = 'edit_region';\r\n\r\n        let id = e.currentTarget.parentElement.id,\r\n            layerName = _layer.getGmxProperties().name,\r\n            layerTitle = _layer.getGmxProperties().title,\r\n            eoc = new nsGmx.EditObjectControl(layerName, id),\r\n            dt = new Date(); \r\n        let isDelete = false; \r\n        eoc.initPromise.done(()=>{        \r\n            //eoc.set('TimeChange', dt.getTime()/1000); \r\n            //eoc.set('DateChange', dt.getTime()/1000);\r\n            const dlg = $(`span:contains(\"${_gtxt(\"Редактировать объект слоя [value0]\", layerTitle)}\")`).closest('.ui-dialog');\r\n            dlg.find('tr').each((i, el)=>{\r\n                let name = el.querySelectorAll('td')[0].innerText;\r\n                if (i>1 && name.search(/\\b(Name|Type)\\b/i)<0)\r\n                    el.style.display = 'none';\r\n            });                 \r\n            dlg.find(`.buttonLink:contains(\"${_gtxt(\"Изменить\")}\")`).on('click', e=>{\r\n                _thisView.inProgress(true);\r\n            });                 \r\n            dlg.find(`.buttonLink:contains(\"${_gtxt(\"Удалить\")}\")`).on('click', e=>{\r\n                _thisView.inProgress(true);\r\n                isDelete = true;\r\n            }); \r\n        });            \r\n        $(eoc).on('modify', e=>{\r\n///console.log(e.target.getAll(), dt);\r\n            _thisView.model.isDirty = true;                       \r\n            _thisView.model.update();                \r\n            _thisView.model.updatePromise.then(_checkVersion);\r\n        });                   \r\n        $(eoc).on('close', e=>{\r\n            if (isDelete)\r\n                _thisView.model.page = 0;\r\n            _stateUI = '';            \r\n        });        \r\n    };\r\n\r\nMyCollectionView.prototype.repaint = function () { \r\n    _clean.call(this);\r\n    BaseView.prototype.repaint.call(this); \r\n\r\n    if (this.model.pagesTotal){\r\n        const pager = this.frame.find('.pager'),\r\n        pages = pager.find('.pages');\r\n        pager.css('visibility', 'visible');\r\n        pages.text(`${this.model.page+1} / ${this.model.pagesTotal}`);\r\n\r\n        $('.grid tr').each((i, el)=>{\r\n            let id = el.id, \r\n            svg = el.querySelectorAll('svg');\r\n//console.log(id, _layer.getDataManager().getItem(parseInt(id)));\r\n            const attr = _layer.getGmxProperties().attributes,\r\n                  props = [id];\r\n            props[attr.indexOf('Date')+1] = _thisView.model.data.regions[i].Date;\r\n            props[attr.indexOf('Time')+1] = _thisView.model.data.regions[i].Time;\r\n            props[attr.indexOf('DateChange')+1] = _thisView.model.data.regions[i].DateChange;\r\n            props[attr.indexOf('TimeChange')+1] = _thisView.model.data.regions[i].TimeChange;\r\n            props[attr.indexOf(\"NextDateChange\") + 1] = _thisView.model.data.regions[i].NextDateChange;\r\n            props[attr.indexOf(\"NextTimeChange\") + 1] = _thisView.model.data.regions[i].NextTimeChange;\r\n            props[attr.indexOf('State')+1] = _thisView.model.data.regions[i].State;\r\n            props[attr.indexOf('Origin')+1] = _thisView.model.data.regions[i].Origin;\r\n            const reg = {properties: props};\r\n//console.log(reg);\r\n            if (!_isVisible(reg)){\r\n                svg[0].style.display = 'none';\r\n                svg[1].style.display = 'block';\r\n            }\r\n            if (!_isActual(reg))\r\n                el.classList.add('nonactual');\r\n            else\r\n                el.classList.remove('nonactual');\r\n        });\r\n\r\n        this.frame.find('.grid .info').on('click', _infoClickHandler);\r\n        this.frame.find('.grid .visibility').on('click', _visClickHandler);\r\n        this.frame.find('.grid .show').on('click', _showClickHandler);\r\n        //this.frame.find('.grid .state').on('click', _stateClickHandler);\r\n        this.frame.find('.grid .state').css('cursor', 'default');\r\n        this.frame.find('.grid .edit').on('click', _editClickHandler);\r\n    }\r\n    else{\r\n        this.frame.find('.pager').css('visibility', 'hidden');\r\n    }\r\n};\r\n\r\nMyCollectionView.prototype.show = function () {\r\n    if (!this.frame)\r\n        return;\r\n\r\n    if (!_layer._map)\r\n        nsGmx.leafletMap.addLayer(_layer);\r\n\r\n    this.frame.show();\r\n    //this.searchInput.focus();\r\n    BaseView.prototype.show.apply(this, arguments);\r\n};\r\n\r\nmodule.exports = MyCollectionView;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/MyCollectionView.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Views/MyCollection.css\n// module id = 8\n// module chunks = 0","let _clean = function(){  \r\n    let scrollCont = this.container.find('.mCSB_container')\r\n    if (scrollCont[0]){\r\n        scrollCont.empty();\r\n    }\r\n    else{\r\n        this.container.empty();\r\n    }\r\n};\r\n\r\nconst BaseView = function (model) {\r\n    model.view = this;\r\n    this.model = model;\r\n    this.gifLoader = '<img src=\"img/progress.gif\">';\r\n};\r\n\r\nBaseView.prototype = function () {\r\n    return {\r\n        get isActive(){\r\n            return this.frame.is(\":visible\");\r\n        },\r\n        resize: function (clean) {\r\n            if(!this.frame)\r\n                return;\r\n\r\n//console.log($('.iconSidebarControl-pane').height(), this.topOffset, this.bottomOffset)\r\n            let h = $('.iconSidebarControl-pane').height() - this.topOffset - this.bottomOffset;\r\n            // if (this.startScreen){\r\n            //     this.startScreen.height(h);\r\n            //     this.container.css({ position:\"relative\", top: -h+\"px\" });\r\n            // }\r\n            this.container.height(h);\r\n\r\n            if (clean){\r\n                this.container.empty()\r\n            }\r\n        },\r\n        repaint: function(){\r\n            _clean.call(this); \r\n            \r\n            this.inProgress(false);\r\n\r\n            if (!this.model.data)\r\n                return;\r\n\r\n            let scrollCont = this.container.find('.mCSB_container'),\r\n            content = $(Handlebars.compile(this.tableTemplate)(this.model.data));  \r\n            if (!scrollCont[0]) {\r\n                this.container.append(content).mCustomScrollbar(this.mcsbOptions);\r\n            }\r\n            else {\r\n                $(scrollCont).append(content);\r\n            }\r\n\r\n        },\r\n        show: function () {\r\n            if (!this.frame)\r\n                return;\r\n            this.frame.show();\r\n            this.model.update();\r\n        },\r\n        hide: function () {\r\n            this.frame.hide();\r\n        },\r\n        get isVisible(){\r\n            const rc = this.frame[0].getBoundingClientRect();\r\n            return rc.width!=0 && rc.height!=0;\r\n        }\r\n    }\r\n}();\r\n\r\nmodule.exports = BaseView;\n\n\n// WEBPACK FOOTER //\n// ./src/Views/BaseView.js","const Polyfill = require('../Polyfill');\r\nmodule.exports = function (options) {\r\n    let _actualUpdate,\r\n        _data,\r\n        _page = 0,\r\n        _pageSize = 14, \r\n        _count = 0;\r\n        \r\n    const _layerName = options.layer,\r\n    _checkResponse = function(r){return (r && r.Status && r.Status.toLowerCase()=='ok');};\r\n    if (!_data)\r\n        _data = { regions: [] }; \r\n\r\n    const _initPromise = new Promise((resolve, reject)=>{\r\n        const layer = nsGmx.gmxMap.layersByID[_layerName];\r\n        if (!layer){\r\n            reject('HardNavigation plugin error: no layer ' + _layerName);\r\n            return;\r\n        }\r\n        const props = nsGmx.gmxMap.layersByID[_layerName]._gmx.properties,\r\n        columns = [];\r\n        props.attributes.forEach((a,i)=>{\r\n            columns.push({Name:a,OldName:a,ColumnSimpleType:props.attrTypes[i],IsPrimary:false,IsIdentity:false,IsComputed:false,expression:`\"${a}\"`});\r\n        });\r\n        if (props.attributes.indexOf(\"Name\")<0)\r\n            columns.push({Name:'Name', ColumnSimpleType:'String',IsPrimary:false,IsIdentity:false,IsComputed:false,expression:'\"Name\"'});\r\n        if (props.attributes.indexOf(\"Type\") < 0)\r\n            columns.push({ Name: 'Type', ColumnSimpleType: 'String', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"Type\"' });\r\n        if (props.attributes.indexOf(\"Date\") < 0)\r\n            columns.push({ Name: 'Date', ColumnSimpleType: 'Date', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"Date\"' });\r\n        if (props.attributes.indexOf(\"Time\") < 0)\r\n            columns.push({ Name: 'Time', ColumnSimpleType: 'Time', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"Time\"' });\r\n        if (props.attributes.indexOf(\"DateChange\") < 0)\r\n            columns.push({ Name: 'DateChange', ColumnSimpleType: 'Date', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"DateChange\"' });\r\n        if (props.attributes.indexOf(\"TimeChange\") < 0)\r\n            columns.push({ Name: 'TimeChange', ColumnSimpleType: 'Time', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"TimeChange\"' });        \r\n        \r\n        if (props.attributes.indexOf(\"NextDateChange\") < 0)\r\n            columns.push({ Name: 'NextDateChange', ColumnSimpleType: 'Date', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"NextDateChange\"' });\r\n        if (props.attributes.indexOf(\"NextTimeChange\") < 0)\r\n            columns.push({ Name: 'NextTimeChange', ColumnSimpleType: 'Time', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"NextTimeChange\"' });\r\n        \r\n            if (props.attributes.indexOf(\"State\") < 0)\r\n            columns.push({ Name: 'State', ColumnSimpleType: 'String', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"State\"' });\r\n        if (props.attributes.indexOf(\"Origin\") < 0)\r\n            columns.push({ Name: 'Origin', ColumnSimpleType: 'String', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"Origin\"' });\r\n        if (props.attributes.indexOf(\"_mediadescript_\") < 0)\r\n            columns.push({ Name: '_mediadescript_', ColumnSimpleType: 'String', IsPrimary: false, IsIdentity: false, IsComputed: false, expression: '\"_mediadescript_\"' });\r\n\r\n        if (columns.length==props.attributes.length){\r\n            resolve(columns.length); \r\n        }\r\n        else{       \r\n            const def = nsGmx.asyncTaskManager.sendGmxPostRequest(serverBase + \"VectorLayer/Update.ashx\", {\r\n                VectorLayerID: _layerName, \r\n                MetaProperties: JSON.stringify({mediaDescField:{Type:\"String\",Value:\"_mediadescript_\"}}),\r\n                Columns: JSON.stringify(columns)}); \r\n            def.promise().done(r=>resolve(columns.length)).fail(r=>reject(r));\r\n        }\r\n    });\r\n\r\n    return {\r\n\r\n        isDirty: true,\r\n        updatePromise: Promise.resolved,\r\n        get data() { return _data },\r\n        set data(value) { _data = value; },\r\n        get pagesTotal() { return Math.ceil(_count/_pageSize); },\r\n        set page(value) { \r\n            if (value<0){\r\n                return;\r\n            }\r\n            if (this.pagesTotal>0 && value>=this.pagesTotal){\r\n                return;\r\n            }\r\n            _page = value; \r\n            this.isDirty = true;\r\n            this.update();\r\n        },\r\n        get page() { return _page; },\r\n        previousPage: function(){\r\n            if (!this.isDirty)\r\n                this.page = _page - 1;\r\n        },\r\n        nextPage: function(){\r\n            if (!this.isDirty)\r\n                this.page = _page + 1;\r\n        },\r\n        update: function () {\r\n            const thisModel = this;\r\n            if (!thisModel.isDirty)\r\n                return;\r\n\r\n                        const mapDateInterval = nsGmx.widgets.commonCalendar.getDateInterval(),\r\n                        formatDt = function(dt){return `${dt.getFullYear()}-${('0'+(dt.getMonth()+1)).slice(-2)}-${('0'+dt.getDate()).slice(-2)}`},\r\n                        dtBegin = formatDt(mapDateInterval.get('dateBegin')),\r\n                        dtEnd = formatDt(mapDateInterval.get('dateEnd'));\r\n\r\n            _initPromise.then((test)=>{\r\n//console.log(test)\r\n                _count = 0;\r\n                _data.regions.length = 0;\r\n                thisModel.view.inProgress(true);\r\n                thisModel.updatePromise = [function(r){\r\n                    return new Promise((resolve, reject) => {\r\n                        sendCrossDomainJSONRequest(`${window.serverBase}VectorLayer/Search.ashx?Layer=${_layerName}&count=true` + \r\n                        `&query=\"Date\"<'${dtEnd}' and (\"DateChange\" is null or \"DateChange\"<'${dtEnd}') and ((\"NextDateChange\" is null and (\"State\"<>'archive' or (\"Date\">='${dtBegin}' and \"DateChange\" is null) or \"DateChange\">='${dtBegin}')) or \"NextDateChange\">='${dtEnd}')`, r=>\r\n                            resolve(r)\r\n                        );\r\n                    });\r\n                }, function(r){\r\n                    if (_checkResponse(r)){\r\n                        _count = parseInt(r.Result);\r\n                        sendCrossDomainJSONRequest(`${window.serverBase}VectorLayer/Search.ashx?Layer=${_layerName}&orderby=gmx_id&orderdirection=DESC&pagesize=${_pageSize}&page=${_page}` + \r\n                        `&query=\"Date\"<'${dtEnd}' and (\"DateChange\" is null or \"DateChange\"<'${dtEnd}') and ((\"NextDateChange\" is null and (\"State\"<>'archive' or (\"Date\">='${dtBegin}' and \"DateChange\" is null) or \"DateChange\">='${dtBegin}')) or \"NextDateChange\">='${dtEnd}')`, r=>{\r\n                            _data.regions.length = 0;                        \r\n                            if (_checkResponse(r)){\r\n                                //resolve(r); \r\n                                let result = r.Result,\r\n                                    format = function(d, t){   \r\n                                        if (!d || !t || isNaN(d) || isNaN(t)) \r\n                                            return '';\r\n                                        let dt = new Date(d*1000 + t*1000 + new Date().getTimezoneOffset()*60*1000);\r\n                                        return `${dt.toLocaleDateString()}<br>${dt.toLocaleTimeString()}`\r\n                                    };\r\n                                _data.fields = result.fields.map(f=>f);\r\n                                for (let i=0; i<result.values.length; ++i){\r\n                                    let reg = {};\r\n                                    for (let j =0; j<result.fields.length; ++j)\r\n                                        reg[result.fields[j]] = result.values[i][j];\r\n                                    reg.id = (reg.Origin && reg.Origin!='') ? reg.Origin : reg.gmx_id;\r\n                                    reg.DateTime = format(reg.Date, reg.Time);\r\n                                    //reg.DateTimeChange = reg.DateChange ? format(reg.DateChange, reg.TimeChange) : format(reg.Date, reg.Time);\r\n                                    reg.DateTimeChange = format(reg.DateChange, reg.TimeChange);\r\n                                    reg.StateColor = reg.State.search(/\\barchive\\b/)!=-1?\"color-red\":\"color-green\";\r\n                                    _data.regions.push(reg);\r\n                                }\r\n    //console.log(_data);\r\n                            }\r\n                            else\r\n                                console.log(r)\r\n                            thisModel.view.repaint();\r\n                            thisModel.isDirty = false;\r\n                            //resolve();\r\n                        });\r\n                        //});\r\n                    }\r\n                    else{\r\n                        console.log(r)\r\n                        thisModel.view.repaint();\r\n                        thisModel.isDirty = false;\r\n                    }\r\n                }]\r\n                .reduce((p, c)=>p.then(c), Promise.resolve());\r\n            })\r\n            .catch(error=>{\r\n                thisModel.data.msg = [{txt:_gtxt('HardNavigation.layer_error')}];\r\n                console.log(error);\r\n                thisModel.view.repaint();\r\n                thisModel.isDirty = false;\r\n            }); // _initPromise\r\n        } // this.update\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Models/MyCollectionModel.js","module.exports = { \r\n\tfind: function(a, predicate) {\r\n\t\tvar list = Object(a);\r\n\t\tvar length = list.length >>> 0;\r\n\t\tvar thisArg = arguments[2];\r\n\t\tvar value;\r\n\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t  value = list[i];\r\n\t\t  if (predicate.call(thisArg, value, i, list)) {\r\n\t\t\treturn value;\r\n\t\t  }\r\n\t\t}\r\n\t\treturn undefined;\r\n\t},\r\n\tfindIndex: function(a, predicate) {\r\n\t\tvar list = Object(a);\r\n\t\tvar length = list.length >>> 0;\r\n\t\tvar thisArg = arguments[2];\r\n\t\tvar value;\r\n\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t  value = list[i];\r\n\t\t  if (predicate.call(thisArg, value, i, list)) {\r\n\t\t\treturn i;\r\n\t\t  }\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Polyfill.js"],"sourceRoot":""}