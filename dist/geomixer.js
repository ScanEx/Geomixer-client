+function() {var buildGUID = "06b4b1d6ea3741a7937b355d0c733f9e";var gmxFilesList = ["leaflet/plugins/Leaflet-GeoMixer/src/commonjs.js","leaflet/plugins/Leaflet-GeoMixer/src/Parsers.js","leaflet/plugins/Leaflet-GeoMixer/src/Deferred.js","leaflet/plugins/Leaflet-GeoMixer/src/ImageLoader.js","leaflet/plugins/Leaflet-GeoMixer/src/Utils.js","leaflet/plugins/Leaflet-GeoMixer/src/DrawCanvas.js","leaflet/plugins/Leaflet-GeoMixer/src/SessionManager.js","leaflet/plugins/Leaflet-GeoMixer/src/MapManager.js","leaflet/plugins/Leaflet-GeoMixer/src/GeomixerMap.js","leaflet/plugins/Leaflet-GeoMixer/src/EventsManager.js","leaflet/plugins/Leaflet-GeoMixer/src/Locale.js","leaflet/plugins/Leaflet-GeoMixer/src/lang_ru.js","leaflet/plugins/Leaflet-GeoMixer/src/lang_en.js","leaflet/plugins/Leaflet-GeoMixer/src/DataManager/VectorTileLoader.js","leaflet/plugins/Leaflet-GeoMixer/src/DataManager/VectorTile.js","leaflet/plugins/Leaflet-GeoMixer/src/DataManager/Observer.js","leaflet/plugins/Leaflet-GeoMixer/src/DataManager/TilesTree.js","leaflet/plugins/Leaflet-GeoMixer/src/DataManager/DataManager.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/VectorLayer.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/ScreenVectorTile.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/ObjectsReorder.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/StyleManager.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/VectorLayer.Popup.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/VectorLayer.Hover.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/LayersVersion.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/RasterLayer.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/LabelsLayer.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/ClipPolygon.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/ImageTransform.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/ProjectiveImageWebGL.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/ProjectiveImage.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/external/RotatedMarker.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/external/ExternalLayer.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/external/BindWMS.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/external/HeatMap.js","leaflet/plugins/Leaflet-GeoMixer/src/Layer/external/MarkerCluster.js","leaflet/plugins/Leaflet-GeoMixer/src/LayerFactory.js","leaflet/plugins/gmxControls/src/js/gmxPosition.js","leaflet/plugins/gmxControls/src/js/gmxControlsManager.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxIcon.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxIconGroup.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxDrawing.js","leaflet/plugins/gmxControls/src/locale/L.Control.gmxDrawing.locale.ru.js","leaflet/plugins/gmxControls/src/locale/L.Control.gmxDrawing.locale.en.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxCenter.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxHide.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxLayers.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxLocation.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxPopup.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxCopyright.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxZoom.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxBottom.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxLogo.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxSidebar.js","leaflet/plugins/gmxControls/src/js/L.Control.gmxLoaderStatus.js","leaflet/plugins/gmxDrawing/src/L.GmxDrawing.js","leaflet/plugins/gmxDrawing/src/L.GmxDrawing.Feature.js","leaflet/plugins/gmxDrawing/src/L.GmxDrawing.Ring.js","leaflet/plugins/gmxDrawing/src/L.GmxDrawing.PointMarkers.js","leaflet/plugins/gmxDrawing/src/L.GmxDrawing.ContextMenu.js","leaflet/plugins/gmxDrawing/src/L.GmxDrawing.utils.js","gmxcore.js","DefaultPlugins.js","PluginsManager.js","translations.js","lang_ru.js","lang_en.js","utilities.js","AuthManager.js","AuthWidget.js","AsyncTaskManager.js","drawingObjectsCustomControllers.js","menu.js","ScrollTableControl.js","mapCommon.js","Controls.js","LayersTree.js","mapHelper.js","AttributeValuesProviders.js","ShpEncodingWidget.js","userObjects.js","queryTabs.js","queryExternalMaps.js","binding.js","mapLayers.js","contextMenuController.js","MapsManagerControl.js","LayersManagerControl.js","queryLoadShp.js","drawingObjects.js","fileBrowser.js","tableBrowser.js","loadServerData.js","charts.js","kmlParser.js","security.js","EditObjectControl.js","src/AttrSuggestWidget.js","src/TemporalLayerParams.js","src/QuicklookParams.js","src/LayerEditor/ManualAttrModel.js","src/LayerEditor/ManualAttrView.js","src/LayerEditor/TemporalLayerParamsWidget.js","src/LayerEditor/LayerRasterCatalogWidget.js","src/LayerEditor/LayerQuicklookWidget.js","src/AttrTable/AttrTable.js","src/AttrTable/ServerDataProvider.js","src/AttrTable/SquareCalculation.js","src/AttrTable/DefaultSearchParamsManager.js","src/GridPlugin/GridPlugin.js","src/MapExport/MapExport.js","src/IndexGrid/IndexGrid.js","src/PhotoLayer/PhotoLayer.js","CoverControl.js","CoverControl2.js","DateLayerVisibilityControl.js","DateFilteringControl.js","ClipboardController.js","PluginsEditor.js","ZoomPropertiesControl.js","HeaderLinksControl.js","ClusterParamsControl.js","LayerTagsControl.js","RCAddLayerControl.js","search.js","NotificationWidget.js","VirtualLayerManager.js","common_components/primary.js","src/CommonCalendarWidget/CommonCalendarWidget.js","starter.js","version.js","leaflet/plugins/GMXVirtualTileLayer/GmxVirtualTileLayer.js"];var thirdpartyList = ["jquery/jquery-1.10.2.min.js","jquery/jquery.getCSS.js","jquery/jquery.mousewheel.min.js","jquery/jquery-ui-1.10.4.min.js","jquery/jquery-ui-1.11.4-select.min.js","jquery/ui.datepicker-ru.js","jquery/jquery-ui-timepicker-addon.js","jquery/ui.timepicker-ru.js","jquery/jquery.treeview.js","jquery/handlebars.js","jquery/underscore-min.js","jquery/backbone-min.js","colorpicker/js/colorpicker.js","colorpicker/js/eye.js","colorpicker/js/utils.js","thirdparty/customscrollbar/jquery.mCustomScrollbar.js","leaflet/leaflet.js","leaflet/plugins/Leaflet.TileLayer.Mercator/src/TileLayer.Mercator.js","leaflet/plugins/gmxBaseLayersManager/src/gmxBaseLayersManager.js","leaflet/plugins/gmxBaseLayersManager/src/initBaseLayerManager.js","leaflet/plugins/gmxGrid/src/Leaflet.gmxGrid.js","leaflet/plugins/Leaflet.Dialog/Leaflet.Dialog.js","leaflet/plugins/Leaflet.MapboxVectorTile/dist/Leaflet.MapboxVectorTile.min.js"];var cssToLoad = ["css/common.css","css/PluginEditor.css","css/print.css","css/AttrTable.css","css/SuggestWidget.css","css/search.css","css/primary.css","css/jquery-ui-1.10.4.css","css/jquery-ui-1.11.4-select.css","css/jquery-ui-1.10.4-gmx.css","css/jquery-ui-timepicker-addon.css","thirdparty/customscrollbar/jquery.mCustomScrollbar.css","css/colorpicker.css","css/menu.css","css/buttons.css","css/treeview.css","css/EditObjectControl.css","css/security.css","css/drawing.css","css/NotificationWidget.css","css/LayerQuicklookWidget.css","css/layerstylesmenu.css","css/swich-slider.css","common_components/adapter.css","leaflet/leaflet.css","leaflet/plugins/gmxControls/src/css/external.css","leaflet/leafletGmx.css","leaflet/plugins/Leaflet.ExtSearch/src/SearchControl.css","leaflet/plugins/Leaflet.Dialog/Leaflet.Dialog.css","src/GridPlugin/GridPlugin.css","src/MapExport/MapExport.css","src/IndexGrid/IndexGrid.css","src/PhotoLayer/PhotoLayer.css","src/CommonCalendarWidget/CommonCalendarWidget.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxIcon.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxIconGroup.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxDrawing.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxCenter.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxHide.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxLayers.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxLocation.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxPopup.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxCopyright.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxZoom.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxBottom.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxLogo.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxSidebar.css","leaflet/plugins/gmxControls/src/css/L.Control.gmxLoaderStatus.css","leaflet/plugins/gmxDrawing/css/L.gmxDrawing.css"];var moduleFiles = {"L.ImageOverlay.Pane":"leaflet/plugins/L.ImageOverlay.Pane/src/L.ImageOverlay.Pane.js","ProfilePlugin":"common_components/GeoMixerAccount/ProfilePlugin.js"};﻿(function(){

var gmxJSHost = window.gmxJSHost || "";

window.nsGmx = {};
window.nsGmx.GeomixerFramework = true;

//подставляет к локальному имени файла хост (window.gmxJSHost) и, опционально, рандомное поле для сброса кэша (window.gmxDropBrowserCache)
var _getFileName = function( localName )
{
    var filename = gmxJSHost + localName;
    
    if (window.gmxDropBrowserCache) {
        filename += '?' + Math.random();
    } else if (nsGmx.buildGUID){
        filename += '?' + nsGmx.buildGUID;
    }
    
	return filename;
}

//последовательно загружает все файлы js и вызывает после этого callback
var loadJS = function(fileList, callback)
{
    var LABInstance = $LAB;
		
    if (fileList.length)
    {
        for (var f = 0; f < fileList.length-1; f++)
            LABInstance = LABInstance.script(_getFileName(fileList[f])).wait();
            
        LABInstance.script(_getFileName(fileList[fileList.length-1])).wait(callback);
    }
    else
        callback();
}

nsGmx.buildGUID = buildGUID;

loadJS(thirdpartyList, function() {
    
    for (var f = 0; f < cssToLoad.length; f++) {
        $.getCSS(_getFileName(cssToLoad[f]));
    }
    
    nsGmx._ = window._;

    loadJS(gmxFilesList, function()
    {
        gmxCore.setDefaultModulesHost(gmxJSHost);
        
        for (var m in moduleFiles) {
            gmxCore.setModuleFile(m, gmxJSHost + moduleFiles[m]);
        }
        
        nsGmx.initGeoMixer();
    });
})

})(); }()