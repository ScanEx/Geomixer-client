<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	
	<script src="../../api.js?key=E5FB6CCB5D23B5E119D2F1B26BCC57BD" charset="windows-1251"></script> 
	
	<title>GeoMixer API - Прослушивать событие изменения видимости слоя</title>
</head>

<body>
<div id="map_container" style="width: 800px; height: 600px; float: left;"></div>
<br>
<span id="cmdHash" class="bodytext"></span>

<script>


	createFlashMap(document.getElementById("map_container"), function(map)
	{
		map.moveTo(105.506, 61.825, 3);//позиционирует карту по координатам центра и выбирает масштаб

		map.layers['Hybrid_world'].addMapStateListener("onChangeVisible", function(attr) {
				var out = '<br>Видимость слоя Hybrid_world: ' + attr;
				document.getElementById("cmdHash").innerHTML += out;
				return;
			}
		);

		map.layers['БазоваяКарта'].addMapStateListener("onChangeVisible", function(attr) {
				var out = '<br>Видимость слоя БазоваяКарта: ' + attr;
				document.getElementById("cmdHash").innerHTML += out;
				return;
			}
		);

		map.layers['БазовоеПокрытиеАПИ'].addMapStateListener("onChangeVisible", function(attr) {
				var out = '<br>Видимость слоя БазовоеПокрытиеАПИ: ' + attr;
				document.getElementById("cmdHash").innerHTML += out;
				return;
			}
		);
	});

</script>

</body>
</html>