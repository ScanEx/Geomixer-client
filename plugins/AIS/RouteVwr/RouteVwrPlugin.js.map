{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Models/RouteModel.js","webpack:///./src/PluginPanel.js","webpack:///./src/Request.js","webpack:///./src/SelectControl.css?21a2","webpack:///./src/SelectControl.js","webpack:///./src/Views/BaseView.js","webpack:///./src/Views/RouteView.css?afc7","webpack:///./src/Views/RouteView.js","webpack:///./src/ViewsFactory.js","webpack:///./src/all.css","webpack:///./src/entry.js","webpack:///./src/locale.js"],"names":["Request","require","_defaultViconColor","_getUnderWayIcon","cog","sog","type_color","group_style","_gtxt","_getAtAnchorIcon","_vicons","_viconsDict","_styleLayer","_getVicons","nsGmx","gmxMap","layersByID","_gmx","properties","gmxStyles","styles","forEach","s","icon","Filter","RenderStyle","iconUrl","replace","Name","push","filter","_getViconSvgPromise","ic","Promise","resolve","httpRequest","XMLHttpRequest","onreadystatechange","readyState","responseText","a","exec","svg","color","length","open","document","location","protocol","url","send","_getVicon","vessel_type","f","re1","RegExp","re2","search","_loadViconPromise","module","exports","options","_lmap","leafletMap","_tracks","_vmarkers","all","map","_data","routes","msg","_layerName","layer","isDirty","data","value","update","view","inProgress","fetchRequest","vessel","mmsi","then","r","json","Status","toLowerCase","Result","_selectVessel","values","v","name","route","fields","i","console","log","repaint","bind","viewFactory","_isReady","_activeView","_canvas","_div","_views","create","_create","$","sidebarPane","append","frame","resize","show","_returnInstance","call","_serverBase","window","serverBase","_fetchRequest","request","method","fetch","headers","mode","body","encodeURI","_sendRequest","reject","callback","response","sendCrossDomainJSONRequest","_getQueryString","WrapStyle","sendCrossDomainPostRequest","params","qs","p","JSON","stringify","_searchRequest","_modifyRequest","_checkVersion","ms","setTimeout","L","gmx","layersVersion","chkVersion","sendRequest","searchRequest","modifyRequest","checkVersion","container","active","_isOptionsDisplayed","_select","createElement","_optionsList","_selected","className","innerHTML","o","join","_arrow","querySelector","_options","querySelectorAll","_hideOptions","style","display","classList","remove","add","_setOptionsRect","selectedRc","getBoundingClientRect","bw","parseInt","getComputedStyle","borderWidth","isNaN","width","top","bottom","left","addEventListener","e","srcElement","id","dropDownList","_clean","scrollCont","find","empty","BaseView","model","gifLoader","prototype","isActive","is","clean","h","height","topOffset","bottomOffset","content","tableTemplate","mCustomScrollbar","mcsbOptions","hide","isVisible","rc","SelectControl","_toDd","D","isLng","dir","deg","Math","round","toFixed","_searchLayer","_thisView","_layer","RouteView","Handlebars","compile","footer","selectVessel","l","selected","trackLayer","Object","defineProperty","get","rv","t","vessel_mmsi","vessel_name","calc_etd","calc_eta","m","txt","_renderPosTable","positions","j","utc_time","local_time","utc_date","local_date","lon","lat","vicon","off","_onOpenPosClick","_onShowTrack","_onShowAllTracks","_onShowPos","_onExport","state","progress","grid","target","removeClass","addClass","div","html","split","on","showTrack","showAllTracks","each","el","checked","drawTrack","eraseTrack","currentTarget","checkAll","ij","pos","setView","latitude","longitude","type","tracks","trackLine","reduce","c","features","geometry","gmxUtil","geometryToGeoJSON","coordinates","getFilename","spart","epart","vname","Utils","downloadGeometry","fileName","format","apply","arguments","MyCollectionView","MyCollectionModel","_mcm","_mcv","pluginName","menuId","toolbarIconId","cssTable","modulePath","gmxCore","getModulePath","PluginPanel","ViewsFactory","publicInterface","afterViewer","pluginPanel","sidebar","iconSidebarWidget","tab","createTabFunction","inactive","hint","tabDiv","setPane","createTab","_activeTabId","addModule","css","_translationsHash","addtext"],"mappings":"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","file":"RouteVwrPlugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/entry.js\");\n","const Request = require('../Request');\r\n\r\n//////////////////////////\r\n\r\nconst _defaultViconColor = '#999',\r\n    _getUnderWayIcon = function (cog, sog, type_color, group_style) {\r\n        return `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"21\" height=\"21\" viewBox=\"0 0 21 21\" style=\"transform:rotate(${ (!cog ? 0 : cog)}deg)\"><title>sog: ${sog}${_gtxt('RouteVwr.kn')} cog: ${cog}°</title><path style=\"fill:${ type_color};\" d=\"M13.8,20.07a1,1,0,0,1-.69-0.28l-1.79-1.72a0.72,0.72,0,0,0-1,0L8.52,19.79a1,1,0,0,1-.69.28,1,1,0,0,1-1-1V8.65c0-1.52,1.55-7.59,4-7.59s4,6.07,4,7.59V19a1,1,0,0,1-1,1h0Z\"/><path style=\"fill:${ group_style};\" d=\"M10.82,1.57c1.93,0,3.5,5.57,3.5,7.09V19a0.52,0.52,0,0,1-.51.53,0.49,0.49,0,0,1-.34-0.14l-1.79-1.72a1.22,1.22,0,0,0-1.71,0L8.17,19.42a0.49,0.49,0,0,1-.34.14A0.52,0.52,0,0,1,7.32,19V8.65c0-1.51,1.57-7.09,3.5-7.09h0m0-1c-3,0-4.5,6.72-4.5,8.09V19a1.52,1.52,0,0,0,1.51,1.53,1.49,1.49,0,0,0,1-.42l1.79-1.72a0.22,0.22,0,0,1,.32,0l1.79,1.72a1.49,1.49,0,0,0,1,.42A1.52,1.52,0,0,0,15.32,19V8.65c0-1.37-1.51-8.09-4.5-8.09h0Z\"/><ellipse style=\"fill:#fff;\" cx=\"10.82\" cy=\"10.54\" rx=\"1.31\" ry=\"1.35\"/><path style=\"fill:#fff;\" d=\"M10.73,3.34h0.12a0.35,0.35,0,0,1,.35.35v6.85a0,0,0,0,1,0,0H10.38a0,0,0,0,1,0,0V3.69A0.35,0.35,0,0,1,10.73,3.34Z\"/></svg>`;\r\n    },\r\n    _getAtAnchorIcon = function (cog, sog, type_color, group_style) {\r\n        return `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"21\" height=\"21\" viewBox=\"0 0 21 21\" style=\"transform:rotate(${ (!cog ? 0 : cog)}deg)\"><title>sog: ${sog}${_gtxt('RouteVwr.kn')} cog: ${cog}°</title><rect style=\"fill:${ type_color};stroke:${ group_style};stroke-miterlimit:10;\" x=\"5.9\" y=\"5.6\" width=\"9.19\" height=\"9.19\" rx=\"2\" ry=\"2\" transform=\"translate(-4.13 10.41) rotate(-45)\"/><circle style=\"fill:#fff;\" cx=\"10.5\" cy=\"10.19\" r=\"1.5\"/></svg>`;\r\n    },\r\n\r\n    _vicons = [], _viconsDict = {},\r\n    _styleLayer = '-EE5587AF1F70433AA878462272C0274C',\r\n    _getVicons = function () {\r\n        if (!_styleLayer || !nsGmx.gmxMap.layersByID[_styleLayer])\r\n            return;\r\n        nsGmx.gmxMap.layersByID[_styleLayer]._gmx.properties.gmxStyles.styles.forEach(s => {\r\n        let icon = {\r\n            \"filter\": s.Filter, \r\n            \"url\": s.RenderStyle.iconUrl.replace(/^https?:/, \"\")\r\n                .replace(/^\\/\\/kosmosnimki.ru/, \"//www.kosmosnimki.ru\"), \"name\": s.Name\r\n        };\r\n        _vicons.push(icon);\r\n        _viconsDict[icon.filter] = icon;\r\n    });\r\n// console.log(_icons);\r\n// console.log(_iconsDict);\r\n},\r\n_getViconSvgPromise = function (ic) {\r\n    return new Promise(resolve => {\r\n        let httpRequest = new XMLHttpRequest();\r\n        httpRequest.onreadystatechange = function () {\r\n            if (httpRequest.readyState === 4) {\r\n                ic[\"svg\"] = httpRequest.responseText;\r\n                let a = /\\.cls-1{fill:(#[^};]+)/.exec(ic.svg);\r\n                ic.color = _defaultViconColor;\r\n                if (a && a.length)\r\n                    ic.color = a[1];\r\n                resolve();\r\n            }\r\n        }\r\n        httpRequest.open(\"GET\", document.location.protocol + ic.url.replace(/^https?:/, \"\"));\r\n        httpRequest.send();\r\n    })\r\n},\r\n_getVicon = function(vessel_type, cog, sog){ \r\n    for(let f in _viconsDict){\r\n        let re1 = new RegExp(\"'\"+vessel_type+\"'\"),\r\n        re2 = new RegExp(sog != 0 ? \">0\" : \"=0\");\r\n//console.log(vessel_type+\" \"+sog+\" \"+f+\" \"+f.search(re1)+\" \"+f.search(re2))\r\n        if(f.search(re1)!=-1 && f.search(re2)!=-1){\r\n            return {color: _viconsDict[f].color, svg:(sog != 0 ? _getUnderWayIcon(cog, sog, _viconsDict[f].color, '#fff') : _getAtAnchorIcon(cog, sog, _viconsDict[f].color, '#fff'))};\r\n        }\r\n    }\r\n    return {color: '#f00', svg:(sog != 0 ? _getUnderWayIcon(cog, sog, _defaultViconColor, '#fff') : _getAtAnchorIcon(cog, sog, _defaultViconColor, sog, '#fff'))};\r\n};\r\nlet _loadViconPromise;\r\n\r\n//////////////////////////\r\n\r\nmodule.exports = function (options) {\r\n\r\n    const _lmap = nsGmx.leafletMap,\r\n        _tracks = [], _vmarkers = [];\r\n       \r\n    _getVicons();\r\n    _loadViconPromise = Promise.all(_vicons.map(_getViconSvgPromise));\r\n\r\n    const _data = {routes:[], msg:[]};        \r\n    const _layerName = options.layer;\r\n\r\n    return {\r\n        isDirty: false,\r\n        get data() { return _data },\r\n        set data(value) { _data = value; },\r\n        update: function () {\r\n            if (!this.isDirty)\r\n                return;\r\n//console.log(this.view.vessel)\r\n            this.view.inProgress(true)\r\n            Request.fetchRequest(\r\n                '/VectorLayer/Search.ashx',\r\n                'layer=910325DE5E544C6A87F1CFB3DE13BCF5&orderby=calc_etd&orderdirection=desc&query=\"vessel_mmsi\"=' + this.view.vessel.mmsi,\r\n                'POST'\r\n            )\r\n                .then(r => r.json())\r\n                .then((r => {\r\n//console.log(r)\r\n                    if (r.Status && r.Status.toLowerCase() == 'ok' && r.Result) {\r\n                        _selectVessel = r.Result.values.map(v => { return { mmsi: v[0], name: v[1] } });\r\n                        this.data.routes = [];\r\n                        let routes = this.data.routes;\r\n                        r.Result.values.forEach(v => {\r\n                            let route = {};\r\n                            r.Result.fields.forEach((f, i) => {\r\n                                route[f] = v[i];\r\n                            })\r\n                            routes.push(route);\r\n                        });\r\n                    }\r\n                    else {\r\n                        this.data.msg = 'hello';\r\n                        console.log(r);\r\n                    }\r\nconsole.log(this.data)\r\n\r\n                    this.view.inProgress(false)\r\n                    this.view.repaint();\r\n                    this.isDirty = false;\r\n                }).bind(this)); \r\n\r\n\r\n        }\r\n\r\n    };\r\n}\r\n/*\r\nmodule.exports = function (options) {\r\n\r\n    const _lmap = nsGmx.leafletMap,\r\n        _tracks = [], _vmarkers = [];\r\n       \r\n    _getVicons();\r\n    _loadViconPromise = Promise.all(_vicons.map(_getViconSvgPromise));\r\n\r\n    const _data = {tracks:[], msg:[]};        \r\n    const _layerName = options.layer;\r\n\r\n    return {\r\n        isDirty: false,\r\n        get data() { return _data },\r\n        set data(value) { _data = value; },\r\n        free: function(){\r\n            _data.total = null;\r\n            _data.tracks.length = 0;\r\n            _data.msg.length = 0;\r\n            _tracks.forEach(t=>{\r\n                _lmap.removeLayer(t);\r\n            });\r\n            _tracks.length = 0;\r\n            _vmarkers.length = 0; \r\n        },\r\n        fitToTrack: function(i){\r\n            _lmap.fitBounds(_tracks[i].getBounds());\r\n        },\r\n        drawTrack: function(i){\r\n            _tracks[i].addTo(_lmap);         \r\n        },\r\n        eraseTrack: function(i){\r\n            _lmap.removeLayer(_tracks[i]);         \r\n        },\r\n        update: function () {\r\n\r\n            if (!this.isDirty)\r\n                return;\r\n\r\n            const thisModel = this;\r\n            return Promise.resolve().then(()=>{\r\n                    thisModel.free();                       \r\n                    return Request.searchRequest({\r\n                        layer: thisModel.view.trackLayer.id,\r\n                        orderdirection: 'desc',\r\n                        orderby: thisModel.view.trackLayer.sort,\r\n                        columns: thisModel.view.trackLayer.columns,\r\n                        query: thisModel.view.trackLayer.query\r\n                    }, 'POST').then(r=>{\r\n                        return _loadViconPromise.then(()=>{\r\n//console.log(r)\r\n                        if (!r.values.length){\r\n                            _data.msg = [{txt:_gtxt('RouteVwr.nodata')}];\r\n                        }\r\n                        else{\r\n                            _data.total = r.values.length;\r\n                            r.values.forEach(p=>{\r\n                                let data = thisModel.view.trackLayer.parseData(r.fields, p, _getVicon),\r\n                                    lastTrack = _data.tracks[_data.tracks.length-1];\r\n                                if (!lastTrack || lastTrack.positions[0].utc_date!=data.utc_date){\r\n                                    lastTrack = { utc_date: data.utc_date, positions: [] };\r\n                                    _data.tracks.push(lastTrack);\r\n                                }\r\n                                lastTrack.positions.push(data);\r\n                            });\r\n                        }\r\n                        });\r\n                    });\r\n            }).then(()=>{    \r\n                \r\n                // draw track on map\r\n                thisModel.view.repaint();\r\n                if (_data.tracks.length){\r\n                    let lastPos, wholeDistance = 0;\r\n                    _data.tracks.forEach(t=>{\r\n                        t.distance = 0;\r\n                        let temp, latlngs = t.positions.map(p=>{\r\n                            if (temp)\r\n                                t.distance = t.distance + _lmap.distance(temp, [p.latitude, p.longitude]);\r\n                            temp = [p.latitude, p.longitude];\r\n                            return temp;\r\n                        });\r\n                        if (lastPos){\r\n                            t.distance = t.distance + _lmap.distance(lastPos, latlngs[0]);\r\n                            latlngs = [lastPos].concat(latlngs);\r\n                        }\r\n                        lastPos = temp;  \r\n                        let line = L.polyline(latlngs, {color: t.positions[0] && t.positions[0].vicon ? t.positions[0].vicon.color : 'red'}).addTo(_lmap); \r\n                        line.bindPopup(`<b>${thisModel.view.vname}</b><br>${t.utc_date}<br>${(t.distance/1000).toFixed(3)} ${_gtxt('RouteVwr.km')}`);                    \r\n                        _tracks.push(line);\r\n                        \r\n                        wholeDistance = wholeDistance + t.distance;\r\n                    });\r\n                    \r\n                    _lmap.fitBounds(_tracks[0].getBounds());\r\n                }\r\n  \r\n                thisModel.isDirty = false;\r\n            });\r\n\r\n        } // this.update\r\n    };\r\n}\r\n*/","// let PRODUCTION = false;\r\n// if (has('PRODUCTION'))\r\n//     PRODUCTION = true;\r\n\r\n\r\nmodule.exports = function (viewFactory) {\r\n    let _isReady = false,\r\n        _activeView,\r\n        _canvas = _div(null),\r\n        _views = viewFactory.create(),\r\n        _create = function () {\r\n            $(this.sidebarPane).append(_canvas);\r\n            $(_canvas).append(_views.map(v => v.frame));\r\n            _views[0].resize(true);\r\n            _views[0].show();\r\n            _activeView = _views[0];\r\n            _isReady = true;\r\n        };\r\n    const _returnInstance = {\r\n        show: function () {          \r\n            if (!_isReady)\r\n            {\r\n                _create.call(this);\r\n            }\r\n            else{       \r\n                _activeView && _activeView.show();\r\n            }\r\n        }\r\n    }\r\n    return _returnInstance;\r\n    /*\r\n    let _leftMenuBlock,\r\n        _canvas = _div(null),\r\n        _activeView,\r\n        _views = viewFactory.create(),\r\n        // _aisSearchView,\r\n        // _myFleetMembersView,\r\n        // _historyView,\r\n        //_gifLoader = '<img src=\"img/progress.gif\">',\r\n        _isReady = false,\r\n        _createTabs = function () {\r\n            let tabsTemplate = '<table class=\"ais_tabs\" border=0><tr>' +\r\n                '<td class=\"ais_tab dbsearch_tab unselectable\" unselectable=\"on\">' +\r\n                '<div>{{i \"AISSearch2.DbSearchTab\"}}</div>' +\r\n                '</td><td class=\"ais_tab scrsearch_tab unselectable\" unselectable=\"on\">' +\r\n                '<div>{{i \"AISSearch2.ScreenSearchTab\"}}</div>' +\r\n                '</td><td class=\"ais_tab myfleet_tab unselectable\" unselectable=\"on\">' + // ACTIVE\r\n                '<div>{{i \"AISSearch2.MyFleetTab\"}}</div>' +\r\n                '</td></tr></table>'\r\n\r\n            if (NOSIDEBAR)\r\n                $(_leftMenuBlock.workCanvas).append(_canvas);\r\n            else\r\n                $(this.sidebarPane).append(_canvas);\r\n\r\n            $(_canvas).append(Handlebars.compile(tabsTemplate));\r\n            $(_canvas).append(_views.map(v => v.frame));\r\n    \r\n            let tabs = $('.ais_tab', _canvas),\r\n                _this = this;           \r\n            _views.forEach((v,i) =>{\r\n                v.tab = tabs.eq(i);\r\n                v.resize(true);\r\n            }); \r\n            tabs.on('click', function () {\r\n                if (!$(this).is('.active')) {\r\n                    let target = this;\r\n                    tabs.each(function (i, tab) {\r\n                        if (!$(tab).is('.active') && target == tab) {\r\n                            $(tab).addClass('active');\r\n                            _views[i].show();\r\n                            _activeView = _views[i];\r\n                        }\r\n                        else {\r\n                            $(tab).removeClass('active');\r\n                            _views[i].hide();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            // Show the first tab\r\n            tabs.eq(0).removeClass('active').click();\r\n\r\n            if (NOSIDEBAR) {\r\n                _returnInstance.hide = function () {\r\n                    $(_leftMenuBlock.parentWorkCanvas).hide();\r\n                    nsGmx.leafletMap.removeLayer(highlight);\r\n                }\r\n\r\n                $(_leftMenuBlock.parentWorkCanvas)\r\n                    .attr('class', 'left_aispanel')\r\n                    .insertAfter('.layers-before');\r\n                var blockItem = _leftMenuBlock.leftPanelItem,\r\n                    blockTitle = $('.leftmenu-path', blockItem.panelCanvas);\r\n                var toggleTitle = function () {\r\n                    if (blockItem.isCollapsed())\r\n                        blockTitle.show();\r\n                    else\r\n                        blockTitle.hide();\r\n                }\r\n                $(blockItem).on('changeVisibility', toggleTitle);\r\n                toggleTitle();\r\n            }\r\n\r\n            // All has been done at first time\r\n            _isReady = true;\r\n        },\r\n\r\n    _returnInstance = {\r\n        show: function () {\r\n            let lmap = nsGmx.leafletMap;\r\n            if (NOSIDEBAR && !_leftMenuBlock)\r\n                _leftMenuBlock = new leftMenu();\r\n\r\n            if ((NOSIDEBAR && (!_leftMenuBlock.createWorkCanvas(\"aispanel\",\r\n                function () { lmap.gmxControlIconManager.get(this.menuId)._iconClick() },\r\n                { path: [_gtxt('AISSearch2.caption')] })\r\n            )) || (!_isReady)) // SIDEBAR\r\n            {\r\n                _createTabs.call(this);\r\n            }\r\n            else{\r\n                if (NOSIDEBAR){\r\n                    $(_leftMenuBlock.parentWorkCanvas)\r\n                    .insertAfter('.layers-before');\r\n                }            \r\n                _activeView && _activeView.show();\r\n            }\r\n        }\r\n    };\r\n    return _returnInstance;\r\n    */\r\n}\r\n\r\n","const _serverBase = window.serverBase.replace(/^https?:/, document.location.protocol),\r\n    _fetchRequest = function(url, request, method){\r\n        if (url[0]=='/')\r\n            url = _serverBase + url.replace(/^\\//, '');\r\n        if (method=='POST')\r\n            return fetch(url, {                \r\n                headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n                method: 'POST', // *GET, POST, PUT, DELETE, etc.\r\n                mode: 'cors', // no-cors, cors, *same-origin);\r\n                body: encodeURI(request)\r\n            });\r\n    },\r\n    _sendRequest = function(url, request, method){\r\n        return new Promise((resolve, reject) => {\r\n            const callback = response => {\r\n                if (!response.Status || response.Status.toLowerCase() != 'ok' || !response.Result) {\r\n                    reject(response);\r\n                }\r\n                else\r\n                    resolve(response.Result);\r\n            };\r\n            if (url[0]=='/')\r\n                url = _serverBase + url.replace(/^\\//, '');\r\n            if (!method || method == 'GET')\r\n                window.sendCrossDomainJSONRequest(url + `?${_getQueryString(request)}`, callback);\r\n            if (method == 'POST'){\r\n                request.WrapStyle='message';\r\n                window.sendCrossDomainPostRequest(url, request, callback);\r\n            }\r\n        });\r\n    },\r\n    _getQueryString = function(params){\r\n        let qs = '';\r\n        for (let p in params) {\r\n            if (qs != '')\r\n            qs += '&';\r\n        qs += p + '=' + (typeof params[p]=='object' ? JSON.stringify(params[p]) : params[p]);\r\n        }\r\n        return qs;\r\n    }\r\n    _searchRequest = function(params, method){\r\n        return _sendRequest(`${_serverBase}VectorLayer/Search.ashx`, params, method);\r\n    },\r\n    _modifyRequest = function(params){\r\n        const url = `${_serverBase}VectorLayer/ModifyVectorObjects.ashx?${_getQueryString(params)}`;\r\n        return _sendRequest(url);\r\n    },\r\n    _checkVersion = function(layer, ms){\r\n        setTimeout(()=>{\r\n            L.gmx.layersVersion.chkVersion(layer);\r\n//console.log('ChV')                   \r\n            setTimeout(()=>{\r\n                L.gmx.layersVersion.chkVersion(layer);\r\n//console.log('ChV')                   \r\n                setTimeout(()=>{\r\n                    L.gmx.layersVersion.chkVersion(layer); \r\n//console.log('ChV')                   \r\n                }, ms);\r\n            }, ms);                                            \r\n        }, ms);\r\n    };\r\nmodule.exports = {\r\n    fetchRequest: _fetchRequest,\r\n    sendRequest: _sendRequest,\r\n    searchRequest : _searchRequest, \r\n    modifyRequest: _modifyRequest,\r\n    checkVersion: _checkVersion\r\n};","// extracted by mini-css-extract-plugin","module.exports = function(container, options, active, callback){\r\n    let _isOptionsDisplayed = false,\r\n    _select = document.createElement('div'),\r\n    _optionsList = document.createElement('div'),\r\n    _selected = active; \r\n\r\n    _select.className = 'select-control';\r\n    _select.innerHTML = `<span class=\"select-active\">${options[active]}</span><span class=\"icon-down-open\"></span>`;\r\n    _optionsList.className = 'select-list';\r\n    _optionsList.innerHTML = options.map((o, i)=>`<div class=\"select-options\" id=\"${i}\">${o}</div>`).join('');\r\n    \r\n    container.append(_select);\r\n    document.body.append(_optionsList);\r\n\r\n    const _arrow = _select.querySelector('.icon-down-open'),\r\n    _options = _optionsList.querySelectorAll('.select-options'),\r\n    _hideOptions = function(){\r\n            _optionsList.style.display = 'none';\r\n            _optionsList.querySelectorAll('.select-options')[_selected].classList.remove('selected');\r\n            _arrow.classList.remove('icon-up-open');\r\n            _arrow.classList.add('icon-down-open');\r\n            _isOptionsDisplayed = false;\r\n    };\r\n\r\n    let _setOptionsRect = function(){\r\n        let selectedRc = _select.getBoundingClientRect(),\r\n            bw = parseInt(getComputedStyle(_optionsList).borderWidth);\r\n        if (isNaN(bw)) bw = 0;\r\n        _optionsList.style.width = selectedRc.width - 2 * bw + \"px\";\r\n        _optionsList.style.top = selectedRc.bottom - 3 + \"px\";\r\n        _optionsList.style.left = selectedRc.left + \"px\";  \r\n    }  \r\n\r\n    for (let i=0; i<_options.length; ++i)\r\n        _options[i].addEventListener('click', e=>{\r\n            _hideOptions();\r\n            _selected = parseInt(e.srcElement.id);  \r\n            _select.querySelector('.select-active').innerHTML = options[_selected];          \r\n            callback(_selected);\r\n        });\r\n\r\n    _optionsList.addEventListener('mouseleave', e=>{\r\n        _hideOptions();\r\n    });\r\n    _select.addEventListener('click', e=>{\r\n//console.log(_isOptionsDisplayed)\r\n        if (_isOptionsDisplayed){\r\n            _hideOptions();\r\n        }\r\n        else{\r\n            _setOptionsRect();\r\n            _optionsList.style.display = 'block';\r\n            _optionsList.querySelectorAll('.select-options')[_selected].classList.add('selected');\r\n            _arrow.classList.remove('icon-down-open');\r\n            _arrow.classList.add('icon-up-open');\r\n            _isOptionsDisplayed = true;\r\n        }\r\n    });\r\n\r\n    return {dropDownList: _optionsList};\r\n\r\n}","let _clean = function(){  \r\n    let scrollCont = this.container.find('.mCSB_container')\r\n    if (scrollCont[0]){\r\n        scrollCont.empty();\r\n    }\r\n    else{\r\n        this.container.empty();\r\n    }\r\n};\r\n\r\nconst BaseView = function (model) {\r\n    model.view = this;\r\n    this.model = model;\r\n    this.gifLoader = '<img src=\"img/progress.gif\">';\r\n};\r\n\r\nBaseView.prototype = function () {\r\n    return {\r\n        get isActive(){\r\n            return this.frame.is(\":visible\");\r\n        },\r\n        resize: function (clean) {\r\n            if(!this.frame)\r\n                return;\r\n\r\n//console.log($('.iconSidebarControl-pane').height(), this.topOffset, this.bottomOffset)\r\n            let h = $('.iconSidebarControl-pane').height() - this.topOffset - this.bottomOffset;\r\n            // if (this.startScreen){\r\n            //     this.startScreen.height(h);\r\n            //     this.container.css({ position:\"relative\", top: -h+\"px\" });\r\n            // }\r\n            this.container.height(h);\r\n\r\n            if (clean){\r\n                this.container.empty()\r\n            }\r\n        },\r\n        repaint: function(){\r\n            _clean.call(this); \r\n            \r\n            this.inProgress(false);\r\n\r\n            if (!this.model.data)\r\n                return;\r\n\r\n            let scrollCont = this.container.find('.mCSB_container'),\r\n            content = $(\r\n                //Handlebars.compile(this.tableTemplate)(this.model.data)\r\n                this.tableTemplate\r\n            ); \r\n\r\n            if (!scrollCont[0]) {\r\n                this.container.append(content).mCustomScrollbar(this.mcsbOptions);\r\n            }\r\n            else {\r\n                $(scrollCont).append(content);\r\n            }\r\n\r\n        },\r\n        show: function () {\r\n            if (!this.frame)\r\n                return;\r\n            this.frame.show();\r\n            this.model.update();\r\n        },\r\n        hide: function () {\r\n            this.frame.hide();\r\n        },\r\n        get isVisible(){\r\n            const rc = this.frame[0].getBoundingClientRect();\r\n            return rc.width!=0 && rc.height!=0;\r\n        }\r\n    }\r\n}();\r\n\r\nmodule.exports = BaseView;","// extracted by mini-css-extract-plugin","require(\"./RouteView.css\");\r\nrequire(\"../SelectControl.css\");\r\nconst BaseView = require('./BaseView.js'),\r\n      Request = require('../Request'),\r\n      SelectControl = require('../SelectControl');\r\n\r\nconst _toDd = function (D, isLng) {\r\n    let dir = D < 0 ? isLng ? 'W' : 'S' : isLng ? 'E' : 'N',\r\n        deg = Math.round((D < 0 ? D = -D : D) * 1000000) / 1000000\r\n    return deg.toFixed(2) + \" \"//\"°\"\r\n        + dir\r\n};\r\n\r\nconst _searchLayer = 'EE5587AF1F70433AA878462272C0274C';\r\n\r\nlet _thisView, _layer, _selectVessel;\r\n\r\nconst RouteView = function ({ model, layer }) {\r\n    _thisView = this;\r\n        BaseView.call(this, model);\r\n\r\n        this.frame = $(Handlebars.compile(`<div class=\"routevwr-view\">\r\n            <div class=\"header\">\r\n                <table border=0 class=\"instruments unselectable\">\r\n                    <tr>\r\n                        <td class=\"select_container\"></td>\r\n                    </tr>\r\n                </table> \r\n\r\n \r\n            </div> \r\n            <div class=\"refresh\" style=\"display: none; padding-top: 100%;padding-left: 50%;\"><img src=\"img/progress.gif\"></div>\r\n            <div class=\"grid\"></div>\r\n            <div class=\"footer unselectable\">\r\n       \r\n            </div>\r\n            </div>`\r\n        )());\r\n\r\n        this.container = this.frame.find('.grid');\r\n        this.footer = this.frame.find('.footer');  \r\n        \r\n        Request.fetchRequest(\r\n            '/VectorLayer/Search.ashx',\r\n            'layer=910325DE5E544C6A87F1CFB3DE13BCF5&orderby=vessel_name&columns=[{\"Value\":\"vessel_mmsi\"},{\"Value\":\"vessel_name\"}]&groupby=[{\"Value\":\"vessel_mmsi\"},{\"Value\":\"vessel_name\"}]',\r\n            'POST'\r\n        )\r\n        .then(r=>r.json())\r\n        .then((r=>{\r\n//console.log(r)\r\n            if (r.Status && r.Status.toLowerCase()=='ok' && r.Result){\r\n                _selectVessel = r.Result.values.map(v => {return{ mmsi: v[0], name: v[1] }});\r\n                this.vessel = _selectVessel[0];\r\n                this.selectVessel = new SelectControl(this.frame.find('.select_container')[0], _selectVessel.map(l => l.name), 0, selected => { _thisView.trackLayer = _selectVessel[selected] }); \r\n                this.selectVessel.dropDownList.classList.add('routevwr-view'); \r\n                this.model.isDirty = true;\r\n                //this.model.update();            \r\n            } \r\n            else    \r\n                console.log(r);   \r\n        }).bind(this)); \r\n   \r\n        Object.defineProperty(this, \"tableTemplate\", {\r\n            get: function () {\r\n                let rv = this.model.data.routes.map((t,i) => {\r\n                        return `<table class=\"route-table\" border=\"0\">\r\n                        <tbody><tr>\r\n                        <td><span>${t.vessel_mmsi}</span></td> \r\n                        <td><span>${t.vessel_name}</span></td>                      \r\n                        <td><span class=\"date\">${t.calc_etd}</span></td>\r\n                        <td><span class=\"date\">${t.calc_eta}</span></td>\r\n                        </tr></tbody></table>`\r\n                    }).join('') +\r\n                    (this.model.data.msg ? this.model.data.msg.map(m => `<div class=\"msg\">${m.txt}</div>`).join('') : '');               \r\n                return rv;\r\n            }\r\n        });  \r\n\r\n        Object.defineProperty(this, \"topOffset\", {\r\n            get: function () { \r\n                return this.frame.find('.header')[0].getBoundingClientRect().height;\r\n            }\r\n        });  \r\n        Object.defineProperty(this, \"bottomOffset\", {\r\n            get: function () {             \r\n                return this.frame.find('.footer')[0].getBoundingClientRect().height;\r\n            }\r\n        }); \r\n    }, \r\n    _renderPosTable = function(i){\r\n        let t = _thisView.model.data.routes[i];\r\n            return `<table class=\"positions-table\"><tbody>` +\r\n            t.positions.map((p,j) => { return `<tr>                \r\n            <td><span class=\"utc_time\">${p.utc_time}</span><span class=\"local_time\">${p.local_time}</span></td>\r\n            <td><span class=\"utc_date\">${t.utc_date}</span><span class=\"local_date\">${p.local_date}</span></td>\r\n            <td>${p.lon}&nbsp;&nbsp;${p.lat}</td>\r\n            <td>${p.vicon ? p.vicon.svg : ''}</td><td></td>\r\n            <td><div class=\"show_pos\" id=\"${i}_${j}\" title=\"${_gtxt('RouteVwr.position')}\"><img src=\"plugins/AIS/AISSearch/svg/center.svg\"></div></td>\r\n            </tr>\r\n            <tr><td colspan=\"6\" class=\"more\"><hr><div class=\"vi_more\"></div></td></tr>`;}).join('') + \r\n            `</tbody></table>`;\r\n    },\r\n    _clean = function () {\r\n        this.frame.find('.open_positions').off('click', _onOpenPosClick);\r\n        this.frame.find('.track-table .track:not(\".all\") input').off('click', _onShowTrack),\r\n        this.frame.find('.track-table .track.all input').off('click', _onShowAllTracks),\r\n        this.frame.find('.show_pos').off('click', _onShowPos);\r\n        this.frame.find('.track-table .export').off('click', _onExport);\r\n    };\r\n\r\nRouteView.prototype = Object.create(BaseView.prototype);\r\n\r\nRouteView.prototype.inProgress = function (state) {\r\n    let progress = this.frame.find('div.refresh'), grid = this.frame.find('div.grid');\r\n    if (state){\r\n        grid.hide();\r\n        progress.show();\r\n    }\r\n    else{\r\n        progress.hide();\r\n        grid.show();\r\n    }\r\n};\r\n\r\n// RouteView.prototype.resize = function () { \r\n//     let h = $('.iconSidebarControl-pane').height() - this.frame.find('.instruments').outerHeight()\r\n//     - this.frame.find('.results').outerHeight() - this.frame.find('.menu').outerHeight();\r\n//     this.container.height(h+1);\r\n// };\r\n\r\nconst _onOpenPosClick = function(e){\r\n        let icon = $(e.target), id;\r\n        for (var i=0; e.target.classList[i]; ++i){\r\n            if (e.target.classList[i].search(/track_/)!=-1){\r\n                id = e.target.classList[i];\r\n                break;\r\n            }\r\n        }\r\n        if (icon.is('.icon-down-open')) {\r\n            icon.removeClass('icon-down-open').addClass('.icon-right-open');\r\n            if(id){\r\n                let div = $(`.${id}:not(.open_positions)`);\r\n                div.hide();\r\n                if (id!='track_0'){\r\n                    div.find('.show_pos').off('click', _onShowPos);\r\n                    div.html('');\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            icon.addClass('icon-down-open').removeClass('.icon-right-open');\r\n            if (id){\r\n                let div = $(`.${id}:not(.open_positions)`);\r\n                if (!$(`.${id} .positions-table`)[0]){\r\n                    div.html(_renderPosTable(parseInt(id.split('_')[1])));\r\n                    div.find('.show_pos').on('click', _onShowPos);\r\n                }\r\n                div.show(); \r\n            }                \r\n        }\r\n    }, \r\n    _onShowAllTracks = function(e){\r\n        let showTrack = _thisView.frame.find('.track-table .track:not(\".all\") input'),\r\n            showAllTracks = _thisView.frame.find('.track-table .track.all input'); \r\n        showTrack.each((i, el)=>{\r\n            el.checked = showAllTracks[0].checked;\r\n            if (showAllTracks[0].checked)\r\n                _thisView.model.drawTrack(el.id);\r\n            else\r\n                _thisView.model.eraseTrack(el.id);\r\n        });\r\n    },\r\n    _onShowTrack = function(e){\r\n        let showTrack = _thisView.frame.find('.track-table .track:not(\".all\") input'),\r\n            showAllTracks = _thisView.frame.find('.track-table .track.all input'); \r\n        let id = parseInt(e.currentTarget.id);\r\n        if (e.currentTarget.checked)\r\n            _thisView.model.drawTrack(id);\r\n        else\r\n            _thisView.model.eraseTrack(id);\r\n\r\n        let checkAll = true;\r\n        showTrack.each((i, el)=>{checkAll = checkAll && el.checked});\r\n        showAllTracks[0].checked = checkAll;\r\n    },\r\n    _onShowPos = function(e){\r\n        let ij = e.currentTarget.id.split('_'), pos = _thisView.model.data.routes[ij[0]].positions[ij[1]];\r\n        //_thisView.model.fitToTrack(ij[0]);\r\n        nsGmx.leafletMap.setView([pos.latitude, pos.longitude]);\r\n    },\r\n    _onExport = function(e){\r\n        let type = e.currentTarget.className.replace(/export */, ''),\r\n        tracks = _thisView.model.data.routes,\r\n        trackLine = tracks.reduce((p,c)=>{\r\n            c.positions.forEach(pos=>p.push([pos.longitude, pos.latitude])); \r\n            return p;\r\n        }, []),\r\n        features = [{geometry:L.gmxUtil.geometryToGeoJSON({type:'LINESTRING', coordinates:trackLine})}];\r\n        let getFilename = function(){\r\n            let spart = tracks[0].utc_date, //`${s.getFullYear()}_${s.getMonth()+1}_${s.getDate()}`,\r\n            epart = tracks.length>1 ? '_' +  tracks[tracks.length-1].utc_date: ''; //tracks.length>1 ? `_${e.getFullYear()}_${e.getMonth()+1}_${e.getDate()}` : '';\r\n            return `${_thisView.vname}_${spart}${epart}`.replace(/[!\\?\\:<>\"'#]/g, '').replace(/[ \\.\\/\\\\-]/g, '_');\r\n        }\r\n        nsGmx.Utils.downloadGeometry(features, {fileName: getFilename(), format: type}); \r\n//console.log(features, {fileName: `${_thisView.vname}_${tracks[0].utc_date}${tracks.length>1?'_' + tracks[tracks.length-1].utc_date:''}`.replace(/ |\\./g, '_'), format: type,});\r\n    };\r\n\r\nRouteView.prototype.repaint = function () { \r\n    _clean.call(this);\r\n    BaseView.prototype.repaint.call(this);      \r\n    \r\n    // this.frame.find('.open_positions').on('click', _onOpenPosClick);\r\n    // this.frame.find('.track-table .track:not(\".all\") input').on('click', _onShowTrack);\r\n    // this.frame.find('.track-table .track.all input').on('click', _onShowAllTracks);\r\n    // this.frame.find('.track-table .export').on('click', _onExport);\r\n\r\n    // this.frame.find('.track_0 .positions-table .show_pos').on('click', _onShowPos);\r\n};\r\n\r\nRouteView.prototype.show = function () {\r\n    if (!this.frame)\r\n        return;\r\n    BaseView.prototype.show.apply(this, arguments);\r\n};\r\n\r\nmodule.exports = RouteView;\r\n","const MyCollectionView = require('./Views/RouteView'),\r\n      MyCollectionModel = require('./Models/RouteModel');\r\nmodule.exports = function (options) {   \r\n    const _mcm = new MyCollectionModel({layer: options.layer}),\r\n          _mcv = new MyCollectionView({model:_mcm, layer: options.layer}); \r\n    return {\r\n        create: function () {\r\n            return [_mcv];\r\n        }\r\n    };\r\n}","// extracted by mini-css-extract-plugin","require(\"./all.css\");\r\nrequire(\"./locale.js\");\r\n\r\nconst pluginName = 'RouteVwrPlugin',\r\n      menuId = 'RouteVwrPlugin',\r\n      toolbarIconId = null, \r\n      cssTable = 'RouteVwrPlugin',\r\n      modulePath = gmxCore.getModulePath(pluginName);\r\n\r\nconst PluginPanel = require('./PluginPanel.js'),\r\n      ViewsFactory = require('./ViewsFactory');\r\n\r\nconst publicInterface = {\r\n    pluginName: pluginName,\r\n    afterViewer: function (params, map) {\r\n        const options = {\r\n                modulePath: modulePath,\r\n                layer: params.layer\r\n            },\r\n            viewFactory = new ViewsFactory(options),\r\n            pluginPanel = new PluginPanel(viewFactory);\r\n        pluginPanel.menuId = menuId;\r\n\r\n        let sidebar = window.iconSidebarWidget,\r\n        tab = window.createTabFunction({\r\n                    icon: \"RouteVwr\", //menuId,\r\n                    active: \"hardnav-sidebar-icon\",\r\n                    inactive: \"hardnav-sidebar-icon\",\r\n                    hint: _gtxt('RouteVwr.title')\r\n                })()\r\n\r\n        let tabDiv = tab.querySelector('.RouteVwr');\r\n        pluginPanel.sidebarPane = sidebar.setPane(\r\n            menuId, {\r\n                createTab: ()=>{      \r\n                    !tab.querySelector('.RouteVwr') && tab.append(tabDiv);  \r\n                     tab.querySelector('.RouteVwr').innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1\" viewBox=\"0 0 24 24\" style=\"height: 18px;width: 18px;\">\r\n                     <path d=\"M 20 2 C 18.970152 2 18.141273 2.7807107 18.03125 3.78125 L 14.5625 4.78125 C 14.19654 4.3112749 13.641793 4 13 4 C 11.895431 4 11 4.8954305 11 6 C 11 7.1045695 11.895431 8 13 8 C 13.052792 8 13.104488 8.0040159 13.15625 8 L 16.53125 14.6875 C 16.440877 14.788724 16.349735 14.881869 16.28125 15 L 11.9375 14.46875 C 11.705723 13.620636 10.921625 13 10 13 C 8.8954305 13 8 13.895431 8 15 C 8 15.217462 8.0295736 15.428987 8.09375 15.625 L 4.96875 18.25 C 4.6825722 18.092012 4.3500149 18 4 18 C 2.8954305 18 2 18.895431 2 20 C 2 21.104569 2.8954305 22 4 22 C 5.1045695 22 6 21.104569 6 20 C 6 19.782538 5.9704264 19.571013 5.90625 19.375 L 9.03125 16.75 C 9.3174278 16.907988 9.6499851 17 10 17 C 10.754554 17 11.409413 16.585686 11.75 15.96875 L 16.0625 16.53125 C 16.294277 17.379364 17.078375 18 18 18 C 19.104569 18 20 17.104569 20 16 C 20 14.895431 19.104569 14 18 14 C 17.947208 14 17.895512 13.995984 17.84375 14 L 14.5 7.3125 C 14.761761 7.0130168 14.922918 6.6355416 14.96875 6.21875 L 18.4375 5.21875 C 18.80346 5.6887251 19.358207 6 20 6 C 21.104569 6 22 5.1045695 22 4 C 22 2.8954305 21.104569 2 20 2 z\" style=\"&#10;\"/>\r\n                 </svg>`;\r\n                    return tab;\r\n                }\r\n            }\r\n        )\r\n        sidebar.addEventListener('opened', function (e) {\r\n            if (sidebar._activeTabId == menuId)\r\n                pluginPanel.show();\r\n        });\r\n    }\r\n};\r\n\r\ngmxCore.addModule(pluginName, publicInterface, {\r\n    css: cssTable + '.css'\r\n});\r\n","\r\n    _translationsHash.addtext('rus', {\r\n        \"RouteVwr.title\": \"Маршруты\",\r\n\r\n        \"RouteVwr.calendar_today\": \"сегодня\",\r\n        \"RouteVwr.nodata\": \"Нет данных\",\r\n        \"RouteVwr.reload\": \"Загрузить/Обновить\",\r\n        \"RouteVwr.allDailyTracks\":\"все треки\",\r\n        \"RouteVwr.dailyTrack\":\"трек за сутки\",\r\n        \"RouteVwr.positions\":\"положение судна\",\r\n        \"RouteVwr.position\":\"показать\",\r\n        \"RouteVwr.export\":\"экспорт\",\r\n        \"RouteVwr.km\":\"км\",\r\n        \"RouteVwr.kn\":\"уз\",\r\n        \"RouteVwr.intervalExceeds\":\"Интервал больше 7 дней\",\r\n        \r\n    });\r\n    _translationsHash.addtext('eng', {\r\n        \"RouteVwr.title\": \"Routes\",\r\n\r\n        \"RouteVwr.calendar_today\": \"today\",\r\n        \"RouteVwr.nodata\": \"No data\",\r\n        \"RouteVwr.reload\": \"Load/Update\",\r\n        \"RouteVwr.allDailyTracks\":\"whole track\",\r\n        \"RouteVwr.dailyTrack\":\"daily track\",\r\n        \"RouteVwr.positions\":\"vessel positions\",\r\n        \"RouteVwr.position\":\"position\",\r\n        \"RouteVwr.export\":\"export\",\r\n        \"RouteVwr.km\":\"km\",\r\n        \"RouteVwr.kn\":\"kn\",\r\n        \"RouteVwr.intervalExceeds\":\"Interval exceeds 7 days\",\r\n    });\r\n"],"sourceRoot":""}