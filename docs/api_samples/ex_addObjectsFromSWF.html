<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<script src="../../api.js?key=E5FB6CCB5D23B5E119D2F1B26BCC57BD" charset="windows-1251"></script> 

<title>Каталог организаций на карте</title>
</head>

<body>
<select id="sel2"><option> - Выбрать -</option><option>RegionsRF83_UQ4</option><option>osm_poi</option><option>2011_Spot5_DII</option><option>villages</option><option>rayony</option></select><button id="button2">Загрузить</button> <span id="cmdHash" class="bodytext"></span>

<div id="map" style="width: 100%; height: 600px;"></div>
<script>

	createFlashMap(document.getElementById("map"), "maps.kosmosnimki.ru", "7VKHM", function(map)
        {

				var markers = map.addObject();
				markers.setStyle({ outline: { color: 0xff0000, thickness: 3, opacity: 100 } });
				var debObj = document.getElementById("cmdHash");

			document.getElementById("button2").onclick = function()
			{
/*
				if(markers) {
					markers.remove();
				}
				markers = map.addObject();
				markers.setStyle({ outline: { color: 0xff0000, thickness: 3, opacity: 100 } });
*/			
				var sel2 = document.getElementById("sel2");
				var st = sel2.options[sel2.selectedIndex].text;
				if(st === 'osm_poi') {
					markers.setStyle({marker: {image: "http://kosmosnimki.ru/img/blau_knopka.png"}});
				} else {
					markers.setStyle({ outline: { color: 0xff0000, thickness: 3, opacity: 100 } });
				}

				var url = 'http://mapstest.kosmosnimki.ru/api/docs/api_samples/';
				var url = '';
var startTime = (new Date()).getTime();
				markers.addObjectsFromSWF(url + 'testData/'+st+'.swf')
var delta = (new Date()).getTime() - startTime;
//debObj.innerHTML += ' Передача в SWF: ' + delta/1000 + ' сек.';
			}
			
		}); 

</script>

</body>
</html>