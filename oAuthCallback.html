<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
geomixerWindow = window.opener || window.parent;
$.ajax({
	url: geomixerWindow['gmxGetServerBase']() + 'oAuthCallback.ashx' + window.location.search, 
	dataType: "jsonp",
	jsonp: 'CallbackName',
	success: function(response){
			var result = false;
			if(response.Status == 'error' && response.ErrorInfo.ErrorMessage != 'access_denied'){
				document.getElementById('resultText').innerHTML = response.ErrorInfo.ErrorMessage;
			}
			else if(response.Status == 'error' && response.ErrorInfo.ErrorMessage == 'access_denied'){
				geomixerWindow['gmxProcessAuthentication'](result);
				window.close();
                return;
			}
			else{
				result = response.Result;
			}
			geomixerWindow['gmxProcessAuthentication'](result);
			if(result) window.close();
		}
	});
</script>
<body>
<div id="resultText"/>
</body>
</html>