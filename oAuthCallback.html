<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$.ajax({
	url: window.opener['gmxGetServerBase']() + 'oAuthCallback.ashx' + window.location.search, 
	dataType: "jsonp",
	jsonp: 'CallbackName',
	success: function(response){
			var result = false;
			if(response.Status == 'error' && response.ErrorInfo.ErrorMessage != 'access_denied'){
				document.getElementById('resultText').innerHTML = response.ErrorInfo.ErrorMessage;
			}
			else if(response.Status == 'error' && response.ErrorInfo.ErrorMessage == 'access_denied'){
				window.opener['gmxProcessAuthentication'](result);
				window.close();
			}
			else{
				result = response.Result;
			}
			window.opener['gmxProcessAuthentication'](result);
			if(result) window.close();
		}
	});
</script>
<body>
<div id="resultText"/>
</body>
</html>