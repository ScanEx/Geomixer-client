{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../Common/Controls/Calendar.js","webpack:///../Common/Controls/SearchControl.js","webpack:///../Common/Controls/SelectControl.js","webpack:///../Common/Request.js","webpack:///./icons.svg","webpack:///./node_modules/svg-baker-runtime/browser-symbol.js","webpack:///./node_modules/svg-sprite-loader/runtime/browser-sprite.build.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/Models/TracksModel.js","webpack:///./src/PluginPanel.js","webpack:///./src/SearchControl.css?7ab7","webpack:///./src/SelectControl.css?21a2","webpack:///./src/Views/BaseView.js","webpack:///./src/Views/TracksView.css?715a","webpack:///./src/Views/TracksView.js","webpack:///./src/ViewsFactory.js","webpack:///./src/all.css","webpack:///./src/entry.js","webpack:///./src/locale.js"],"names":["SIMPLE_MODE","ADVANCED_MODE","_toMidnight","nsGmx","DateInterval","toMidnight","_fromUTC","date","timeOffset","getTimezoneOffset","Date","valueOf","_toUTC","_setMode","mode","_curMode","_dateInputs","datepicker","isSimple","$el","find","toggle","_moreIcon","toggleClass","attr","_gtxt","dateBegin","_dateBegin","dateEnd","_dateEnd","_selectFunc","call","_updateModel","activeInput","begin","end","dateToFix","$","dateInterval","set","MS_IN_DAY","_updateWidget","get","dayms","isValid","newDateBegin","newDateEnd","prevDateBegin","prevDateEnd","_shiftDates","delta","shift","_dateMin","_dateMax","module","exports","options","template","Handlebars","compile","extend","minimized","showSwitcher","dateMax","dateMin","dateFormat","name","html","moreIconClass","moreIconTitle","forecast","add","on","bind","onSelect","dateText","inst","input","showAnim","changeMonth","changeYear","minDate","maxDate","defaultDate","showOn","buttonImage","buttonImageOnly","container","append","canvas","_searchString","_sparams","SearchControl","tab","callback","searchparams","searcher","innerHTML","suggestions","appendChild","document","createElement","classList","frame","q","querySelector","preferences","localStorage","getItem","search","asparams","split","forEach","p","i","sr","style","borderRight","paddingRight","width","searchInput","searchBut","prefeBut","removeBut","delay","suggestionsCount","suggestionsFrame","first","current","last","found","values","searchDone","length","vessel_name","value","doSearch","actualId","requests","push","searchpromise","Promise","all","then","a","map","r","status","console","log","json","concat","parser","reject","display","scrollCont","content","mCustomScrollbar","suggestion","querySelectorAll","cr","getBoundingClientRect","position","left","top","bottom","Math","round","height","el","onclick","e","currentTarget","id","response","addEventListener","offsetWidth","stopPropagation","ch","contains","sparam","replace","remove","RegExp","setItem","focus","clearTimeout","onkeydown","keyCode","previousSibling","nextSibling","scrollInertia","prepareSearchInput","temp","click","onkeyup","setTimeout","apply","onpaste","originalEvent","window","clipboardData","getData","prototype","active","_isOptionsDisplayed","_select","_optionsList","_selected","className","o","join","body","_arrow","_options","_hideOptions","_setOptionsRect","selectedRc","bw","parseInt","getComputedStyle","borderWidth","isNaN","srcElement","dropDownList","_serverBase","serverBase","location","protocol","_fetchRequest","url","request","method","fetch","headers","encodeURI","_sendRequest","resolve","Status","toLowerCase","Result","sendCrossDomainJSONRequest","sendCrossDomainPostRequest","_getQueryString","params","qs","JSON","stringify","_searchRequest","_modifyRequest","_checkVersion","layer","ms","L","gmx","layersVersion","chkVersion","fetchRequest","sendRequest","searchRequest","modifyRequest","checkVersion","Request","require","_data","regions","_layerName","isDirty","data","update","thisModel","view","inProgress","msg","txt","repaint","viewFactory","_isReady","_activeView","_canvas","_div","_views","create","_create","sidebarPane","v","resize","show","_returnInstance","_clean","empty","BaseView","model","gifLoader","isActive","is","clean","h","topOffset","bottomOffset","tableTemplate","mcsbOptions","hide","isVisible","rc","Calendar","SelectControl","_searchLayer","_selectLayers","_thisView","_layer","MyCollectionView","_addCalendar","trackLayer","mmsi","calendar","footer","selectLayer","l","selected","columns","rv","c","Object","defineProperty","page","gmx_id","DateTime","DateTimeChange","StateColor","m","mapDateInterval","widgets","commonCalendar","getDateInterval","tr","insertCell","db","getUTCDayBoundary","state","progress","arguments","MyCollectionModel","_mcm","_mcv","pluginName","menuId","toolbarIconId","cssTable","modulePath","gmxCore","getModulePath","PluginPanel","ViewsFactory","publicInterface","afterViewer","pluginPanel","sidebar","iconSidebarWidget","createTabFunction","icon","inactive","hint","tabDiv","setPane","createTab","_activeTabId","addModule","css","_translationsHash","addtext"],"mappings":"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ACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA,CAAC;AACD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA,4DAA4D;AAC5D;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA4B,cAAc;;AAE1C;AACA;AACA;;AAEA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,eAAe;AAC5B,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,CAAC;;AAED;;AAEA,CAAC;;;;;;;;;;;;;AC7QD;AACA,CAAC,KAA4D;AAC7D,CAAC,SACkC;AACnC,CAAC,qBAAqB;;AAEtB;;;;;;AAMA;AACA,kBAAkB,YAAY,EAAE;AAChC;;AAEA;AACA;AACA,QAAQ,KAAgD,EAAE,EAErD;AACL;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,sCAAsC;AACtC;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA,CAAC;AACD,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;;;;;AAKA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,IAAI;AACjB;AACA;AACA;AACA,6CAA6C,cAAc,EAAE;AAC7D,4CAA4C,oBAAoB,EAAE;AAClE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA,4DAA4D;AAC5D;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kEAAkE;AAClE,GAAG;AACH;AACA;;AAEA;AACA,qDAAqD;AACrD;AACA;;AAEA;AACA;AACA,WAAW,aAAa;AACxB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA,2CAA2C,oBAAoB,EAAE;AACjE;;AAEA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,0DAA0D,sBAAsB,EAAE;AAClF;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,oBAAoB,EAAE;AAC3D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wDAAwD,4BAA4B,EAAE;AACtF;;AAEA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA4B,cAAc;;AAE1C;AACA;AACA;;AAEA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,eAAe;AAC5B,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA,WAAW,EAAE;AACb,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,4CAA4C,EAAE;AACvE,0BAA0B,6CAA6C,EAAE;;AAEzE;AACA,qBAAqB,kFAAkF,EAAE;AACzG,uBAAuB,0CAA0C;AACjE;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA,gCAAgC,iCAAiC;AACjE,KAAK;AACL,GAAG;AACH;;AAEA;;AAEA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,+BAA+B,qBAAqB;AACpD;;AAEA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C,2BAA2B,EAAE;;AAE5E;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH,iCAAiC,8GAA8G,EAAE;AACjJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C,wCAAwC,EAAE;AACtF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA,4BAA4B,cAAc;;AAE1C;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,MAAM;AACnB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC,cAAc,QAAQ;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa,eAAe;AAC5B,cAAc,aAAa;AAC3B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,OAAO;;AAEP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kCAAkC,oBAAoB,EAAE;;AAExD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,eAAe;AAC5B,aAAa,QAAQ;AACrB,cAAc,aAAa;AAC3B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,O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","file":"TrackExportPlugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/entry.js\");\n","const SIMPLE_MODE = 1,\r\n      ADVANCED_MODE = 2;\r\nconst _toMidnight = nsGmx.DateInterval.toMidnight, \r\n    _fromUTC = function (date) {\r\n        if (!date) return null;\r\n        var timeOffset = date.getTimezoneOffset() * 60 * 1000;\r\n        return new Date(date.valueOf() - timeOffset);\r\n    }, \r\n    _toUTC = function(date) {\r\n        if (!date) return null;\r\n        var timeOffset = date.getTimezoneOffset()*60*1000;\r\n        return new Date(date.valueOf() + timeOffset);\r\n    },\r\n    _setMode = function(mode) {\r\n        if (this._curMode === mode) {\r\n            return this;\r\n        }\r\n\r\n        //this.reset();\r\n        this._dateInputs.datepicker('hide');\r\n\r\n        this._curMode = mode;\r\n        var isSimple = mode === SIMPLE_MODE;\r\n\r\n        $el.find('.CalendarWidget-onlyMaxVersion').toggle(!isSimple);\r\n\r\n        this._moreIcon\r\n            .toggleClass('icon-calendar', isSimple)\r\n            .toggleClass('icon-calendar-empty', !isSimple)\r\n            .attr('title', isSimple ? _gtxt('CalendarWidget.ExtendedViewTitle') : _gtxt('CalendarWidget.MinimalViewTitle'));\r\n\r\n\r\n        var dateBegin = this._dateBegin.datepicker('getDate'),\r\n            dateEnd = this._dateEnd.datepicker('getDate');\r\n\r\n        if (isSimple && dateBegin && dateEnd && dateBegin.valueOf() !== dateEnd.valueOf()) {\r\n            _selectFunc.call(this, this._dateEnd);\r\n            _updateModel().call(this);\r\n        }\r\n\r\n        //this.trigger('modechange');\r\n\r\n        return this;\r\n    },\r\n    _selectFunc = function(activeInput) {\r\n        var begin = this._dateBegin.datepicker('getDate');\r\n        var end   = this._dateEnd.datepicker('getDate');\r\n\r\n        if (end && begin && begin > end) {\r\n            var dateToFix = activeInput[0] == this._dateEnd[0] ? this._dateBegin : this._dateEnd;\r\n            dateToFix.datepicker('setDate', $(activeInput[0]).datepicker('getDate'));\r\n        } else if (this._curMode === SIMPLE_MODE) {\r\n            //    ,  ,  \r\n            if (!begin != !end || begin && begin.valueOf() !== end.valueOf()) {\r\n                this._dateEnd.datepicker('setDate', this._dateBegin.datepicker('getDate'));\r\n            }\r\n        }\r\n    },\r\n    _updateModel = function() {\r\n        var dateBegin = _fromUTC(this._dateBegin.datepicker('getDate')),\r\n            dateEnd = _fromUTC(this._dateEnd.datepicker('getDate'));\r\n\r\n        this.dateInterval.set({\r\n            dateBegin: dateBegin ? _toMidnight(dateBegin) : null,\r\n            dateEnd: dateEnd ? _toMidnight(dateEnd.valueOf() + nsGmx.DateInterval.MS_IN_DAY) : null\r\n        });\r\n    },\r\n    _updateWidget = function() {\r\n        var dateBegin = this.dateInterval.get('dateBegin'),\r\n            dateEnd = this.dateInterval.get('dateEnd'),\r\n            dayms = nsGmx.DateInterval.MS_IN_DAY;\r\n\r\n        if (!dateBegin || !dateEnd) {\r\n            return;\r\n        };\r\n\r\n        var isValid = !(dateBegin % dayms) && !(dateEnd % dayms);\r\n\r\n        var newDateBegin = _toUTC(dateBegin),\r\n            newDateEnd;\r\n        if (isValid) {\r\n            newDateEnd = _toUTC(new Date(dateEnd - dayms));\r\n            if (dateEnd - dateBegin > dayms) {\r\n                _setMode.call(this, ADVANCED_MODE);\r\n            }\r\n        } else {\r\n            newDateEnd = _toUTC(dateEnd);\r\n            _setMode.call(this, ADVANCED_MODE);\r\n        }\r\n\r\n        //         ,  setDate    input-\r\n        //,  -  jQueryUI.datepicker'.\r\n        //  ,  ,    \r\n        var prevDateBegin = this._dateBegin.datepicker('getDate'),\r\n            prevDateEnd = this._dateEnd.datepicker('getDate');\r\n\r\n        if (!prevDateBegin || prevDateBegin.valueOf() !== newDateBegin.valueOf()) {\r\n            this._dateBegin.datepicker('setDate', newDateBegin);\r\n        }\r\n\r\n        if (!prevDateEnd || prevDateEnd.valueOf() !== newDateEnd.valueOf()) {\r\n            this._dateEnd.datepicker('setDate', newDateEnd);\r\n        }\r\n    },\r\n    _shiftDates = function(delta) {\r\n        var dateBegin = _fromUTC(this._dateBegin.datepicker('getDate')),\r\n            dateEnd = _fromUTC(this._dateEnd.datepicker('getDate'));\r\n\r\n        if (!dateBegin || !dateEnd) {\r\n            return;\r\n        }\r\n\r\n        var shift = (dateEnd - dateBegin + nsGmx.DateInterval.MS_IN_DAY) * delta,\r\n            newDateBegin = new Date(dateBegin.valueOf() + shift),\r\n            newDateEnd = new Date(dateEnd.valueOf() + shift);\r\n\r\n        if ((!this._dateMin || _toMidnight(this._dateMin) <= _toMidnight(newDateBegin)) &&\r\n            (!this._dateMax || _toMidnight(this._dateMax) >= _toMidnight(newDateEnd)))\r\n        {\r\n            this._dateBegin.datepicker('setDate', _toUTC(newDateBegin));\r\n            this._dateEnd.datepicker('setDate', _toUTC(newDateEnd));\r\n\r\n            _updateModel.call(this);\r\n        }\r\n    };\r\n\r\nmodule.exports = function(options){\r\n\r\n    $el = $('<div class=\"CalendarWidget ui-widget\"></div>');\r\n\r\n    this.template = Handlebars.compile(`\r\n    <table>\r\n    <tr>\r\n        <td><div class = \"CalendarWidget-iconScrollLeft ui-helper-noselect icon-left-open\"></div></td>\r\n        <td class = \"CalendarWidget-inputCell\"><input class = \"gmx-input-text CalendarWidget-dateBegin\"></td>\r\n        <td class = \"CalendarWidget-inputCell CalendarWidget-onlyMaxVersion\"><input class = \"gmx-input-text CalendarWidget-dateEnd\"></td>\r\n        <td><div class = \"CalendarWidget-iconScrollRight ui-helper-noselect icon-right-open\" ></div></td>\r\n        <td><div class = \"CalendarWidget-iconMore {{moreIconClass}}\" title = \"{{moreIconTitle}}\"></div></td>\r\n        <td><div class = \"CalendarWidget-forecast\" hidden>{{forecast}}</div></td>\r\n    </tr><tr>\r\n        <td></td>\r\n        <td class = \"CalendarWidget-dateBeginInfo\"></td>\r\n        <td class = \"CalendarWidget-dateEndInfo\"></td>\r\n        <td></td>\r\n        <td></td>\r\n    </tr>\r\n</table>\r\n<div class=\"CalendarWidget-footer\"></div>`);\r\n\r\n    options = $.extend({\r\n        minimized: true,\r\n        showSwitcher: true,\r\n        dateMax: null,\r\n        dateMin: null,\r\n        dateFormat: 'dd.mm.yy',\r\n        name: null\r\n    }, options);\r\n\r\n    this._dateMin = options.dateMin;\r\n    this._dateMax = options.dateMax;\r\n    this.dateInterval = options.dateInterval;\r\n\r\n    $el.html(this.template({\r\n        moreIconClass: options.minimized ? 'icon-calendar' : 'icon-calendar-empty',\r\n        moreIconTitle: options.minimized ? _gtxt('CalendarWidget.ExtendedViewTitle') : _gtxt('CalendarWidget.MinimalViewTitle'),\r\n        forecast: _gtxt('CalendarWidget.forecast')\r\n    }));\r\n\r\n    this._moreIcon = $el.find('.CalendarWidget-iconMore')\r\n        .toggle(!!options.showSwitcher);\r\n\r\n    this._dateBegin = $el.find('.CalendarWidget-dateBegin');\r\n    this._dateEnd = $el.find('.CalendarWidget-dateEnd');\r\n    this._dateInputs = this._dateBegin.add(this._dateEnd);\r\n\r\n    $el.find('.CalendarWidget-iconScrollLeft').on('click', function() {\r\n        _shiftDates.call(this, -1);\r\n    }.bind(this));\r\n    $el.find('.CalendarWidget-iconScrollRight').on('click', function() {\r\n        _shiftDates.call(this, 1);\r\n    }.bind(this));\r\n\r\n    this._dateInputs.datepicker({\r\n        onSelect: function(dateText, inst){\r\n            _selectFunc.call(this, inst.input);\r\n            _updateModel.call(this);\r\n        }.bind(this),\r\n        showAnim: 'fadeIn',\r\n        changeMonth: true,\r\n        changeYear: true,\r\n        minDate: this._dateMin ? _toUTC(this._dateMin) : null,\r\n        maxDate: this._dateMax ? _toUTC(this._dateMax) : null,\r\n        dateFormat: options.dateFormat,\r\n        defaultDate: _toUTC(this._dateMax || new Date()),\r\n        showOn: options.buttonImage ? 'both' : 'focus',\r\n        buttonImageOnly: true\r\n    });\r\n\r\n    //   ,     canvas\r\n    if (options.buttonImage) {\r\n        this._dateInputs.datepicker('option', 'buttonImage', options.buttonImage);\r\n    }\r\n\r\n    $el.find('.CalendarWidget-onlyMaxVersion').toggle(!options.minimized);\r\n\r\n    options.dateBegin && this._dateBegin.datepicker('setDate', _toUTC(options.dateBegin));\r\n    options.dateEnd && this._dateEnd.datepicker('setDate', _toUTC(options.dateEnd));\r\n\r\n    if (options.container) {\r\n        if (typeof options.container === 'string')\r\n            $('#' + options.container).append($el);\r\n        else\r\n            $(options.container).append($el);\r\n    }\r\n\r\n    _setMode.call(this, options.minimized ? SIMPLE_MODE : ADVANCED_MODE);\r\n\r\n    _updateWidget.call(this);\r\n\r\n    this.dateInterval.on('change', function(){_updateWidget.call(this)}.bind(this), this);\r\n\r\n    //for backward compatibility\r\n    this.canvas = $el;\r\n}","\r\n\r\nlet _searchString = \"\",\r\n_sparams = 'imo name mmsi';\r\nconst SearchControl = function ({ tab, container, callback, searchparams, searcher }) {\r\n\r\n    container.innerHTML = '<div class=\"filter\"><input type=\"text\" placeholder=\"' + _gtxt(\"Lloyds.search_placeholder\") + '\"/>' +\r\n        (!searchparams ? '' : '<div class=\"preferences\"></div>') +\r\n        '<div class=\"searchremove\"><img class=\"search\" src=\"plugins/AIS/AISSearch/svg/search.svg\">' +\r\n        '<img class=\"remove clicable\" src=\"plugins/AIS/AISSearch/svg/remove.svg\"></div>' +\r\n        '</div>';\r\n    let suggestions = tab.appendChild(document.createElement('div'));\r\n    suggestions.classList.add(\"suggestions\");\r\n    suggestions.innerHTML = '<div class=\"suggestion\">SOME VESSEL<br><span>mmsi:0, imo:0</span></div>';\r\n\r\n    this.frame = { find: (q) => { return container.querySelector(q) } };\r\n\r\n    let preferences = false;\r\n    if (searchparams){\r\n        _sparams = localStorage.getItem(searchparams);\r\n        preferences = tab.appendChild(document.createElement('div'));\r\n        preferences.classList.add(\"preferences\");\r\n        preferences.innerHTML = '<div class=\"section\"> :</div>' +\r\n            '<div class=\"line\"><div class=\"checkbox imo disabled\"></div><div class=\"label\">IMO<label></div></div>' +\r\n            '<div class=\"line\"><div class=\"checkbox mmsi\"></div><div class=\"label\">MMSI<label></div></div>' +\r\n            '<div class=\"line\"><div class=\"checkbox name disabled\"></div><div class=\"label\"></div></div>' +\r\n            '<div class=\"line\"><div class=\"checkbox callsign\"></div><div class=\"label\"><label></div></div>' +\r\n            '<div class=\"line\"><div class=\"checkbox owner\"></div><div class=\"label\"><label></div></div>';\r\n        !_sparams && (_sparams = 'imo name mmsi');\r\n        if (_sparams.search(/imo/) < 0)\r\n            _sparams += ' imo';\r\n        if (_sparams.search(/name/) < 0)\r\n            _sparams += ' name';\r\n        let asparams = _sparams.split(' ');\r\n        asparams.forEach((p, i) => { preferences.querySelector('.' + p).classList.add('checked') });\r\n    }\r\n    else{\r\n        let sr = this.frame.find('.filter .searchremove');\r\n        sr.style.borderRight = 'none';\r\n        sr.style.paddingRight = 0;\r\n        this.frame.find('.filter input').style.width = '85%';\r\n    }\r\n\r\n    this.frame = { find: (q) => { return container.querySelector(q) } }\r\n    this.searchInput = this.frame.find('.filter input');\r\n\r\n    let searchBut = this.frame.find('.filter .search'),\r\n        prefeBut = this.frame.find('.filter .preferences'),\r\n        removeBut = this.frame.find('.filter .remove'),\r\n        delay,\r\n        //suggestions = this.frame.find('.suggestions'),\r\n        suggestionsCount = 5,\r\n        suggestionsFrame = { first: 0, current: 0, last: suggestionsCount - 1 },\r\n        found = { values: [] },\r\n        searchDone = function () {\r\n            if (found.values.length > 0) {\r\n                _searchString = found.values[suggestionsFrame.current].vessel_name;\r\n                this.searchInput.value = (_searchString);\r\n                callback(found.values[suggestionsFrame.current]);\r\n            }\r\n            // else {\r\n            //     _clean.call(this);\r\n            // }\r\n        },\r\n        doSearch = function (actualId) {\r\n            let requests = [];\r\n            // _sparams.split(' ').forEach(sp=>{       \r\n            //     requests.push(fetch(\"//kosmosnimki.ru/demo/lloyds/api/v1/Ship/Search/\" + sp + \"/\" + _searchString));\r\n            // });\r\n            requests.push(new searcher.searchpromise([{name:'query', value: [_searchString]}]));\r\n            Promise.all(requests)\r\n            .then(a=>{\r\n//console.log(a)\r\n                return Promise.all(a.map(r=>{\r\n                    if (r.status != 200){\r\n                        console.log(r)                       \r\n                        return [];\r\n                    }\r\n                    else\r\n                        return r.json()\r\n                }))\r\n            })\r\n            .then(a=>{\r\n//console.log(actualId+\" \"+delay)\r\n                if (actualId==delay){\r\n                    found = {values:[]};\r\n                    a.forEach(r=>{found.values = found.values.concat( searcher.parser(r) );});\r\n//console.log(found.values)\r\n                }\r\n                else \r\n                    return Promise.reject(\"stop\")                    \r\n            })\r\n            .then(function () { // SUCCEEDED\r\n//console.log(_searchString)\r\n                if (found.values.length == 0 || _searchString == \"\") {\r\n                    suggestions.style.display = 'none';\r\n                    return;\r\n                }\r\n\r\n                let scrollCont = suggestions.querySelector('.mCSB_container'),\r\n                    content = Handlebars.compile(\r\n                        '{{#each values}}<div class=\"suggestion\" id=\"{{@index}}\">{{vessel_name}}<br><span>mmsi:{{mmsi}}, imo:{{imo}}, {{callsign}}</span><br><span>{{owner}}</span></div>{{/each}}'\r\n                    )(found);\r\n                if (!scrollCont) {\r\n                    suggestions.innerHTML = (content);\r\n                    $(suggestions).mCustomScrollbar();\r\n                }\r\n                else\r\n                    scrollCont.innerHTML = (content);\r\n\r\n                let suggestion = suggestions.querySelectorAll('.suggestion');\r\n                if (suggestions.style.display != 'block') {\r\n                    let cr = this.frame.find('.filter').getBoundingClientRect();\r\n                    suggestions.style.display = 'block';\r\n                    suggestions.style.position = 'fixed';\r\n                    suggestions.style.left = cr.left + \"px\"; suggestions.style.top = (cr.bottom - 3) + \"px\";\r\n                    suggestions.style.width = (Math.round(cr.width) - 2) + \"px\";\r\n                    // $(suggestions).offset({ left: cr.left, top: cr.bottom - 3 });\r\n                    // $(suggestions).outerWidth(cr.width)\r\n                }\r\n\r\n                suggestions.style.height = suggestion[0].getBoundingClientRect().height *\r\n                    (found.values.length > suggestionsCount ? suggestionsCount : found.values.length) + \"px\";\r\n\r\n                suggestionsFrame = { first: 0, current: 0, last: suggestionsCount - 1 };\r\n                suggestion[suggestionsFrame.current].classList.add('selected');\r\n                suggestion.forEach(((el, i) =>\r\n                    el.onclick = (e => {\r\n                        suggestionsFrame.current = e.currentTarget.id;\r\n                        suggestions.style.display = 'none';\r\n                        searchDone.call(this);\r\n                    }).bind(this)\r\n                ).bind(this));\r\n            }.bind(this),\r\n            function (response) { // FAILED\r\n                if (response!=\"stop\")\r\n                    console.log(response);\r\n            });\r\n        };\r\n\r\n    tab.addEventListener('click', function (e) {\r\n        suggestions.style.display = 'none';\r\n    });\r\n    if (preferences) {\r\n        tab.addEventListener('click', function (e) {\r\n            preferences.style.display = 'none';\r\n        });\r\n        prefeBut.onclick = function (e) {\r\n            if (preferences.style.display != 'block') {\r\n                let cr = this.frame.find('.filter').getBoundingClientRect();\r\n                preferences.style.display = 'block';\r\n                preferences.style.position = 'fixed';\r\n                preferences.style.left = (cr.left + (cr.width - preferences.offsetWidth) / 2) + \"px\";\r\n                preferences.style.top = (cr.bottom + 10) + \"px\";\r\n                e.stopPropagation()\r\n            }\r\n        }.bind(this);\r\n\r\n        preferences.querySelectorAll('.line').forEach(el => el.onclick = e => {\r\n            let ch = el.querySelector('.checkbox');\r\n            if (!ch.classList.contains('disabled')) {\r\n                let sparam = ch.classList.value.replace(/ *(checked|checkbox) */g, '');\r\n                if (ch.classList.contains('checked')) {\r\n                    ch.classList.remove('checked');\r\n                    _sparams = _sparams.replace(new RegExp(sparam), '').replace(/ {2,}/g, ' ');\r\n                }\r\n                else {\r\n                    ch.classList.add('checked');\r\n                    _sparams = _sparams + ' ' + sparam;\r\n                }\r\n                _sparams = _sparams.replace(/^\\s+|\\s+$/g, '')\r\n                localStorage.setItem(searchparams, _sparams);\r\n                //console.log(_sparams)\r\n            }\r\n            e.stopPropagation()\r\n        });\r\n    }\r\n    \r\n    removeBut.onclick = (function (e) {\r\n        _searchString = '';\r\n        this.searchInput.value = ('');\r\n        this.searchInput.focus();\r\n        clearTimeout(delay)\r\n        removeBut.style.display = 'none';\r\n        searchBut.style.display = 'block';\r\n        suggestions.style.display = 'none';\r\n        //_clean.call(this);\r\n    }.bind(this));\r\n\r\n    this.searchInput.onkeydown = (function (e) {\r\n        let suggestion = suggestions.querySelector('.suggestion.selected');\r\n        if (suggestions.style.display == 'block') {\r\n            if (e.keyCode == 38) {\r\n                if (suggestionsFrame.current > 0) {\r\n                    suggestionsFrame.current--;\r\n                    suggestion.classList.remove('selected')\r\n                    suggestion.previousSibling.classList.add('selected');\r\n                }\r\n            }\r\n            else if (e.keyCode == 40) {\r\n                if (suggestionsFrame.current < found.values.length - 1) {\r\n                    suggestionsFrame.current++;\r\n                    suggestion.classList.remove('selected')\r\n                    suggestion.nextSibling.classList.add('selected');\r\n                }\r\n            }\r\n            if (suggestionsFrame.last < suggestionsFrame.current) {\r\n                suggestionsFrame.last = suggestionsFrame.current;\r\n                suggestionsFrame.first = suggestionsFrame.last - (suggestionsCount - 1);\r\n            }\r\n            if (suggestionsFrame.first > suggestionsFrame.current) {\r\n                suggestionsFrame.first = suggestionsFrame.current;\r\n                suggestionsFrame.last = suggestionsFrame.first + (suggestionsCount - 1);\r\n            }\r\n\r\n            $(suggestions).mCustomScrollbar(\"scrollTo\", \"#\" + suggestionsFrame.first, { scrollInertia: 0 });\r\n        }\r\n    });\r\n\r\n    let prepareSearchInput = function (temp, keyCode) {\r\n        removeBut.style.display = 'block';\r\n        searchBut.style.display = 'none';\r\n//console.log(\"delay clear\"+delay)\r\n//console.log(_searchString + \"==\"+ temp)\r\n        if (_searchString == temp && (!keyCode || keyCode != 13))\r\n            return false;\r\n\r\n        clearTimeout(delay);\r\n\r\n        _searchString = temp;\r\n        if (_searchString == \"\") {\r\n            removeBut.click();\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    this.searchInput.onkeyup = (function (e) {\r\n        let temp = (this.searchInput.value || \"\")\r\n            .replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\r\n        if (!prepareSearchInput(temp, e.keyCode))\r\n            return;\r\n        if (e.keyCode == 13) {\r\n            suggestions.style.display = 'none';\r\n            searchDone.call(this);\r\n        }\r\n        else{\r\n            delay = setTimeout((() => {\r\n                doSearch.apply(this, [delay])\r\n            }).bind(this), 200);\r\n        }\r\n    }.bind(this));\r\n\r\n\r\n    this.searchInput.onpaste = function (e) {\r\n        let temp = ((e.originalEvent || window.clipboardData || e).clipboardData.getData('text') || \"\")\r\n            .replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\r\n        if (!prepareSearchInput(temp))\r\n            return;\r\n        delay = setTimeout((() => {\r\n            doSearch.call(this, [delay])\r\n        }).bind(this), 200);\r\n    }.bind(this);\r\n\r\n}\r\n\r\nSearchControl.prototype.focus = function () {\r\n    this.searchInput.focus();\r\n}\r\n\r\nmodule.exports = SearchControl;","module.exports = function(container, options, active, callback){\r\n    let _isOptionsDisplayed = false,\r\n    _select = document.createElement('div'),\r\n    _optionsList = document.createElement('div'),\r\n    _selected = active; \r\n\r\n    _select.className = 'select-control';\r\n    _select.innerHTML = `<span class=\"select-active\">${options[active]}</span><span class=\"icon-down-open\"></span>`;\r\n    _optionsList.className = 'select-list';\r\n    _optionsList.innerHTML = options.map((o, i)=>`<div class=\"select-options\" id=\"${i}\">${o}</div>`).join('');\r\n    \r\n    container.append(_select);\r\n    document.body.append(_optionsList);\r\n\r\n    const _arrow = _select.querySelector('.icon-down-open'),\r\n    _options = _optionsList.querySelectorAll('.select-options'),\r\n    _hideOptions = function(){\r\n            _optionsList.style.display = 'none';\r\n            _optionsList.querySelectorAll('.select-options')[_selected].classList.remove('selected');\r\n            _arrow.classList.remove('icon-up-open');\r\n            _arrow.classList.add('icon-down-open');\r\n            _isOptionsDisplayed = false;\r\n    };\r\n\r\n    let _setOptionsRect = function(){\r\n        let selectedRc = _select.getBoundingClientRect(),\r\n            bw = parseInt(getComputedStyle(_optionsList).borderWidth);\r\n        if (isNaN(bw)) bw = 0;\r\n        _optionsList.style.width = selectedRc.width - 2 * bw + \"px\";\r\n        _optionsList.style.top = selectedRc.bottom - 3 + \"px\";\r\n        _optionsList.style.left = selectedRc.left + \"px\";  \r\n    }  \r\n\r\n    for (let i=0; i<_options.length; ++i)\r\n        _options[i].addEventListener('click', e=>{\r\n            _hideOptions();\r\n            _selected = parseInt(e.srcElement.id);  \r\n            _select.querySelector('.select-active').innerHTML = options[_selected];          \r\n            callback(_selected);\r\n        });\r\n\r\n    _optionsList.addEventListener('mouseleave', e=>{\r\n        _hideOptions();\r\n    });\r\n    _select.addEventListener('click', e=>{\r\n//console.log(_isOptionsDisplayed)\r\n        if (_isOptionsDisplayed){\r\n            _hideOptions();\r\n        }\r\n        else{\r\n            _setOptionsRect();\r\n            _optionsList.style.display = 'block';\r\n            _optionsList.querySelectorAll('.select-options')[_selected].classList.add('selected');\r\n            _arrow.classList.remove('icon-down-open');\r\n            _arrow.classList.add('icon-up-open');\r\n            _isOptionsDisplayed = true;\r\n        }\r\n    });\r\n\r\n    return {dropDownList: _optionsList};\r\n\r\n}","const _serverBase = window.serverBase.replace(/^https?:/, document.location.protocol),\r\n    _fetchRequest = function(url, request, method){\r\n        if (url[0]=='/')\r\n            url = _serverBase + url.replace(/^\\//, '');\r\n        if (method=='POST')\r\n            return fetch(url, {                \r\n                headers: {'Content-Type': 'application/x-www-form-urlencoded'},\r\n                method: 'POST', // *GET, POST, PUT, DELETE, etc.\r\n                mode: 'cors', // no-cors, cors, *same-origin);\r\n                body: encodeURI(request)\r\n            });\r\n    },\r\n    _sendRequest = function(url, request, method){\r\n        return new Promise((resolve, reject) => {\r\n            const callback = response => {\r\n                if (!response.Status || response.Status.toLowerCase() != 'ok' || !response.Result) {\r\n                    reject(response);\r\n                }\r\n                else\r\n                    resolve(response.Result);\r\n            };\r\n            if (url[0]=='/')\r\n                url = _serverBase + url.replace(/^\\//, '');\r\n            if (!method || method == 'GET')\r\n                window.sendCrossDomainJSONRequest(url, callback);\r\n            if (method == 'POST')\r\n                window.sendCrossDomainPostRequest(url, request, callback);\r\n        });\r\n    },\r\n    _getQueryString = function(params){\r\n        let qs = '';\r\n        for (let p in params) {\r\n            if (qs != '')\r\n            qs += '&';\r\n        qs += p + '=' + (typeof params[p]=='object' ? JSON.stringify(params[p]) : params[p]);\r\n        }\r\n        return qs;\r\n    }\r\n    _searchRequest = function(params){\r\n        const url = `${_serverBase}VectorLayer/Search.ashx?${_getQueryString(params)}`;\r\n        return _sendRequest(url);\r\n    },\r\n    _modifyRequest = function(params){\r\n        const url = `${_serverBase}VectorLayer/ModifyVectorObjects.ashx?${_getQueryString(params)}`;\r\n        return _sendRequest(url);\r\n    },\r\n    _checkVersion = function(layer, ms){\r\n        setTimeout(()=>{\r\n            L.gmx.layersVersion.chkVersion(layer);\r\n//console.log('ChV')                   \r\n            setTimeout(()=>{\r\n                L.gmx.layersVersion.chkVersion(layer);\r\n//console.log('ChV')                   \r\n                setTimeout(()=>{\r\n                    L.gmx.layersVersion.chkVersion(layer); \r\n//console.log('ChV')                   \r\n                }, ms);\r\n            }, ms);                                            \r\n        }, ms);\r\n    };\r\nmodule.exports = {\r\n    fetchRequest: _fetchRequest,\r\n    sendRequest: _sendRequest,\r\n    searchRequest : _searchRequest, \r\n    modifyRequest: _modifyRequest,\r\n    checkVersion: _checkVersion\r\n};","import SpriteSymbol from \"./node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"./node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icons\",\n  \"use\": \"icons-usage\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" id=\\\"icons\\\">\\r\\n\\r\\n<symbol id=\\\"icons_arrow-left\\\" viewBox=\\\"0 0 20 20\\\" fill=\\\"none\\\">\\r\\n<path d=\\\"M18.3334 10H1.66669\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"10\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n<path d=\\\"M7.50002 15.8333L1.66669 9.99996L7.50002 4.16663\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"10\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n</symbol>\\r\\n<symbol id=\\\"icons_arrow-right\\\" viewBox=\\\"0 0 20 20\\\" fill=\\\"none\\\">\\r\\n<path d=\\\"M18.3334 10H1.66669\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"10\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n<path d=\\\"M7.50002 15.8333L1.66669 9.99996L7.50002 4.16663\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"10\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" transform=\\\"rotate(180 10 10)\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_eye\\\" viewBox=\\\"4 4 16 16\\\" fill=\\\"none\\\">\\r\\n<path d=\\\"M11.93,7.28C8.87,7.28,6.1,9,4.05,11.88a0.69,0.69,0,0,0,0,.79c2,2.85,4.82,4.61,7.87,4.61s5.83-1.75,7.87-4.6a0.69,0.69,0,0,0,0-.79C17.75,9,15,7.28,11.93,7.28Zm0.22,8.52A3.45,3.45,0,0,1,8.57,12a3.46,3.46,0,0,1,3.14-3.29,3.45,3.45,0,0,1,3.58,3.75A3.47,3.47,0,0,1,12.14,15.8ZM12,14.17a1.9,1.9,0,1,1,1.69-1.77A1.85,1.85,0,0,1,12,14.17Z\\\" fill=\\\"currentColor\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_eye-off\\\" viewBox=\\\"4 4 16 16\\\" fill=\\\"none\\\">\\r\\n      <polygon points=\\\"18.68 20.13 4 5.38 5.32 4.13 20 18.87 18.68 20.13\\\" fill=\\\"currentColor\\\" />\\r\\n      <path fill=\\\"currentColor\\\" d=\\\"M12.06,8.77A3.42,3.42,0,0,1,15.26,12L18,14.72a13.33,13.33,0,0,0,1.81-2,0.69,0.69,0,0,0,0-.79C17.75,9,15,7.28,11.92,7.28a7.94,7.94,0,0,0-1.25.11Z\\\" />\\r\\n      <path fill=\\\"currentColor\\\" d=\\\"M12,14.17a1.83,1.83,0,0,0,1.58-1.26l-2.38-2.39a1.9,1.9,0,0,0-1.12,1.63A1.85,1.85,0,0,0,12,14.17Z\\\" />\\r\\n      <path fill=\\\"currentColor\\\" d=\\\"M14.79,14.09a3.35,3.35,0,0,1-2.65,1.71A3.45,3.45,0,0,1,8.57,12a3.56,3.56,0,0,1,1.5-2.7L8.69,8a11.38,11.38,0,0,0-4.64,3.92,0.69,0.69,0,0,0,0,.79c2,2.85,4.82,4.61,7.87,4.61a8.44,8.44,0,0,0,4.61-1.43Z\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_circle\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"currentColor\\\">\\r\\n<circle cx=\\\"8\\\" cy=\\\"8\\\" r=\\\"8\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_pen\\\" viewBox=\\\"0 0 12 12\\\" fill=\\\"currentColor\\\">\\r\\n<g xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t<path d=\\\"M6.1,2.6L0.2,8.5C0.1,8.6,0,8.8,0,9v2.3C0,11.7,0.3,12,0.8,12H3c0.2,0,0.4-0.1,0.5-0.2l5.9-5.8L6.1,2.6z\\\" />\\r\\n\\t<path d=\\\"M11.8,2.5L9.5,0.2c-0.3-0.3-0.8-0.3-1,0L7.1,1.6l3.3,3.3l1.4-1.4C12.1,3.2,12.1,2.8,11.8,2.5z\\\" />\\r\\n</g>\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_target\\\" viewBox=\\\"0 0 12 12\\\" fill=\\\"currentColor\\\">\\r\\n<g xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t<rect x=\\\"0\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\t\\r\\n\\t\\t<rect x=\\\"1.5\\\" y=\\\"-1.5\\\" transform=\\\"matrix(-1.836970e-16 1 -1 -1.836970e-16 2.9945 -1.4945)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\t\\r\\n\\t\\t<rect x=\\\"9\\\" y=\\\"-1.5\\\" transform=\\\"matrix(-1.836970e-16 1 -1 -1.836970e-16 10.4951 -8.9951)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"10.5\\\" transform=\\\"matrix(-1 -1.224647e-16 1.224647e-16 -1 22.4863 4.5)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"10.5\\\" y=\\\"7.5\\\" transform=\\\"matrix(-1 -1.224647e-16 1.224647e-16 -1 22.4967 19.5)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"9\\\" y=\\\"9\\\" transform=\\\"matrix(6.123234e-17 -1 1 6.123234e-17 -1.4997 21.0003)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"1.5\\\" y=\\\"9\\\" transform=\\\"matrix(6.123234e-17 -1 1 6.123234e-17 -9.0003 13.4997)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"0\\\" y=\\\"7.5\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<ellipse cx=\\\"6\\\" cy=\\\"6\\\" rx=\\\"2.2\\\" ry=\\\"2.3\\\" />\\r\\n</g>\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_info\\\" viewBox=\\\"2 2 20 20\\\" fill=\\\"currentColor\\\">\\r\\n<g class=\\\"nc-icon-wrapper\\\" fill=\\\"currentColor\\\">\\r\\n<path d=\\\"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z\\\" />\\r\\n</g>\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_polygon\\\" viewBox=\\\"4 0 20 20\\\" fill=\\\"currentColor\\\">\\r\\n      <rect x=\\\"6.04\\\" y=\\\"8.9\\\" width=\\\"2.05\\\" height=\\\"0.97\\\" transform=\\\"translate(-4.65 10.2) rotate(-57.04)\\\" /><rect x=\\\"10.84\\\" y=\\\"6.25\\\" width=\\\"2.05\\\" height=\\\"0.97\\\" /><rect x=\\\"10.84\\\" y=\\\"16.89\\\" width=\\\"2.05\\\" height=\\\"0.97\\\" /><rect x=\\\"6.58\\\" y=\\\"13.65\\\" width=\\\"0.97\\\" height=\\\"2.05\\\" transform=\\\"translate(-6.85 6.2) rotate(-32.96)\\\" /><path d=\\\"M8.68,6.28a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1a1.45,1.45,0,1,0,1.45,1.45A1.45,1.45,0,0,0,8.68,5.28h0Z\\\" /><path d=\\\"M8.68,16.87a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1a1.45,1.45,0,1,0,1.45,1.45,1.45,1.45,0,0,0-1.45-1.45h0Z\\\" /><path d=\\\"M5.45,11.58A0.45,0.45,0,1,1,5,12a0.45,0.45,0,0,1,.45-0.45m0-1A1.45,1.45,0,1,0,6.9,12a1.45,1.45,0,0,0-1.45-1.45h0Z\\\" /><rect x=\\\"15.91\\\" y=\\\"14.14\\\" width=\\\"2.05\\\" height=\\\"0.97\\\" transform=\\\"translate(-4.55 20.88) rotate(-57.04)\\\" /><rect x=\\\"16.45\\\" y=\\\"8.31\\\" width=\\\"0.97\\\" height=\\\"2.05\\\" transform=\\\"translate(-2.35 10.72) rotate(-32.96)\\\" /><path d=\\\"M15.32,16.82a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1a1.45,1.45,0,1,0,1.45,1.45,1.45,1.45,0,0,0-1.45-1.45h0Z\\\" /><path d=\\\"M15.32,6.24a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1a1.45,1.45,0,1,0,1.45,1.45,1.45,1.45,0,0,0-1.45-1.45h0Z\\\" /><path d=\\\"M18.55,11.53a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1A1.45,1.45,0,1,0,20,12a1.45,1.45,0,0,0-1.45-1.45h0Z\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_selectreg\\\" viewBox=\\\"12 13 24 20\\\" fill=\\\"currentColor\\\">\\r\\n    <path d=\\\"m 21.099609,8.4511719 c -1.469868,0 -2.548828,1.0789594 -2.548828,2.5488281 l 0,10.300781 a 0.45145663,0.45145663 0 0 1 -0.794922,0.291016 c -1.069223,-1.263628 -2.20723,-2.140625 -3.15625,-2.140625 -0.799555,0 -1.440052,0.272383 -1.724609,0.699219 a 0.45145663,0.45145663 0 0 1 -0.02344,0.03125 c -0.304031,0.380039 -0.58479,1.101873 -0.220703,2.285156 0.363172,1.180307 2.071447,4.826112 3.949219,7.791015 0.686643,1.07901 1.37235,1.961753 1.960938,2.648438 a 0.45145663,0.45145663 0 0 1 0.01367,0.01367 c 1.100572,1.400729 1.896484,2.439482 1.896484,4.080078 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 l 12,0 c 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 0,-2.462696 0.514524,-4.413564 1.013672,-6.410156 C 35.061648,28.593252 35.548828,26.542127 35.548828,24 l 0,-3 c 0,-1.469869 -1.078959,-2.548828 -2.548828,-2.548828 -0.325352,0 -0.686138,0.08548 -0.957031,0.175781 A 0.45145663,0.45145663 0 0 1 31.46875,18.332031 C 31.119977,17.19852 30.206706,16.451172 29,16.451172 c -0.439576,0 -0.8348,0.08997 -1.128906,0.310547 a 0.45145663,0.45145663 0 0 1 -0.654297,-0.123047 c -0.424766,-0.679626 -1.181444,-1.1875 -2.117188,-1.1875 -0.325352,0 -0.55809,0.076 -0.857421,0.175781 a 0.45145663,0.45145663 0 0 1 -0.59375,-0.427734 l 0,-4.199219 c 0,-1.4698687 -1.07896,-2.5488281 -2.548829,-2.5488281 z M 21,9.5488281 c 0.400314,0 0.778723,0.1400511 1.044922,0.40625 0.266199,0.2661989 0.40625,0.6446079 0.40625,1.0449219 l 0,9 c 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 l 0,-2 c 0,-0.400314 0.140051,-0.778723 0.40625,-1.044922 0.266199,-0.266199 0.644608,-0.40625 1.044922,-0.40625 0.400314,0 0.778723,0.140051 1.044922,0.40625 0.266199,0.266199 0.40625,0.644608 0.40625,1.044922 l 0,3 c 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 l 0,-2 c 0,-0.400314 0.140051,-0.778723 0.40625,-1.044922 0.266199,-0.266199 0.644608,-0.40625 1.044922,-0.40625 0.400314,0 0.778723,0.140051 1.044922,0.40625 0.266199,0.266199 0.40625,0.644608 0.40625,1.044922 l 0,3 c 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 l 0,-1 c 0,-0.400314 0.140051,-0.778723 0.40625,-1.044922 0.266199,-0.266199 0.644608,-0.40625 1.044922,-0.40625 0.400314,0 0.778723,0.140051 1.044922,0.40625 0.266199,0.266199 0.40625,0.644608 0.40625,1.044922 l 0,3 c 0,2.365422 -0.514537,4.312055 -1.013672,6.308594 l 0.0039,-0.01172 c -0.40345,1.815526 -0.892826,3.579678 -0.990234,5.722656 A 0.45145663,0.45145663 0 0 1 32,36.451172 l -10.099609,0 A 0.45145663,0.45145663 0 0 1 21.451172,36.052734 C 21.268949,34.50384 20.366883,33.503929 19.267578,32.304688 a 0.45145663,0.45145663 0 0 1 -0.0293,-0.0332 c -0.588009,-0.784011 -1.201373,-1.503012 -1.820312,-2.533203 l -0.002,-0.002 c -8.56e-4,-0.0014 -0.0011,-0.0025 -0.002,-0.0039 -1.007254,-1.612144 -1.886276,-3.221277 -2.554687,-4.570313 -0.669307,-1.350844 -1.123882,-2.415821 -1.294922,-3.042968 a 0.45145663,0.45145663 0 0 1 -0.0078,-0.03125 c -0.05341,-0.267047 -0.08399,-0.487278 -0.08399,-0.6875 0,-0.200222 -8.21e-4,-0.409335 0.208985,-0.619141 0.156606,-0.156607 0.331654,-0.197642 0.466797,-0.216797 0.135142,-0.01916 0.251856,-0.01563 0.351562,-0.01563 0.379126,0 0.656448,0.179905 0.982422,0.419922 0.325974,0.240017 0.676911,0.568581 1.03125,0.96875 0.708677,0.800338 1.432333,1.886537 1.90625,3.097656 a 0.45145663,0.45145663 0 0 1 0.03125,0.164063 l 0,0.800781 c 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 l 0,-15 c 0,-0.400314 0.140051,-0.778723 0.40625,-1.0449219 C 20.221277,9.6888792 20.599686,9.5488281 21,9.5488281 Z\\\" />\\r\\n</symbol>\\r\\n\\r\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSpriteSymbol = factory());\n}(this, (function () { 'use strict';\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nreturn BrowserSpriteSymbol;\n\n})));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSprite = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\n//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n// An array of all currently registered event handlers for a type\n                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberof mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar svg$1 = namespaces_1.svg;\nvar xlink$1 = namespaces_1.xlink;\n\nvar defaultConfig = {\n  attrs: ( obj = {\n    style: ['position: absolute', 'width: 0', 'height: 0'].join('; ')\n  }, obj[svg$1.name] = svg$1.uri, obj[xlink$1.name] = xlink$1.uri, obj )\n};\nvar obj;\n\nvar Sprite = function Sprite(config) {\n  this.config = deepmerge(defaultConfig, config || {});\n  this.symbols = [];\n};\n\n/**\n * Add new symbol. If symbol with the same id exists it will be replaced.\n * @param {SpriteSymbol} symbol\n * @return {boolean} `true` - symbol was added, `false` - replaced\n */\nSprite.prototype.add = function add (symbol) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var existing = this.find(symbol.id);\n\n  if (existing) {\n    symbols[symbols.indexOf(existing)] = symbol;\n    return false;\n  }\n\n  symbols.push(symbol);\n  return true;\n};\n\n/**\n * Remove symbol & destroy it\n * @param {string} id\n * @return {boolean} `true` - symbol was found & successfully destroyed, `false` - otherwise\n */\nSprite.prototype.remove = function remove (id) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var symbol = this.find(id);\n\n  if (symbol) {\n    symbols.splice(symbols.indexOf(symbol), 1);\n    symbol.destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * @param {string} id\n * @return {SpriteSymbol|null}\n */\nSprite.prototype.find = function find (id) {\n  return this.symbols.filter(function (s) { return s.id === id; })[0] || null;\n};\n\n/**\n * @param {string} id\n * @return {boolean}\n */\nSprite.prototype.has = function has (id) {\n  return this.find(id) !== null;\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.stringify = function stringify () {\n  var ref = this.config;\n    var attrs = ref.attrs;\n  var stringifiedSymbols = this.symbols.map(function (s) { return s.stringify(); }).join('');\n  return wrapInSvgString(stringifiedSymbols, attrs);\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSprite.prototype.destroy = function destroy () {\n  this.symbols.forEach(function (s) { return s.destroy(); });\n};\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nvar defaultConfig$1 = {\n  /**\n   * Should following options be automatically configured:\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @type {boolean}\n   */\n  autoConfigure: true,\n\n  /**\n   * Default mounting selector\n   * @type {string}\n   */\n  mountTo: 'body',\n\n  /**\n   * Fix disappearing SVG elements when <base href> exists.\n   * Executes when sprite mounted.\n   * @see http://stackoverflow.com/a/18265336/796152\n   * @see https://github.com/everdimension/angular-svg-base-fix\n   * @see https://github.com/angular/angular.js/issues/8934#issuecomment-56568466\n   * @type {boolean}\n   */\n  syncUrlsWithBaseTag: false,\n\n  /**\n   * Should sprite listen custom location change event\n   * @type {boolean}\n   */\n  listenLocationChangeEvent: true,\n\n  /**\n   * Custom window event name which should be emitted to update sprite urls\n   * @type {string}\n   */\n  locationChangeEvent: 'locationChange',\n\n  /**\n   * Emit location change event in Angular automatically\n   * @type {boolean}\n   */\n  locationChangeAngularEmitter: false,\n\n  /**\n   * Selector to find symbols usages when updating sprite urls\n   * @type {string}\n   */\n  usagesToUpdate: 'use[*|href]',\n\n  /**\n   * Fix Firefox bug when gradients and patterns don't work if they are within a symbol.\n   * Executes when sprite is rendered, but not mounted.\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=306674\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=353575\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1235364\n   * @type {boolean}\n   */\n  moveGradientsOutsideSymbol: false\n};\n\n/**\n * @param {*} arrayLike\n * @return {Array}\n */\nvar arrayFrom = function (arrayLike) {\n  return Array.prototype.slice.call(arrayLike, 0);\n};\n\nvar browser = {\n  isChrome: function () { return /chrome/i.test(navigator.userAgent); },\n  isFirefox: function () { return /firefox/i.test(navigator.userAgent); },\n\n  // https://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx\n  isIE: function () { return /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent); },\n  isEdge: function () { return /edge/i.test(navigator.userAgent); }\n};\n\n/**\n * @param {string} name\n * @param {*} data\n */\nvar dispatchEvent = function (name, data) {\n  var event = document.createEvent('CustomEvent');\n  event.initCustomEvent(name, false, false, data);\n  window.dispatchEvent(event);\n};\n\n/**\n * IE doesn't evaluate <style> tags in SVGs that are dynamically added to the page.\n * This trick will trigger IE to read and use any existing SVG <style> tags.\n * @see https://github.com/iconic/SVGInjector/issues/23\n * @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n *\n * @param {Element} node DOM Element to search <style> tags in\n * @return {Array<HTMLStyleElement>}\n */\nvar evalStylesIEWorkaround = function (node) {\n  var updatedNodes = [];\n\n  arrayFrom(node.querySelectorAll('style'))\n    .forEach(function (style) {\n      style.textContent += '';\n      updatedNodes.push(style);\n    });\n\n  return updatedNodes;\n};\n\n/**\n * @param {string} [url] If not provided - current URL will be used\n * @return {string}\n */\nvar getUrlWithoutFragment = function (url) {\n  return (url || window.location.href).split('#')[0];\n};\n\n/* global angular */\n/**\n * @param {string} eventName\n */\nvar locationChangeAngularEmitter = function (eventName) {\n  angular.module('ng').run(['$rootScope', function ($rootScope) {\n    $rootScope.$on('$locationChangeSuccess', function (e, newUrl, oldUrl) {\n      dispatchEvent(eventName, { oldUrl: oldUrl, newUrl: newUrl });\n    });\n  }]);\n};\n\nvar defaultSelector = 'linearGradient, radialGradient, pattern';\n\n/**\n * @param {Element} svg\n * @param {string} [selector]\n * @return {Element}\n */\nvar moveGradientsOutsideSymbol = function (svg, selector) {\n  if ( selector === void 0 ) selector = defaultSelector;\n\n  arrayFrom(svg.querySelectorAll('symbol')).forEach(function (symbol) {\n    arrayFrom(symbol.querySelectorAll(selector)).forEach(function (node) {\n      symbol.parentNode.insertBefore(node, symbol);\n    });\n  });\n  return svg;\n};\n\n/**\n * @param {NodeList} nodes\n * @param {Function} [matcher]\n * @return {Attr[]}\n */\nfunction selectAttributes(nodes, matcher) {\n  var attrs = arrayFrom(nodes).reduce(function (acc, node) {\n    if (!node.attributes) {\n      return acc;\n    }\n\n    var arrayfied = arrayFrom(node.attributes);\n    var matched = matcher ? arrayfied.filter(matcher) : arrayfied;\n    return acc.concat(matched);\n  }, []);\n\n  return attrs;\n}\n\n/**\n * @param {NodeList|Node} nodes\n * @param {boolean} [clone=true]\n * @return {string}\n */\n\nvar xLinkNS = namespaces_1.xlink.uri;\nvar xLinkAttrName = 'xlink:href';\n\n// eslint-disable-next-line no-useless-escape\nvar specialUrlCharsPattern = /[{}|\\\\\\^\\[\\]`\"<>]/g;\n\nfunction encoder(url) {\n  return url.replace(specialUrlCharsPattern, function (match) {\n    return (\"%\" + (match[0].charCodeAt(0).toString(16).toUpperCase()));\n  });\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * @param {NodeList} nodes\n * @param {string} startsWith\n * @param {string} replaceWith\n * @return {NodeList}\n */\nfunction updateReferences(nodes, startsWith, replaceWith) {\n  arrayFrom(nodes).forEach(function (node) {\n    var href = node.getAttribute(xLinkAttrName);\n    if (href && href.indexOf(startsWith) === 0) {\n      var newUrl = href.replace(startsWith, replaceWith);\n      node.setAttributeNS(xLinkNS, xLinkAttrName, newUrl);\n    }\n  });\n\n  return nodes;\n}\n\n/**\n * List of SVG attributes to update url() target in them\n */\nvar attList = [\n  'clipPath',\n  'colorProfile',\n  'src',\n  'cursor',\n  'fill',\n  'filter',\n  'marker',\n  'markerStart',\n  'markerMid',\n  'markerEnd',\n  'mask',\n  'stroke',\n  'style'\n];\n\nvar attSelector = attList.map(function (attr) { return (\"[\" + attr + \"]\"); }).join(',');\n\n/**\n * Update URLs in svg image (like `fill=\"url(...)\"`) and update referencing elements\n * @param {Element} svg\n * @param {NodeList} references\n * @param {string|RegExp} startsWith\n * @param {string} replaceWith\n * @return {void}\n *\n * @example\n * const sprite = document.querySelector('svg.sprite');\n * const usages = document.querySelectorAll('use');\n * updateUrls(sprite, usages, '#', 'prefix#');\n */\nvar updateUrls = function (svg, references, startsWith, replaceWith) {\n  var startsWithEncoded = encoder(startsWith);\n  var replaceWithEncoded = encoder(replaceWith);\n\n  var nodes = svg.querySelectorAll(attSelector);\n  var attrs = selectAttributes(nodes, function (ref) {\n    var localName = ref.localName;\n    var value = ref.value;\n\n    return attList.indexOf(localName) !== -1 && value.indexOf((\"url(\" + startsWithEncoded)) !== -1;\n  });\n\n  attrs.forEach(function (attr) { return attr.value = attr.value.replace(new RegExp(escapeRegExp(startsWithEncoded), 'g'), replaceWithEncoded); });\n  updateReferences(references, startsWithEncoded, replaceWithEncoded);\n};\n\n/**\n * Internal emitter events\n * @enum\n * @private\n */\nvar Events = {\n  MOUNT: 'mount',\n  SYMBOL_MOUNT: 'symbol_mount'\n};\n\nvar BrowserSprite = (function (Sprite$$1) {\n  function BrowserSprite(cfg) {\n    var this$1 = this;\n    if ( cfg === void 0 ) cfg = {};\n\n    Sprite$$1.call(this, deepmerge(defaultConfig$1, cfg));\n\n    var emitter = mitt();\n    this._emitter = emitter;\n    this.node = null;\n\n    var ref = this;\n    var config = ref.config;\n\n    if (config.autoConfigure) {\n      this._autoConfigure(cfg);\n    }\n\n    if (config.syncUrlsWithBaseTag) {\n      var baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\n      emitter.on(Events.MOUNT, function () { return this$1.updateUrls('#', baseUrl); });\n    }\n\n    var handleLocationChange = this._handleLocationChange.bind(this);\n    this._handleLocationChange = handleLocationChange;\n\n    // Provide way to update sprite urls externally via dispatching custom window event\n    if (config.listenLocationChangeEvent) {\n      window.addEventListener(config.locationChangeEvent, handleLocationChange);\n    }\n\n    // Emit location change event in Angular automatically\n    if (config.locationChangeAngularEmitter) {\n      locationChangeAngularEmitter(config.locationChangeEvent);\n    }\n\n    // After sprite mounted\n    emitter.on(Events.MOUNT, function (spriteNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(spriteNode);\n      }\n    });\n\n    // After symbol mounted into sprite\n    emitter.on(Events.SYMBOL_MOUNT, function (symbolNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(symbolNode.parentNode);\n      }\n\n      if (browser.isIE() || browser.isEdge()) {\n        evalStylesIEWorkaround(symbolNode);\n      }\n    });\n  }\n\n  if ( Sprite$$1 ) BrowserSprite.__proto__ = Sprite$$1;\n  BrowserSprite.prototype = Object.create( Sprite$$1 && Sprite$$1.prototype );\n  BrowserSprite.prototype.constructor = BrowserSprite;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  /**\n   * @return {boolean}\n   */\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * Automatically configure following options\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @param {Object} cfg\n   * @private\n   */\n  BrowserSprite.prototype._autoConfigure = function _autoConfigure (cfg) {\n    var ref = this;\n    var config = ref.config;\n\n    if (typeof cfg.syncUrlsWithBaseTag === 'undefined') {\n      config.syncUrlsWithBaseTag = typeof document.getElementsByTagName('base')[0] !== 'undefined';\n    }\n\n    if (typeof cfg.locationChangeAngularEmitter === 'undefined') {\n      config.locationChangeAngularEmitter = 'angular' in window;\n    }\n\n    if (typeof cfg.moveGradientsOutsideSymbol === 'undefined') {\n      config.moveGradientsOutsideSymbol = browser.isFirefox();\n    }\n  };\n\n  /**\n   * @param {Event} event\n   * @param {Object} event.detail\n   * @param {string} event.detail.oldUrl\n   * @param {string} event.detail.newUrl\n   * @private\n   */\n  BrowserSprite.prototype._handleLocationChange = function _handleLocationChange (event) {\n    var ref = event.detail;\n    var oldUrl = ref.oldUrl;\n    var newUrl = ref.newUrl;\n    this.updateUrls(oldUrl, newUrl);\n  };\n\n  /**\n   * Add new symbol. If symbol with the same id exists it will be replaced.\n   * If sprite already mounted - `symbol.mount(sprite.node)` will be called.\n   * @fires Events#SYMBOL_MOUNT\n   * @param {BrowserSpriteSymbol} symbol\n   * @return {boolean} `true` - symbol was added, `false` - replaced\n   */\n  BrowserSprite.prototype.add = function add (symbol) {\n    var sprite = this;\n    var isNewSymbol = Sprite$$1.prototype.add.call(this, symbol);\n\n    if (this.isMounted && isNewSymbol) {\n      symbol.mount(sprite.node);\n      this._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    }\n\n    return isNewSymbol;\n  };\n\n  /**\n   * Attach to existing DOM node\n   * @param {string|Element} target\n   * @return {Element|null} attached DOM Element. null if node to attach not found.\n   */\n  BrowserSprite.prototype.attach = function attach (target) {\n    var this$1 = this;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    /** @type Element */\n    var node = typeof target === 'string' ? document.querySelector(target) : target;\n    sprite.node = node;\n\n    // Already added symbols needs to be mounted\n    this.symbols.forEach(function (symbol) {\n      symbol.mount(sprite.node);\n      this$1._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    });\n\n    // Create symbols from existing DOM nodes, add and mount them\n    arrayFrom(node.querySelectorAll('symbol'))\n      .forEach(function (symbolNode) {\n        var symbol = BrowserSpriteSymbol.createFromExistingNode(symbolNode);\n        symbol.node = symbolNode; // hack to prevent symbol mounting to sprite when adding\n        sprite.add(symbol);\n      });\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  BrowserSprite.prototype.destroy = function destroy () {\n    var ref = this;\n    var config = ref.config;\n    var symbols = ref.symbols;\n    var _emitter = ref._emitter;\n\n    symbols.forEach(function (s) { return s.destroy(); });\n\n    _emitter.off('*');\n    window.removeEventListener(config.locationChangeEvent, this._handleLocationChange);\n\n    if (this.isMounted) {\n      this.unmount();\n    }\n  };\n\n  /**\n   * @fires Events#MOUNT\n   * @param {string|Element} [target]\n   * @param {boolean} [prepend=false]\n   * @return {Element|null} rendered sprite node. null if mount node not found.\n   */\n  BrowserSprite.prototype.mount = function mount (target, prepend) {\n    if ( target === void 0 ) target = this.config.mountTo;\n    if ( prepend === void 0 ) prepend = false;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    var mountNode = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = sprite.render();\n    this.node = node;\n\n    if (prepend && mountNode.childNodes[0]) {\n      mountNode.insertBefore(node, mountNode.childNodes[0]);\n    } else {\n      mountNode.appendChild(node);\n    }\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSprite.prototype.render = function render () {\n    return parse(this.stringify());\n  };\n\n  /**\n   * Detach sprite from the DOM\n   */\n  BrowserSprite.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  /**\n   * Update URLs in sprite and usage elements\n   * @param {string} oldUrl\n   * @param {string} newUrl\n   * @return {boolean} `true` - URLs was updated, `false` - sprite is not mounted\n   */\n  BrowserSprite.prototype.updateUrls = function updateUrls$1 (oldUrl, newUrl) {\n    if (!this.isMounted) {\n      return false;\n    }\n\n    var usages = document.querySelectorAll(this.config.usagesToUpdate);\n\n    updateUrls(\n      this.node,\n      usages,\n      ((getUrlWithoutFragment(oldUrl)) + \"#\"),\n      ((getUrlWithoutFragment(newUrl)) + \"#\")\n    );\n\n    return true;\n  };\n\n  Object.defineProperties( BrowserSprite.prototype, prototypeAccessors );\n\n  return BrowserSprite;\n}(Sprite));\n\nvar ready$1 = createCommonjsModule(function (module) {\n/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  { module.exports = definition(); }\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState);\n\n\n  if (!loaded)\n  { doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener);\n    loaded = 1;\n    while (listener = fns.shift()) { listener(); }\n  }); }\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn);\n  }\n\n});\n});\n\nvar spriteNodeId = '__SVG_SPRITE_NODE__';\nvar spriteGlobalVarName = '__SVG_SPRITE__';\nvar isSpriteExists = !!window[spriteGlobalVarName];\n\n// eslint-disable-next-line import/no-mutable-exports\nvar sprite;\n\nif (isSpriteExists) {\n  sprite = window[spriteGlobalVarName];\n} else {\n  sprite = new BrowserSprite({ attrs: { id: spriteNodeId } });\n  window[spriteGlobalVarName] = sprite;\n}\n\nvar loadSprite = function () {\n  /**\n   * Check for page already contains sprite node\n   * If found - attach to and reuse it's content\n   * If not - render and mount the new sprite\n   */\n  var existing = document.getElementById(spriteNodeId);\n\n  if (existing) {\n    sprite.attach(existing);\n  } else {\n    sprite.mount(document.body, true);\n  }\n};\n\nif (document.body) {\n  loadSprite();\n} else {\n  ready$1(loadSprite);\n}\n\nvar sprite$1 = sprite;\n\nreturn sprite$1;\n\n})));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","const Request = require('../../../Common/Request');\r\n\r\nmodule.exports = function (options) {\r\n    const _data = {regions:[]};        \r\n    const _layerName = options.layer;\r\n\r\n    return {\r\n        isDirty: false,\r\n        get data() { return _data },\r\n        set data(value) { _data = value; },\r\n        update: function () {\r\n            const thisModel = this;\r\n            return Promise.resolve().then(()=>{\r\n                if (thisModel.isDirty)\r\n                {\r\n                    thisModel.view.inProgress(true);\r\n                    return new Promise(resolve=>{ // Load\r\n                        setTimeout(()=>{\r\n                            _data.msg = [{txt:'HELLO'}];\r\n                            resolve();\r\n                        }, 2000);\r\n                    }).catch(console.log);\r\n                } // if (thisModel.isDirty)\r\n            }).then(()=>{               \r\n                    thisModel.view.repaint();\r\n                    thisModel.isDirty = false;\r\n            });\r\n\r\n        } // this.update\r\n    };\r\n}","// let PRODUCTION = false;\r\n// if (has('PRODUCTION'))\r\n//     PRODUCTION = true;\r\n\r\n\r\nmodule.exports = function (viewFactory) {\r\n    let _isReady = false,\r\n        _activeView,\r\n        _canvas = _div(null),\r\n        _views = viewFactory.create(),\r\n        _create = function () {\r\n            $(this.sidebarPane).append(_canvas);\r\n            $(_canvas).append(_views.map(v => v.frame));\r\n            _views[0].resize(true);\r\n            _views[0].show();\r\n            _activeView = _views[0];\r\n            _isReady = true;\r\n        };\r\n    const _returnInstance = {\r\n        show: function () {          \r\n            if (!_isReady)\r\n            {\r\n                _create.call(this);\r\n            }\r\n            else{       \r\n                _activeView && _activeView.show();\r\n            }\r\n        }\r\n    }\r\n    return _returnInstance;\r\n    /*\r\n    let _leftMenuBlock,\r\n        _canvas = _div(null),\r\n        _activeView,\r\n        _views = viewFactory.create(),\r\n        // _aisSearchView,\r\n        // _myFleetMembersView,\r\n        // _historyView,\r\n        //_gifLoader = '<img src=\"img/progress.gif\">',\r\n        _isReady = false,\r\n        _createTabs = function () {\r\n            let tabsTemplate = '<table class=\"ais_tabs\" border=0><tr>' +\r\n                '<td class=\"ais_tab dbsearch_tab unselectable\" unselectable=\"on\">' +\r\n                '<div>{{i \"AISSearch2.DbSearchTab\"}}</div>' +\r\n                '</td><td class=\"ais_tab scrsearch_tab unselectable\" unselectable=\"on\">' +\r\n                '<div>{{i \"AISSearch2.ScreenSearchTab\"}}</div>' +\r\n                '</td><td class=\"ais_tab myfleet_tab unselectable\" unselectable=\"on\">' + // ACTIVE\r\n                '<div>{{i \"AISSearch2.MyFleetTab\"}}</div>' +\r\n                '</td></tr></table>'\r\n\r\n            if (NOSIDEBAR)\r\n                $(_leftMenuBlock.workCanvas).append(_canvas);\r\n            else\r\n                $(this.sidebarPane).append(_canvas);\r\n\r\n            $(_canvas).append(Handlebars.compile(tabsTemplate));\r\n            $(_canvas).append(_views.map(v => v.frame));\r\n    \r\n            let tabs = $('.ais_tab', _canvas),\r\n                _this = this;           \r\n            _views.forEach((v,i) =>{\r\n                v.tab = tabs.eq(i);\r\n                v.resize(true);\r\n            }); \r\n            tabs.on('click', function () {\r\n                if (!$(this).is('.active')) {\r\n                    let target = this;\r\n                    tabs.each(function (i, tab) {\r\n                        if (!$(tab).is('.active') && target == tab) {\r\n                            $(tab).addClass('active');\r\n                            _views[i].show();\r\n                            _activeView = _views[i];\r\n                        }\r\n                        else {\r\n                            $(tab).removeClass('active');\r\n                            _views[i].hide();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            // Show the first tab\r\n            tabs.eq(0).removeClass('active').click();\r\n\r\n            if (NOSIDEBAR) {\r\n                _returnInstance.hide = function () {\r\n                    $(_leftMenuBlock.parentWorkCanvas).hide();\r\n                    nsGmx.leafletMap.removeLayer(highlight);\r\n                }\r\n\r\n                $(_leftMenuBlock.parentWorkCanvas)\r\n                    .attr('class', 'left_aispanel')\r\n                    .insertAfter('.layers-before');\r\n                var blockItem = _leftMenuBlock.leftPanelItem,\r\n                    blockTitle = $('.leftmenu-path', blockItem.panelCanvas);\r\n                var toggleTitle = function () {\r\n                    if (blockItem.isCollapsed())\r\n                        blockTitle.show();\r\n                    else\r\n                        blockTitle.hide();\r\n                }\r\n                $(blockItem).on('changeVisibility', toggleTitle);\r\n                toggleTitle();\r\n            }\r\n\r\n            // All has been done at first time\r\n            _isReady = true;\r\n        },\r\n\r\n    _returnInstance = {\r\n        show: function () {\r\n            let lmap = nsGmx.leafletMap;\r\n            if (NOSIDEBAR && !_leftMenuBlock)\r\n                _leftMenuBlock = new leftMenu();\r\n\r\n            if ((NOSIDEBAR && (!_leftMenuBlock.createWorkCanvas(\"aispanel\",\r\n                function () { lmap.gmxControlIconManager.get(this.menuId)._iconClick() },\r\n                { path: [_gtxt('AISSearch2.caption')] })\r\n            )) || (!_isReady)) // SIDEBAR\r\n            {\r\n                _createTabs.call(this);\r\n            }\r\n            else{\r\n                if (NOSIDEBAR){\r\n                    $(_leftMenuBlock.parentWorkCanvas)\r\n                    .insertAfter('.layers-before');\r\n                }            \r\n                _activeView && _activeView.show();\r\n            }\r\n        }\r\n    };\r\n    return _returnInstance;\r\n    */\r\n}\r\n\r\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","let _clean = function(){  \r\n    let scrollCont = this.container.find('.mCSB_container')\r\n    if (scrollCont[0]){\r\n        scrollCont.empty();\r\n    }\r\n    else{\r\n        this.container.empty();\r\n    }\r\n};\r\n\r\nconst BaseView = function (model) {\r\n    model.view = this;\r\n    this.model = model;\r\n    this.gifLoader = '<img src=\"img/progress.gif\">';\r\n};\r\n\r\nBaseView.prototype = function () {\r\n    return {\r\n        get isActive(){\r\n            return this.frame.is(\":visible\");\r\n        },\r\n        resize: function (clean) {\r\n            if(!this.frame)\r\n                return;\r\n\r\n//console.log($('.iconSidebarControl-pane').height(), this.topOffset, this.bottomOffset)\r\n            let h = $('.iconSidebarControl-pane').height() - this.topOffset - this.bottomOffset;\r\n            // if (this.startScreen){\r\n            //     this.startScreen.height(h);\r\n            //     this.container.css({ position:\"relative\", top: -h+\"px\" });\r\n            // }\r\n            this.container.height(h);\r\n\r\n            if (clean){\r\n                this.container.empty()\r\n            }\r\n        },\r\n        repaint: function(){\r\n            _clean.call(this); \r\n            \r\n            this.inProgress(false);\r\n\r\n            if (!this.model.data)\r\n                return;\r\n\r\n            let scrollCont = this.container.find('.mCSB_container'),\r\n            content = $(\r\n                //Handlebars.compile(this.tableTemplate)(this.model.data)\r\n                this.tableTemplate\r\n            ); \r\n\r\n            if (!scrollCont[0]) {\r\n                this.container.append(content).mCustomScrollbar(this.mcsbOptions);\r\n            }\r\n            else {\r\n                $(scrollCont).append(content);\r\n            }\r\n\r\n        },\r\n        show: function () {\r\n            if (!this.frame)\r\n                return;\r\n            this.frame.show();\r\n            this.model.update();\r\n        },\r\n        hide: function () {\r\n            this.frame.hide();\r\n        },\r\n        get isVisible(){\r\n            const rc = this.frame[0].getBoundingClientRect();\r\n            return rc.width!=0 && rc.height!=0;\r\n        }\r\n    }\r\n}();\r\n\r\nmodule.exports = BaseView;","// extracted by mini-css-extract-plugin","require(\"./TracksView.css\");\r\nrequire(\"../SearchControl.css\");\r\nrequire(\"../SelectControl.css\");\r\nconst BaseView = require('./BaseView.js'),\r\n      Request = require('../../../Common/Request'),\r\n      Calendar = require('../../../Common/Controls/Calendar'),\r\n      SearchControl = require('../../../Common/Controls/SearchControl'),\r\n      SelectControl = require('../../../Common/Controls/SelectControl');\r\n\r\nconst _searchLayer = 'EE5587AF1F70433AA878462272C0274C',\r\n      _selectLayers = [{name: 'FOS', id: 'ED043040A005429B8F46AAA682BE49C3'}, {name: 'AIS', id: '5790ADDFBDD64880BAC95DF13B8327EA'}];\r\n\r\nlet _thisView, _layer;\r\n\r\nconst MyCollectionView = function ({ model, layer }) {\r\n    _thisView = this;\r\n\r\n        BaseView.call(this, model);\r\n        this.frame = $(Handlebars.compile(`<div class=\"trackexport-view\">\r\n            <div class=\"header\">\r\n                <table border=0 class=\"instruments unselectable\">\r\n                <tr>\r\n                    <td class=\"search_input_container\"></td>\r\n                    <tr>\r\n                        <td class=\"select_container\"></td>\r\n                    </tr>\r\n                </tr>\r\n                </table> \r\n\r\n                <table border=0><tr>\r\n                <td><div class=\"calendar\"></div></td>\r\n                <td style=\"vertical-align: top\"><div class=\"reload\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"></path></svg></div></td>\r\n                <td style=\"vertical-align: top; width: 50px\"><div class=\"refresh\" style=\"margin: 10px 0 0 20px; display:none\">${this.gifLoader}</div></div></td>\r\n                </table></tr> \r\n\r\n                <table border=0 class=\"grid-header\">\r\n                <tr><td class=\"visibility-all\">\r\n                <svg style=\"display:block\"><use xlink:href=\"#icons_eye\"></use></svg>                \r\n                <svg style=\"display:none\"><use xlink:href=\"#icons_eye-off\"></use></svg>\r\n                </td>\r\n                <td>${_gtxt('TrackExport.reg_id')}</td>\r\n                <td>${_gtxt('TrackExport.reg_created')}</td>\r\n                <td>${_gtxt('TrackExport.reg_updated')}</td>\r\n                <td class=\"color-transparent\"><svg><use xlink:href=\"#icons_eye\"></use></td>\r\n                <td class=\"color-transparent\"><svg><use xlink:href=\"#icons_eye\"></use></td>\r\n                <td class=\"color-transparent\"><svg><use xlink:href=\"#icons_eye\"></use></td></tr>\r\n                </table> \r\n            </div> \r\n            <div class=\"grid\">\r\n\r\n            </div>\r\n            <div class=\"footer unselectable\">\r\n       \r\n            </div>\r\n            </div>`\r\n        )());\r\n        _addCalendar.call(this);\r\n\r\n        this.trackLayer = 0;\r\n        this.frame.find('.reload').on('click', (e=>{\r\n            if (this.mmsi){\r\nconsole.log(this.mmsi, this.trackLayer, this.calendar.dateInterval.get('dateBegin'));\r\n                this.model.isDirty = true;\r\n                this.inProgress(true);\r\n                this.show();\r\n            }\r\n        }).bind(this));\r\n\r\n        this.container = this.frame.find('.grid');\r\n        this.footer = this.frame.find('.footer');       \r\n        this.selectLayer = new SelectControl(this.frame.find('.select_container')[0], _selectLayers.map(l=>l.name), 0, selected=>{_thisView.trackLayer = _selectLayers[selected].id}); \r\n        this.selectLayer.dropDownList.classList.add('trackexport-view');     \r\n        this.searchInput = new SearchControl({tab:this.frame[0], container:this.frame.find('.search_input_container')[0], \r\n            searcher: {\r\n                searchpromise: function(params){\r\n                    var request =  `layer=${_searchLayer}&columns=[{\"Value\":\"vessel_name\"},{\"Value\":\"mmsi\"},{\"Value\":\"imo\"},{\"Value\":\"ts_pos_utc\"},{\"Value\":\"vessel_type\"},{\"Value\":\"longitude\"},{\"Value\":\"latitude\"},{\"Value\":\"source\"}]&orderby=vessel_name&${params[0].name}=${params[0].value}`;\r\n                    return Request.fetchRequest('/Plugins/AIS/SearchShip.ashx', request, 'POST');\r\n                },\r\n                parser: function(response){                \r\n                    if (response.Status && response.Status.toLowerCase()=='ok' && response.Result){                    \r\n                        let columns = response.Result.columns,\r\n                            values = response.Result.values;\r\n                        return values.map(v=>{\r\n                            let rv = {};\r\n                            columns.forEach((c, i)=>{rv[c] = v[i]});\r\n                            return rv;\r\n                        });\r\n                    }\r\n                    else{\r\n                        console.log(response);\r\n                        return [];\r\n                    }\r\n                }\r\n            },\r\n            callback:(v=>{\r\n                _thisView.mmsi = v.mmsi;\r\n            }).bind(this)\r\n        });\r\n\r\n        Object.defineProperty(this, \"tableTemplate\", {\r\n            get: function () {\r\n                return '<table border=0 class=\"grid\">' +\r\n                    this.model.data.regions.map(r => {\r\n                        if (r.page == _thisView.model.page)\r\n                            return `<tr id=\"${r.gmx_id}\">                \r\n                                <td class=\"visibility\">\r\n                                <svg style=\"display:block\"><use xlink:href=\"#icons_eye\"></use></svg>\r\n                                <svg style=\"display:none\"><use xlink:href=\"#icons_eye-off\"></use></svg></td>\r\n                                <td class=\"identity\">${r.id}</td>\r\n                                <td class=\"identity\">${r.DateTime}</td>\r\n                                <td>${r.DateTimeChange}</td>\r\n                                <td class=\"${r.StateColor} state\"><svg><use xlink:href=\"#icons_circle\"></use></svg></td>\r\n                                <td class=\"edit\"><svg><use xlink:href=\"#icons_pen\"></use></svg></td>\r\n                                <td class=\"show\"><svg><use xlink:href=\"#icons_target\"></use></svg></td>\r\n                            </tr>`;\r\n                        else\r\n                            return '';\r\n                    }).join('') +\r\n                    '</table>' +\r\n                    (this.model.data.msg ? this.model.data.msg.map(m => `<div class=\"msg\">${m.txt}</div>`).join('') : '');\r\n            }\r\n        });  \r\n\r\n        Object.defineProperty(this, \"topOffset\", {\r\n            get: function () { \r\n                return this.frame.find('.header')[0].getBoundingClientRect().height;\r\n            }\r\n        });  \r\n        Object.defineProperty(this, \"bottomOffset\", {\r\n            get: function () {             \r\n                return this.frame.find('.footer')[0].getBoundingClientRect().height;\r\n            }\r\n        }); \r\n    },  \r\n    _addCalendar = function(){            \r\n        const calendar = this.frame.find('.calendar')[0];\r\n        // walkaround with focus at first input in ui-dialog\r\n        calendar.innerHTML = ('<span class=\"ui-helper-hidden-accessible\"><input type=\"text\"/></span>');\r\n\r\n        const mapDateInterval = nsGmx.widgets.commonCalendar.getDateInterval(),\r\n              dateInterval = new nsGmx.DateInterval();\r\n    \r\n        dateInterval\r\n            .set('dateBegin', mapDateInterval.get('dateBegin'))\r\n            .set('dateEnd', mapDateInterval.get('dateEnd'))\r\n            .on('change', function (e) {\r\n\r\n            });\r\n\r\n        this.calendar = new Calendar({\r\n            dateInterval: dateInterval,\r\n            name: 'catalogInterval',\r\n            container: calendar,\r\n            dateMin: new Date(0, 0, 0),\r\n            dateMax: new Date(),\r\n            dateFormat: 'dd.mm.yy',\r\n            minimized: false,\r\n            showSwitcher: false\r\n        });\r\n\r\n        let tr = calendar.querySelector('tr:nth-of-type(1)');\r\n        tr.insertCell(2).innerHTML = '&nbsp; - &nbsp;';\r\n        tr.insertCell(6).innerHTML = \r\n        '<img class=\"default_date\" style=\"cursor:pointer; padding:10px\" title=\"'+_gtxt('TrackExport.calendar_today')+'\" src=\"plugins/AIS/AISSearch/svg/calendar.svg\">';\r\n        calendar.querySelector('.default_date').addEventListener('click', () => {\r\n            let db = nsGmx.DateInterval.getUTCDayBoundary(new Date());\r\n            dateInterval.set({\r\n                dateBegin: db.dateBegin,\r\n                dateEnd: db.dateEnd\r\n            });\r\n        });\r\n    },\r\n    _clean = function () {\r\n\r\n\r\n    };\r\n\r\nMyCollectionView.prototype = Object.create(BaseView.prototype);\r\n\r\nMyCollectionView.prototype.inProgress = function (state) {\r\n    let progress = this.frame.find('div.refresh');\r\n    if (state)\r\n        progress.show();\r\n    else\r\n        progress.hide();\r\n};\r\n\r\n// MyCollectionView.prototype.resize = function () { \r\n//     let h = $('.iconSidebarControl-pane').height() - this.frame.find('.instruments').outerHeight()\r\n//     - this.frame.find('.results').outerHeight() - this.frame.find('.menu').outerHeight();\r\n//     this.container.height(h+1);\r\n// };\r\n\r\nMyCollectionView.prototype.repaint = function () { \r\n    _clean.call(this);\r\n    BaseView.prototype.repaint.call(this);     \r\n};\r\n\r\nMyCollectionView.prototype.show = function () {\r\n    if (!this.frame)\r\n        return;\r\n\r\n    this.searchInput.focus();\r\n    BaseView.prototype.show.apply(this, arguments);\r\n};\r\n\r\nmodule.exports = MyCollectionView;\r\n","const MyCollectionView = require('./Views/TracksView'),\r\n      MyCollectionModel = require('./Models/TracksModel');\r\nmodule.exports = function (options) {   \r\n    const _mcm = new MyCollectionModel({layer: options.layer}),\r\n          _mcv = new MyCollectionView({model:_mcm, layer: options.layer}); \r\n    return {\r\n        create: function () {\r\n            return [_mcv];\r\n        }\r\n    };\r\n}","// extracted by mini-css-extract-plugin","require(\"./all.css\");\r\nrequire(\"../icons.svg\");\r\nrequire(\"./locale.js\");\r\n\r\nconst pluginName = 'TrackExportPlugin',\r\n      menuId = 'TrackExportPlugin',\r\n      toolbarIconId = null, \r\n      cssTable = 'TrackExportPlugin',\r\n      modulePath = gmxCore.getModulePath(pluginName);\r\n\r\nconst PluginPanel = require('./PluginPanel.js'),\r\n      ViewsFactory = require('./ViewsFactory');\r\n\r\nconst publicInterface = {\r\n    pluginName: pluginName,\r\n    afterViewer: function (params, map) {\r\n        const options = {\r\n                modulePath: modulePath,\r\n                layer: params.layer\r\n            },\r\n            viewFactory = new ViewsFactory(options),\r\n            pluginPanel = new PluginPanel(viewFactory);\r\n        pluginPanel.menuId = menuId;\r\n\r\n        let sidebar = window.iconSidebarWidget,\r\n        tab = window.createTabFunction({\r\n                    icon: \"TrackExport\", //menuId,\r\n                    active: \"hardnav-sidebar-icon\",\r\n                    inactive: \"hardnav-sidebar-icon\",\r\n                    hint: _gtxt('TrackExport.title')\r\n                })()\r\n\r\n        let tabDiv = tab.querySelector('.TrackExport');\r\n        pluginPanel.sidebarPane = sidebar.setPane(\r\n            menuId, {\r\n                createTab: ()=>{      \r\n                    !tab.querySelector('.TrackExport') && tab.append(tabDiv);  \r\n                     tab.querySelector('.TrackExport').innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1\" viewBox=\"0 0 24 24\" style=\"height: 18px;width: 18px;\">\r\n                     <path d=\"M 20 2 C 18.970152 2 18.141273 2.7807107 18.03125 3.78125 L 14.5625 4.78125 C 14.19654 4.3112749 13.641793 4 13 4 C 11.895431 4 11 4.8954305 11 6 C 11 7.1045695 11.895431 8 13 8 C 13.052792 8 13.104488 8.0040159 13.15625 8 L 16.53125 14.6875 C 16.440877 14.788724 16.349735 14.881869 16.28125 15 L 11.9375 14.46875 C 11.705723 13.620636 10.921625 13 10 13 C 8.8954305 13 8 13.895431 8 15 C 8 15.217462 8.0295736 15.428987 8.09375 15.625 L 4.96875 18.25 C 4.6825722 18.092012 4.3500149 18 4 18 C 2.8954305 18 2 18.895431 2 20 C 2 21.104569 2.8954305 22 4 22 C 5.1045695 22 6 21.104569 6 20 C 6 19.782538 5.9704264 19.571013 5.90625 19.375 L 9.03125 16.75 C 9.3174278 16.907988 9.6499851 17 10 17 C 10.754554 17 11.409413 16.585686 11.75 15.96875 L 16.0625 16.53125 C 16.294277 17.379364 17.078375 18 18 18 C 19.104569 18 20 17.104569 20 16 C 20 14.895431 19.104569 14 18 14 C 17.947208 14 17.895512 13.995984 17.84375 14 L 14.5 7.3125 C 14.761761 7.0130168 14.922918 6.6355416 14.96875 6.21875 L 18.4375 5.21875 C 18.80346 5.6887251 19.358207 6 20 6 C 21.104569 6 22 5.1045695 22 4 C 22 2.8954305 21.104569 2 20 2 z\" style=\"&#10;\"/>\r\n                 </svg>`;\r\n                    return tab;\r\n                }\r\n            }\r\n        )\r\n        sidebar.addEventListener('opened', function (e) {\r\n            if (sidebar._activeTabId == menuId)\r\n                pluginPanel.show();\r\n        });\r\n    }\r\n};\r\n\r\ngmxCore.addModule(pluginName, publicInterface, {\r\n    css: cssTable + '.css'\r\n});\r\n","\r\n    _translationsHash.addtext('rus', {\r\n        \"TrackExport.title\": \" \",\r\n        \r\n        \"TrackExport.page_lbl\": \"\",\r\n        \"TrackExport.choose_reg\": \" \",\r\n        \"TrackExport.create_reg\": \" \",\r\n        \"TrackExport.instr_hint\": \"       \",\r\n        \"TrackExport.attr_tbl\": \" \",\r\n        \"TrackExport.reg_id\": \"ID \",\r\n        \"TrackExport.reg_created\": \"\",\r\n        \"TrackExport.reg_updated\": \"\",\r\n        \"TrackExport.add_new\": \"  \",\r\n        \"TrackExport.add_copy\": \"  \",\r\n        \"TrackExport.no_origin\": \"\",\r\n        \"TrackExport.save\": \"\",\r\n        \"TrackExport.cancel\": \"\",\r\n        \"TrackExport.description_lbl\": \"\",\r\n        \"TrackExport.description_ttl\": \" \",\r\n        \"TrackExport.edit_description_lbl\": \"\",\r\n        \"TrackExport.edit_description_ttl\": \"  \",\r\n        \"TrackExport.calendar_today\": \"\",\r\n        \"TrackExport.layer_error\": ' '\r\n        \r\n    });\r\n    _translationsHash.addtext('eng', {\r\n        \"TrackExport.title\": \"Vessel trackss\",\r\n\r\n        \"TrackExport.page_lbl\": \"Page\",\r\n        \"TrackExport.choose_reg\": \"Choose region\",\r\n        \"TrackExport.create_reg\": \"Create region\",\r\n        \"TrackExport.instr_hint\": \"Draw a region or choose existing\",\r\n        \"TrackExport.attr_tbl\": \"Table of attrobutes\",\r\n        \"TrackExport.reg_id\": \"Region ID\",\r\n        \"TrackExport.reg_created\": \"Created\",\r\n        \"TrackExport.reg_updated\": \"Changed\",\r\n        \"TrackExport.add_new\": \"  \",\r\n        \"TrackExport.add_copy\": \"  \",\r\n        \"TrackExport.no_origin\": \"no\",\r\n        \"TrackExport.save\": \"Save\",\r\n        \"TrackExport.cancel\": \"Cancel\",\r\n        \"TrackExport.description_lbl\": \"Description\",\r\n        \"TrackExport.description_ttl\": \"Media description\",\r\n        \"TrackExport.edit_description_lbl\": \"Edit description\",\r\n        \"TrackExport.edit_description_ttl\": \"Edit media description\",\r\n        \"TrackExport.calendar_today\": \"today\",\r\n        \"TrackExport.layer_error\": 'Layer error'\r\n    });\r\n"],"sourceRoot":""}