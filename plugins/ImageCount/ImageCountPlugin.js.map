{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/svg-baker-runtime/browser-symbol.js","webpack:///./node_modules/svg-sprite-loader/runtime/browser-sprite.build.js","webpack:///./src/entry.js","webpack:///./src/locale.js","webpack:///./src/PluginPanel.js","webpack:///./src/ViewsFactory.js","webpack:///./src/Views/ImageCountView.js","webpack:///./icons.svg","webpack:///./src/Views/BaseView.js","webpack:///./src/Calendar.js","webpack:///./src/Models/ImageCountModel.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","e","window","SpriteSymbol","ref","id","viewBox","content","createCommonjsModule","fn","stringify","toString","destroy","this$1","forEach","prop","global","self","deepmerge","isMergeableObject","val","cloneIfNecessary","optionsArgument","clone","Array","isArray","defaultArrayMerge","target","source","destination","slice","indexOf","push","array","arrayMerge","keys","mergeObject","all","length","Error","reduce","prev","next","factory","namespaces_1","default","svg","uri","xlink","defaultAttrs","wrapInSvgString","attributes","attrs","map","attr","replace","join","objectToAttrsString","SpriteSymbol$$1","BrowserSpriteSymbol","apply","arguments","__proto__","constructor","prototypeAccessors","isMounted","node","createFromExistingNode","getAttribute","outerHTML","unmount","mount","mountTarget","document","querySelector","render","appendChild","hasImportNode","importNode","doc","DOMParser","parseFromString","documentElement","parse","childNodes","parentNode","removeChild","defineProperties","obj","svg$1","xlink$1","defaultConfig","style","Sprite","config","symbols","add","symbol","existing","find","remove","splice","filter","has","stringifiedSymbols","defaultConfig$1","autoConfigure","mountTo","syncUrlsWithBaseTag","listenLocationChangeEvent","locationChangeEvent","locationChangeAngularEmitter","usagesToUpdate","moveGradientsOutsideSymbol","arrayFrom","arrayLike","browser","test","navigator","userAgent","getUrlWithoutFragment","url","location","href","split","eventName","angular","run","$rootScope","$on","newUrl","oldUrl","data","event","createEvent","initCustomEvent","dispatchEvent","selector","querySelectorAll","insertBefore","xLinkNS","specialUrlCharsPattern","encoder","match","charCodeAt","toUpperCase","sprite","attList","attSelector","updateUrls","references","startsWith","replaceWith","startsWithEncoded","replaceWithEncoded","nodes","matcher","acc","arrayfied","matched","concat","selectAttributes","localName","RegExp","setAttributeNS","updateReferences","Events","BrowserSprite","Sprite$$1","cfg","emitter","on","type","handler","off","emit","evt","_emitter","_autoConfigure","baseUrl","getElementsByTagName","handleLocationChange","_handleLocationChange","addEventListener","spriteNode","symbolNode","updatedNodes","textContent","detail","isNewSymbol","attach","removeEventListener","prepend","mountNode","usages","ready$1","listener","fns","hack","loaded","doScroll","readyState","shift","setTimeout","loadSprite","getElementById","body","require","menuId","modulePath","gmxCore","getModulePath","PluginPanel","ViewsFactory","publicInterface","pluginName","afterViewer","params","options","layers","JSON","error","console","log","viewFactory","pluginPanel","sidebar","iconSidebarWidget","tab","createTabFunction","icon","hint","_gtxt","tabDiv","sidebarPane","setPane","createTab","append","innerHTML","_activeTabId","show","addModule","css","cssTable","_translationsHash","addtext","ImageCount","_activeView","_isReady","_canvas","$","_views","_create","v","frame","resize","View","Model","_m","_v","BaseView","Calendar","ImageCountView","model","_thisView","_drawPolygons","_borderPolygons","_selectBorder","click","polygon","k","container","system","text","inProgress","count","drawObjects","nsGmx","leafletMap","gmxDrawing","items","mapLayers","_layers","toggleClass","is","toLowerCase","disableEdit","feature","geometry","bp","dp","enableEdit","drawTable","b","result","sl","parent","rv","coordinates","_popup","_content","getBoundingClientRect","height","calendar","mapDateInterval","widgets","commonCalendar","getDateInterval","dateInterval","DateInterval","set","dateFormat","minimized","showSwitcher","tr","insertCell","db","getUTCDayBoundary","Date","dateBegin","dateEnd","interval","state","progress","hide","repaint","fitBounds","_bounds","_clean","scrollCont","empty","view","gifLoader","clean","h","topOffset","bottomOffset","mCustomScrollbar","mcsbOptions","update","rc","width","_toMidnight","toMidnight","_fromUTC","date","timeOffset","getTimezoneOffset","valueOf","_toUTC","_setMode","_curMode","_dateInputs","datepicker","isSimple","$el","toggle","_moreIcon","_dateBegin","_dateEnd","_selectFunc","_updateModel","activeInput","begin","end","MS_IN_DAY","_updateWidget","dayms","newDateEnd","isValid","newDateBegin","prevDateBegin","prevDateEnd","_shiftDates","delta","_dateMin","_dateMax","template","Handlebars","compile","extend","dateMax","dateMin","html","moreIconClass","moreIconTitle","forecast","onSelect","dateText","inst","input","showAnim","changeMonth","changeYear","minDate","maxDate","defaultDate","showOn","buttonImage","buttonImageOnly","canvas","_dataChanged","_data","isDirty","thisModel","Promise","resolve","then","_thisModel","b1","e1","b2","getFullYear","getMonth","getDate","getHours","getMinutes","e2","reject","WrapStyle","layer","query","a","toISOString","sendCrossDomainPostRequest","serverBase","response","Status","Result","values"],"mappings":"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","file":"ImageCountPlugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSpriteSymbol = factory());\n}(this, (function () { 'use strict';\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nreturn BrowserSpriteSymbol;\n\n})));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSprite = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\n//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n// An array of all currently registered event handlers for a type\n                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberof mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar svg$1 = namespaces_1.svg;\nvar xlink$1 = namespaces_1.xlink;\n\nvar defaultConfig = {\n  attrs: ( obj = {\n    style: ['position: absolute', 'width: 0', 'height: 0'].join('; '),\n    'aria-hidden': 'true'\n  }, obj[svg$1.name] = svg$1.uri, obj[xlink$1.name] = xlink$1.uri, obj )\n};\nvar obj;\n\nvar Sprite = function Sprite(config) {\n  this.config = deepmerge(defaultConfig, config || {});\n  this.symbols = [];\n};\n\n/**\n * Add new symbol. If symbol with the same id exists it will be replaced.\n * @param {SpriteSymbol} symbol\n * @return {boolean} `true` - symbol was added, `false` - replaced\n */\nSprite.prototype.add = function add (symbol) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var existing = this.find(symbol.id);\n\n  if (existing) {\n    symbols[symbols.indexOf(existing)] = symbol;\n    return false;\n  }\n\n  symbols.push(symbol);\n  return true;\n};\n\n/**\n * Remove symbol & destroy it\n * @param {string} id\n * @return {boolean} `true` - symbol was found & successfully destroyed, `false` - otherwise\n */\nSprite.prototype.remove = function remove (id) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var symbol = this.find(id);\n\n  if (symbol) {\n    symbols.splice(symbols.indexOf(symbol), 1);\n    symbol.destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * @param {string} id\n * @return {SpriteSymbol|null}\n */\nSprite.prototype.find = function find (id) {\n  return this.symbols.filter(function (s) { return s.id === id; })[0] || null;\n};\n\n/**\n * @param {string} id\n * @return {boolean}\n */\nSprite.prototype.has = function has (id) {\n  return this.find(id) !== null;\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.stringify = function stringify () {\n  var ref = this.config;\n    var attrs = ref.attrs;\n  var stringifiedSymbols = this.symbols.map(function (s) { return s.stringify(); }).join('');\n  return wrapInSvgString(stringifiedSymbols, attrs);\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSprite.prototype.destroy = function destroy () {\n  this.symbols.forEach(function (s) { return s.destroy(); });\n};\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nvar defaultConfig$1 = {\n  /**\n   * Should following options be automatically configured:\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @type {boolean}\n   */\n  autoConfigure: true,\n\n  /**\n   * Default mounting selector\n   * @type {string}\n   */\n  mountTo: 'body',\n\n  /**\n   * Fix disappearing SVG elements when <base href> exists.\n   * Executes when sprite mounted.\n   * @see http://stackoverflow.com/a/18265336/796152\n   * @see https://github.com/everdimension/angular-svg-base-fix\n   * @see https://github.com/angular/angular.js/issues/8934#issuecomment-56568466\n   * @type {boolean}\n   */\n  syncUrlsWithBaseTag: false,\n\n  /**\n   * Should sprite listen custom location change event\n   * @type {boolean}\n   */\n  listenLocationChangeEvent: true,\n\n  /**\n   * Custom window event name which should be emitted to update sprite urls\n   * @type {string}\n   */\n  locationChangeEvent: 'locationChange',\n\n  /**\n   * Emit location change event in Angular automatically\n   * @type {boolean}\n   */\n  locationChangeAngularEmitter: false,\n\n  /**\n   * Selector to find symbols usages when updating sprite urls\n   * @type {string}\n   */\n  usagesToUpdate: 'use[*|href]',\n\n  /**\n   * Fix Firefox bug when gradients and patterns don't work if they are within a symbol.\n   * Executes when sprite is rendered, but not mounted.\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=306674\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=353575\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1235364\n   * @type {boolean}\n   */\n  moveGradientsOutsideSymbol: false\n};\n\n/**\n * @param {*} arrayLike\n * @return {Array}\n */\nvar arrayFrom = function (arrayLike) {\n  return Array.prototype.slice.call(arrayLike, 0);\n};\n\nvar browser = {\n  isChrome: function () { return /chrome/i.test(navigator.userAgent); },\n  isFirefox: function () { return /firefox/i.test(navigator.userAgent); },\n\n  // https://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx\n  isIE: function () { return /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent); },\n  isEdge: function () { return /edge/i.test(navigator.userAgent); }\n};\n\n/**\n * @param {string} name\n * @param {*} data\n */\nvar dispatchEvent = function (name, data) {\n  var event = document.createEvent('CustomEvent');\n  event.initCustomEvent(name, false, false, data);\n  window.dispatchEvent(event);\n};\n\n/**\n * IE doesn't evaluate <style> tags in SVGs that are dynamically added to the page.\n * This trick will trigger IE to read and use any existing SVG <style> tags.\n * @see https://github.com/iconic/SVGInjector/issues/23\n * @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n *\n * @param {Element} node DOM Element to search <style> tags in\n * @return {Array<HTMLStyleElement>}\n */\nvar evalStylesIEWorkaround = function (node) {\n  var updatedNodes = [];\n\n  arrayFrom(node.querySelectorAll('style'))\n    .forEach(function (style) {\n      style.textContent += '';\n      updatedNodes.push(style);\n    });\n\n  return updatedNodes;\n};\n\n/**\n * @param {string} [url] If not provided - current URL will be used\n * @return {string}\n */\nvar getUrlWithoutFragment = function (url) {\n  return (url || window.location.href).split('#')[0];\n};\n\n/* global angular */\n/**\n * @param {string} eventName\n */\nvar locationChangeAngularEmitter = function (eventName) {\n  angular.module('ng').run(['$rootScope', function ($rootScope) {\n    $rootScope.$on('$locationChangeSuccess', function (e, newUrl, oldUrl) {\n      dispatchEvent(eventName, { oldUrl: oldUrl, newUrl: newUrl });\n    });\n  }]);\n};\n\nvar defaultSelector = 'linearGradient, radialGradient, pattern, mask, clipPath';\n\n/**\n * @param {Element} svg\n * @param {string} [selector]\n * @return {Element}\n */\nvar moveGradientsOutsideSymbol = function (svg, selector) {\n  if ( selector === void 0 ) selector = defaultSelector;\n\n  arrayFrom(svg.querySelectorAll('symbol')).forEach(function (symbol) {\n    arrayFrom(symbol.querySelectorAll(selector)).forEach(function (node) {\n      symbol.parentNode.insertBefore(node, symbol);\n    });\n  });\n  return svg;\n};\n\n/**\n * @param {NodeList} nodes\n * @param {Function} [matcher]\n * @return {Attr[]}\n */\nfunction selectAttributes(nodes, matcher) {\n  var attrs = arrayFrom(nodes).reduce(function (acc, node) {\n    if (!node.attributes) {\n      return acc;\n    }\n\n    var arrayfied = arrayFrom(node.attributes);\n    var matched = matcher ? arrayfied.filter(matcher) : arrayfied;\n    return acc.concat(matched);\n  }, []);\n\n  return attrs;\n}\n\n/**\n * @param {NodeList|Node} nodes\n * @param {boolean} [clone=true]\n * @return {string}\n */\n\nvar xLinkNS = namespaces_1.xlink.uri;\nvar xLinkAttrName = 'xlink:href';\n\n// eslint-disable-next-line no-useless-escape\nvar specialUrlCharsPattern = /[{}|\\\\\\^\\[\\]`\"<>]/g;\n\nfunction encoder(url) {\n  return url.replace(specialUrlCharsPattern, function (match) {\n    return (\"%\" + (match[0].charCodeAt(0).toString(16).toUpperCase()));\n  });\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * @param {NodeList} nodes\n * @param {string} startsWith\n * @param {string} replaceWith\n * @return {NodeList}\n */\nfunction updateReferences(nodes, startsWith, replaceWith) {\n  arrayFrom(nodes).forEach(function (node) {\n    var href = node.getAttribute(xLinkAttrName);\n    if (href && href.indexOf(startsWith) === 0) {\n      var newUrl = href.replace(startsWith, replaceWith);\n      node.setAttributeNS(xLinkNS, xLinkAttrName, newUrl);\n    }\n  });\n\n  return nodes;\n}\n\n/**\n * List of SVG attributes to update url() target in them\n */\nvar attList = [\n  'clipPath',\n  'colorProfile',\n  'src',\n  'cursor',\n  'fill',\n  'filter',\n  'marker',\n  'markerStart',\n  'markerMid',\n  'markerEnd',\n  'mask',\n  'stroke',\n  'style'\n];\n\nvar attSelector = attList.map(function (attr) { return (\"[\" + attr + \"]\"); }).join(',');\n\n/**\n * Update URLs in svg image (like `fill=\"url(...)\"`) and update referencing elements\n * @param {Element} svg\n * @param {NodeList} references\n * @param {string|RegExp} startsWith\n * @param {string} replaceWith\n * @return {void}\n *\n * @example\n * const sprite = document.querySelector('svg.sprite');\n * const usages = document.querySelectorAll('use');\n * updateUrls(sprite, usages, '#', 'prefix#');\n */\nvar updateUrls = function (svg, references, startsWith, replaceWith) {\n  var startsWithEncoded = encoder(startsWith);\n  var replaceWithEncoded = encoder(replaceWith);\n\n  var nodes = svg.querySelectorAll(attSelector);\n  var attrs = selectAttributes(nodes, function (ref) {\n    var localName = ref.localName;\n    var value = ref.value;\n\n    return attList.indexOf(localName) !== -1 && value.indexOf((\"url(\" + startsWithEncoded)) !== -1;\n  });\n\n  attrs.forEach(function (attr) { return attr.value = attr.value.replace(new RegExp(escapeRegExp(startsWithEncoded), 'g'), replaceWithEncoded); });\n  updateReferences(references, startsWithEncoded, replaceWithEncoded);\n};\n\n/**\n * Internal emitter events\n * @enum\n * @private\n */\nvar Events = {\n  MOUNT: 'mount',\n  SYMBOL_MOUNT: 'symbol_mount'\n};\n\nvar BrowserSprite = (function (Sprite$$1) {\n  function BrowserSprite(cfg) {\n    var this$1 = this;\n    if ( cfg === void 0 ) cfg = {};\n\n    Sprite$$1.call(this, deepmerge(defaultConfig$1, cfg));\n\n    var emitter = mitt();\n    this._emitter = emitter;\n    this.node = null;\n\n    var ref = this;\n    var config = ref.config;\n\n    if (config.autoConfigure) {\n      this._autoConfigure(cfg);\n    }\n\n    if (config.syncUrlsWithBaseTag) {\n      var baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\n      emitter.on(Events.MOUNT, function () { return this$1.updateUrls('#', baseUrl); });\n    }\n\n    var handleLocationChange = this._handleLocationChange.bind(this);\n    this._handleLocationChange = handleLocationChange;\n\n    // Provide way to update sprite urls externally via dispatching custom window event\n    if (config.listenLocationChangeEvent) {\n      window.addEventListener(config.locationChangeEvent, handleLocationChange);\n    }\n\n    // Emit location change event in Angular automatically\n    if (config.locationChangeAngularEmitter) {\n      locationChangeAngularEmitter(config.locationChangeEvent);\n    }\n\n    // After sprite mounted\n    emitter.on(Events.MOUNT, function (spriteNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(spriteNode);\n      }\n    });\n\n    // After symbol mounted into sprite\n    emitter.on(Events.SYMBOL_MOUNT, function (symbolNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(symbolNode.parentNode);\n      }\n\n      if (browser.isIE() || browser.isEdge()) {\n        evalStylesIEWorkaround(symbolNode);\n      }\n    });\n  }\n\n  if ( Sprite$$1 ) BrowserSprite.__proto__ = Sprite$$1;\n  BrowserSprite.prototype = Object.create( Sprite$$1 && Sprite$$1.prototype );\n  BrowserSprite.prototype.constructor = BrowserSprite;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  /**\n   * @return {boolean}\n   */\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * Automatically configure following options\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @param {Object} cfg\n   * @private\n   */\n  BrowserSprite.prototype._autoConfigure = function _autoConfigure (cfg) {\n    var ref = this;\n    var config = ref.config;\n\n    if (typeof cfg.syncUrlsWithBaseTag === 'undefined') {\n      config.syncUrlsWithBaseTag = typeof document.getElementsByTagName('base')[0] !== 'undefined';\n    }\n\n    if (typeof cfg.locationChangeAngularEmitter === 'undefined') {\n        config.locationChangeAngularEmitter = typeof window.angular !== 'undefined';\n    }\n\n    if (typeof cfg.moveGradientsOutsideSymbol === 'undefined') {\n      config.moveGradientsOutsideSymbol = browser.isFirefox();\n    }\n  };\n\n  /**\n   * @param {Event} event\n   * @param {Object} event.detail\n   * @param {string} event.detail.oldUrl\n   * @param {string} event.detail.newUrl\n   * @private\n   */\n  BrowserSprite.prototype._handleLocationChange = function _handleLocationChange (event) {\n    var ref = event.detail;\n    var oldUrl = ref.oldUrl;\n    var newUrl = ref.newUrl;\n    this.updateUrls(oldUrl, newUrl);\n  };\n\n  /**\n   * Add new symbol. If symbol with the same id exists it will be replaced.\n   * If sprite already mounted - `symbol.mount(sprite.node)` will be called.\n   * @fires Events#SYMBOL_MOUNT\n   * @param {BrowserSpriteSymbol} symbol\n   * @return {boolean} `true` - symbol was added, `false` - replaced\n   */\n  BrowserSprite.prototype.add = function add (symbol) {\n    var sprite = this;\n    var isNewSymbol = Sprite$$1.prototype.add.call(this, symbol);\n\n    if (this.isMounted && isNewSymbol) {\n      symbol.mount(sprite.node);\n      this._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    }\n\n    return isNewSymbol;\n  };\n\n  /**\n   * Attach to existing DOM node\n   * @param {string|Element} target\n   * @return {Element|null} attached DOM Element. null if node to attach not found.\n   */\n  BrowserSprite.prototype.attach = function attach (target) {\n    var this$1 = this;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    /** @type Element */\n    var node = typeof target === 'string' ? document.querySelector(target) : target;\n    sprite.node = node;\n\n    // Already added symbols needs to be mounted\n    this.symbols.forEach(function (symbol) {\n      symbol.mount(sprite.node);\n      this$1._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    });\n\n    // Create symbols from existing DOM nodes, add and mount them\n    arrayFrom(node.querySelectorAll('symbol'))\n      .forEach(function (symbolNode) {\n        var symbol = BrowserSpriteSymbol.createFromExistingNode(symbolNode);\n        symbol.node = symbolNode; // hack to prevent symbol mounting to sprite when adding\n        sprite.add(symbol);\n      });\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  BrowserSprite.prototype.destroy = function destroy () {\n    var ref = this;\n    var config = ref.config;\n    var symbols = ref.symbols;\n    var _emitter = ref._emitter;\n\n    symbols.forEach(function (s) { return s.destroy(); });\n\n    _emitter.off('*');\n    window.removeEventListener(config.locationChangeEvent, this._handleLocationChange);\n\n    if (this.isMounted) {\n      this.unmount();\n    }\n  };\n\n  /**\n   * @fires Events#MOUNT\n   * @param {string|Element} [target]\n   * @param {boolean} [prepend=false]\n   * @return {Element|null} rendered sprite node. null if mount node not found.\n   */\n  BrowserSprite.prototype.mount = function mount (target, prepend) {\n    if ( target === void 0 ) target = this.config.mountTo;\n    if ( prepend === void 0 ) prepend = false;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    var mountNode = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = sprite.render();\n    this.node = node;\n\n    if (prepend && mountNode.childNodes[0]) {\n      mountNode.insertBefore(node, mountNode.childNodes[0]);\n    } else {\n      mountNode.appendChild(node);\n    }\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSprite.prototype.render = function render () {\n    return parse(this.stringify());\n  };\n\n  /**\n   * Detach sprite from the DOM\n   */\n  BrowserSprite.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  /**\n   * Update URLs in sprite and usage elements\n   * @param {string} oldUrl\n   * @param {string} newUrl\n   * @return {boolean} `true` - URLs was updated, `false` - sprite is not mounted\n   */\n  BrowserSprite.prototype.updateUrls = function updateUrls$1 (oldUrl, newUrl) {\n    if (!this.isMounted) {\n      return false;\n    }\n\n    var usages = document.querySelectorAll(this.config.usagesToUpdate);\n\n    updateUrls(\n      this.node,\n      usages,\n      ((getUrlWithoutFragment(oldUrl)) + \"#\"),\n      ((getUrlWithoutFragment(newUrl)) + \"#\")\n    );\n\n    return true;\n  };\n\n  Object.defineProperties( BrowserSprite.prototype, prototypeAccessors );\n\n  return BrowserSprite;\n}(Sprite));\n\nvar ready$1 = createCommonjsModule(function (module) {\n/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  { module.exports = definition(); }\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState);\n\n\n  if (!loaded)\n  { doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener);\n    loaded = 1;\n    while (listener = fns.shift()) { listener(); }\n  }); }\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn);\n  }\n\n});\n});\n\nvar spriteNodeId = '__SVG_SPRITE_NODE__';\nvar spriteGlobalVarName = '__SVG_SPRITE__';\nvar isSpriteExists = !!window[spriteGlobalVarName];\n\n// eslint-disable-next-line import/no-mutable-exports\nvar sprite;\n\nif (isSpriteExists) {\n  sprite = window[spriteGlobalVarName];\n} else {\n  sprite = new BrowserSprite({ attrs: { id: spriteNodeId } });\n  window[spriteGlobalVarName] = sprite;\n}\n\nvar loadSprite = function () {\n  /**\n   * Check for page already contains sprite node\n   * If found - attach to and reuse it's content\n   * If not - render and mount the new sprite\n   */\n  var existing = document.getElementById(spriteNodeId);\n\n  if (existing) {\n    sprite.attach(existing);\n  } else {\n    sprite.mount(document.body, true);\n  }\n};\n\nif (document.body) {\n  loadSprite();\n} else {\n  ready$1(loadSprite);\n}\n\nvar sprite$1 = sprite;\n\nreturn sprite$1;\n\n})));\n","require(\"./all.css\");\r\nrequire(\"./locale.js\");\r\n\r\nconst pluginName = 'ImageCountPlugin',\r\n      menuId = 'ImageCountPlugin',\r\n      toolbarIconId = null, \r\n      cssTable = 'ImageCountPlugin',\r\n      modulePath = gmxCore.getModulePath(pluginName);\r\n\r\nconst PluginPanel = require('./PluginPanel.js'),\r\n      ViewsFactory = require('./ViewsFactory');\r\n\r\nconst publicInterface = {\r\n    pluginName: pluginName,\r\n    afterViewer: function (params, map) {\r\n        const options = {\r\n                modulePath: modulePath,\r\n                layers: {\r\n                    '9132DB4583944CC2836D2C416B4DC093':'Sentinel-1', \r\n                    '61F54CF35EC44536B527A2168BE6F5A0':'Sentinel-2',\r\n                    'D8CFA7D3A7AA4549B728B37010C051A2':'Landsat-8'\r\n                }\r\n            };\r\n\r\n        if (params.layers){\r\n            try{\r\n                options.layers = JSON.parse(params.layers);\r\n            }\r\n            catch(error){\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        const\r\n            viewFactory = new ViewsFactory(options),\r\n            pluginPanel = new PluginPanel(viewFactory);\r\n\r\n        pluginPanel.menuId = menuId;\r\n\r\n        let sidebar = window.iconSidebarWidget,\r\n        tab = window.createTabFunction({\r\n                    icon: \"ImageCount\", //menuId,\r\n                    //active: \"hardnav-sidebar-icon\",\r\n                    //inactive: \"hardnav-sidebar-icon\",\r\n                    hint: _gtxt('ImageCount.title')\r\n                })()\r\n\r\n        let tabDiv = tab.querySelector('.ImageCount');\r\n        pluginPanel.sidebarPane = sidebar.setPane(\r\n            menuId, {\r\n                createTab: ()=>{      \r\n                    !tab.querySelector('.ImageCount') && tab.append(tabDiv);  \r\n                     tab.querySelector('.ImageCount').innerHTML = `<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" class=\"svgIcon\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                     <path d=\"M11.0181 0H0.847543C0.379458 0 0 0.379203 0 0.846973V13.5516C0 14.0193 0.379458 14.3985 0.847543 14.3985H11.0181C11.4861 14.3985 11.8656 14.0193 11.8656 13.5516V0.846973C11.8656 0.379203 11.4861 0 11.0181 0Z\"></path>\r\n                     <path d=\"M19.374 6.071L13.815 4.56763L13.3726 6.20313L18.1188 7.48545L15.238 18.1133L5.42009 15.4614L4.97852 17.0969L15.6152 19.9707C15.7226 19.9997 15.8348 20.0072 15.9451 19.9929C16.0555 19.9785 16.162 19.9426 16.2585 19.8872C16.355 19.8317 16.4396 19.7578 16.5075 19.6697C16.5754 19.5816 16.6253 19.481 16.6543 19.3736L19.9707 7.10939C20.0293 6.89263 19.9994 6.66148 19.8875 6.46676C19.7756 6.27205 19.5909 6.1297 19.374 6.071Z\"></path>\r\n                     </svg>`;\r\n                    return tab;\r\n                }\r\n            }\r\n        )\r\n        sidebar.addEventListener('opened', function (e) {\r\n            if (sidebar._activeTabId == menuId)\r\n                pluginPanel.show();\r\n        });\r\n    }\r\n};\r\n\r\ngmxCore.addModule(pluginName, publicInterface, {\r\n    css: cssTable + '.css'\r\n});\r\n","\r\n    _translationsHash.addtext('rus', {\r\n        ImageCount: {\r\n            \"title\": \"Подсчет снимков\",\r\n            \"Polygon\": \"Многоугольник\",\r\n            \"MultiPolygon\": \"Многоугольники\",\r\n            \"vertices\": \"вершин\",\r\n            \"SelectBorder\": \"Выберите контур территории клиента\",\r\n            \"SelectSystem\": \"Выберите съемочную систему\",\r\n            \"SelectInterval\": \"Укажите предполагаемый срок подписки\",\r\n            \"calendar_today\": \"сегодня\",\r\n            \"NoSystem\": \"Система не выбрана\",\r\n            \"NoBorder\": \"Район не задан\",\r\n            \"Count\":\"РАССЧИТАТЬ\",\r\n            \"Result\": \"Количество сцен съемки\",\r\n            \"error\": \"Ошибка!\"\r\n        }\r\n        \r\n    });\r\n    _translationsHash.addtext('eng', {\r\n        ImageCount: {\r\n            \"title\": \"Image Count\",\r\n            \"Polygon\": \"Polygon\",\r\n            \"MultiPolygon\": \"Polygons\",\r\n            \"vertices\": \"vertices\",\r\n            \"SelectBorder\": \"Select client territory border\",\r\n            \"SelectSystem\": \"Select system\",\r\n            \"SelectInterval\": \"Select subscription interval\",\r\n            \"calendar_today\": \"today\",\r\n            \"NoSystem\": \"No system\",\r\n            \"NoBorder\": \"No border\",\r\n            \"Count\":\"COUNT\",\r\n            \"Result\": \"Images found\",\r\n            \"error\": \"Error!\"\r\n        }\r\n    });\r\n","module.exports = function (viewFactory) {\r\n    let _isReady = false,\r\n        _activeView,\r\n        _canvas = $('<div>')[0],\r\n        _views = viewFactory.create(),\r\n        _create = function () {\r\n            $(this.sidebarPane).append(_canvas);\r\n            $(_canvas).append(_views.map(v => {\r\n                return v.frame\r\n            }));\r\n            _views[0].resize(true);\r\n            _views[0].show();\r\n            _activeView = _views[0];\r\n            _isReady = true;\r\n        };\r\n    const _returnInstance = {\r\n        show: function () {          \r\n            if (!_isReady)\r\n            {\r\n                _create.call(this);\r\n            }\r\n            else{       \r\n                _activeView && _activeView.show();\r\n            }\r\n        }\r\n    }\r\n    return _returnInstance;\r\n}\r\n\r\n","const View = require('./Views/ImageCountView'),\r\n      Model = require('./Models/ImageCountModel');\r\nmodule.exports = function (options) {   \r\n    const _m = new Model(),\r\n          _v = new View(options.layers, _m); \r\n    return {\r\n        create: function () {\r\n            return [_v];\r\n        }\r\n    };\r\n}","require(\"../../icons.svg\");\r\nrequire(\"./ImageCountView.css\");\r\nconst BaseView = require('./BaseView.js')\r\n      Calendar = require('../Calendar');\r\nconst ImageCountView = function (layers, model) {\r\n    const \r\n    _thisView = this,\r\n    _drawPolygons = [],\r\n    _borderPolygons = [],\r\n    _addCalendar = function(){            \r\n        const calendar = this.frame.find('.calendar')[0];\r\n        // walkaround with focus at first input in ui-dialog\r\n        calendar.innerHTML = ('<span class=\"ui-helper-hidden-accessible\"><input type=\"text\"/></span>');\r\n\r\n        const mapDateInterval = nsGmx.widgets.commonCalendar.getDateInterval(),\r\n              dateInterval = new nsGmx.DateInterval(),\r\n              msd = 24*3600000;\r\n    \r\n        dateInterval\r\n            .set('dateBegin', mapDateInterval.get('dateBegin'))\r\n            .set('dateEnd', mapDateInterval.get('dateEnd'));\r\n//             .on('change', function (e) {\r\n//                 //let d = new Date(e.attributes.dateEnd.getTime() - msd*7);\r\n//                 //_thisView.calendar._dateInputs.datepicker('option', 'minDate', d);\r\n//                 // if (e.attributes.dateBegin.getTime()<d.getTime())\r\n//                 //     e.attributes.dateBegin = new Date(d.getTime());\r\n// //console.log(_thisView.calendar.dateInterval.get('dateBegin'), _thisView.calendar.dateInterval.get('dateEnd'))\r\n//             });\r\n\r\n        this.calendar = new Calendar({\r\n            dateInterval: dateInterval,\r\n            name: 'catalogInterval',\r\n            container: calendar,\r\n            //dateMin: new Date(nsGmx.DateInterval.getUTCDayBoundary().dateBegin.getTime() - msd*6),\r\n            //dateMax: new Date(),\r\n            dateFormat: 'dd.mm.yy',\r\n            minimized: false,\r\n            showSwitcher: false\r\n        });\r\n\r\n        let tr = calendar.querySelector('tr:nth-of-type(1)');\r\n        tr.insertCell(2).innerHTML = '&nbsp; - &nbsp;';\r\n        tr.insertCell(6).innerHTML = \r\n        '<img class=\"default_date\" style=\"cursor:pointer; padding:10px\" title=\"'+_gtxt('ImageCount.calendar_today')+'\" src=\"plugins/AIS/AISSearch/svg/calendar.svg\">';\r\n        calendar.querySelector('.default_date').addEventListener('click', () => {\r\n            let db = nsGmx.DateInterval.getUTCDayBoundary(new Date());\r\n            dateInterval.set({\r\n                dateBegin: db.dateBegin,\r\n                dateEnd: db.dateEnd\r\n            });\r\n        });\r\n    },\r\n    _selectBorder = function(e){\r\n//console.log(e.target)\r\n        _thisView.frame.find('.choose').click();\r\n        _thisView.model.polygon = e.target;\r\n    };\r\n    BaseView.call(this, model);\r\n\r\n        this.frame = $(`<div class=\"imagecount-view\">\r\n        <div class=\"header\">\r\n        <div class=\"select-label label1\">${_gtxt('ImageCount.SelectSystem')}</div>\r\n        <div class=\"system\">\r\n        ${Object.keys(layers).map(k=>`<label><input id=\"system\" name=\"system\" type=\"radio\" value=\"${k}\">${layers[k]}</label><br>`).join('')}\r\n        </div>\r\n        <div class=\"but choose\">${_gtxt('ImageCount.SelectBorder')}<svg><use xlink:href=\"#icons_selectreg\"></use></svg></div>\r\n        \r\n        <style>#ui-datepicker-div .ui-datepicker-next {height: 1.8em !important;}#ui-datepicker-div .ui-datepicker-next span.ui-icon.ui-icon-circle-triangle-e {background: url(img/arrows.png) no-repeat 0 -18px !important;}#ui-datepicker-div .ui-datepicker-next.ui-state-hover span.ui-icon.ui-icon-circle-triangle-e {background: url(img/arrows.png) no-repeat 0 -38px !important;}</style>    \r\n \r\n        <div class=\"select-label label2\">${_gtxt('ImageCount.SelectInterval')}</div>       \r\n        <div class=\"calendar\" style=\"padding: 0px 0 20px 20px;\"></div>      \r\n        <div><div class=\"but-count\">${_gtxt(\"ImageCount.Count\")}</div></div>\r\n        </div>\r\n        <div class=\"results\"></div>\r\n        </div>`);\r\n        this.container = this.frame.find('.results');\r\n        this.frame.find('.system input').on('click', function(e){\r\n            _thisView.model.system = e.target.value;\r\n        })\r\n        this.frame.find('.but-count').on('click', function(e){\r\n            _thisView.container.find('.params .count').text('');\r\n            _thisView.inProgress(true);\r\n            _thisView.model.count()\r\n            .catch(error=>{\r\n                _thisView.inProgress(false);\r\n                if (error=='polygon' || error=='system')\r\n                    _thisView.container.find(`.exclamation`).show();\r\n                console.log(error)\r\n            });\r\n        })\r\n        this.frame.find('.choose').on('click', e=>{\r\n            const drawObjects  = nsGmx.leafletMap.gmxDrawing.items, mapLayers = nsGmx.leafletMap._layers;\r\n            $(e.target).toggleClass('active');\r\n            if ($(e.target).is('.active')){\r\n                _drawPolygons.length = 0;\r\n                _borderPolygons.length = 0;\r\n                drawObjects.forEach(l=>{\r\n                    var t = l.options.type.toLowerCase(); \r\n                    if(t=='rectangle'||t=='polygon'){  \r\n                        _drawPolygons.push(l);\r\n                        l.disableEdit();\r\n                    }\r\n                });                      \r\n//console.log(_drawPolygons)\r\n                Object.keys(mapLayers).forEach(k=>{\r\n                    var l = mapLayers[k], t = l.feature && l.feature.geometry.type.toLowerCase(); \r\n                    if (t=='polygon' || t=='multipolygon' || t=='rectangle') { \r\n                        mapLayers[k].on('click', _selectBorder);\r\n                        _borderPolygons.push(mapLayers[k]);             \r\n                    }\r\n                });\r\n//console.log(_borderPolygons)\r\n            }\r\n            else{\r\n                _borderPolygons.forEach(bp=>bp.off('click', _selectBorder));\r\n                _drawPolygons.forEach(dp=>dp.enableEdit());\r\n                _drawPolygons.length = 0;\r\n                _borderPolygons.length = 0;           \r\n            }\r\n\r\n        });\r\n        this.drawTable = function(d) {\r\n                let p = d.polygon, \r\n                    b = this.frame.find('.CalendarWidget-dateBegin').val(), e=this.frame.find('.CalendarWidget-dateEnd').val(),\r\n                    r = d.result,\r\n                    sl = this.frame.find('.system input:checked').parent(),\r\n                    rv = '<div class=\"params\">';\r\n                rv += `<div>${sl[0]?sl.text():_gtxt(\"ImageCount.NoSystem\")+' <span class=\"exclamation\">!</span>'}</div>`;    \r\n                if (p){\r\n                    const g = p.feature.geometry\r\n                    if (g.type=='Polygon')\r\n                    rv += `<div class=\"polygon\">${_gtxt('ImageCount.Polygon')}, ${_gtxt('ImageCount.vertices')}: ${g.coordinates[0].length-1}</div>`;\r\n                    else\r\n                    rv += `<div class=\"polygon\">${_gtxt('ImageCount.MultiPolygon')}: ${g.coordinates.length}</div>`;\r\n                    rv += `<div>${p._popup?p._popup._content.replace(/<br\\/?>[\\s\\S]+/i, ''):''}</div>`;\r\n                }\r\n                else\r\n                    rv += `<div>${_gtxt('ImageCount.NoBorder')} <span class=\"exclamation\">!</span></div>`;                                        \r\n                rv += `<div>${b} - ${e}</div>`; \r\n                if (r!==null){\r\n                    rv += `<div class=\"count\">${_gtxt('ImageCount.Result')}: ${r}</div>`; \r\n                }\r\n                rv += `<div class=\"icon-refresh-gif refresh\"></div>`;\r\n\r\n                return rv;\r\n        };  \r\n\r\n        Object.defineProperty(this, \"topOffset\", {\r\n            get: function () { \r\n                return this.frame.find('.header')[0] && this.frame.find('.header')[0].getBoundingClientRect().height;\r\n            }\r\n        });  \r\n        Object.defineProperty(this, \"bottomOffset\", {\r\n            get: function () {             \r\n                return 20;//this.frame.find('.footer')[0] && this.frame.find('.footer')[0].getBoundingClientRect().height;\r\n            }\r\n        }); \r\n\r\n        _addCalendar.call(this);\r\n        this.model.interval = this.calendar.dateInterval;\r\n    };\r\n\r\nImageCountView.prototype = Object.create(BaseView.prototype);\r\n\r\nImageCountView.prototype.inProgress = function (state) {\r\n    let progress = this.frame.find('div.refresh');\r\n    if (state){\r\n        progress.show();\r\n    }\r\n    else{\r\n        progress.hide();\r\n    }\r\n};\r\n\r\nImageCountView.prototype.repaint = function () { \r\n    //_clean.call(this);\r\n    BaseView.prototype.repaint.call(this); \r\n    this.container.find('.polygon').on('click', ()=>{\r\n        nsGmx.leafletMap.fitBounds(this.model.data.polygon._bounds);        \r\n    })   \r\n};\r\n\r\n// ImageCountView.prototype.show = function () {\r\n//     if (!this.frame)\r\n//         return;\r\n//     BaseView.prototype.show.apply(this, arguments);\r\n// };\r\n\r\nmodule.exports = ImageCountView;\r\n","import SpriteSymbol from \"./node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"./node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icons\",\n  \"use\": \"icons-usage\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" id=\\\"icons\\\">\\r\\n\\r\\n<symbol id=\\\"icons_arrow-left\\\" viewBox=\\\"0 0 20 20\\\" fill=\\\"none\\\">\\r\\n<path d=\\\"M18.3334 10H1.66669\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"10\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n<path d=\\\"M7.50002 15.8333L1.66669 9.99996L7.50002 4.16663\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"10\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n</symbol>\\r\\n<symbol id=\\\"icons_arrow-right\\\" viewBox=\\\"0 0 20 20\\\" fill=\\\"none\\\">\\r\\n<path d=\\\"M18.3334 10H1.66669\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"10\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" />\\r\\n<path d=\\\"M7.50002 15.8333L1.66669 9.99996L7.50002 4.16663\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"10\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" transform=\\\"rotate(180 10 10)\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_eye\\\" viewBox=\\\"4 4 16 16\\\" fill=\\\"none\\\">\\r\\n<path d=\\\"M11.93,7.28C8.87,7.28,6.1,9,4.05,11.88a0.69,0.69,0,0,0,0,.79c2,2.85,4.82,4.61,7.87,4.61s5.83-1.75,7.87-4.6a0.69,0.69,0,0,0,0-.79C17.75,9,15,7.28,11.93,7.28Zm0.22,8.52A3.45,3.45,0,0,1,8.57,12a3.46,3.46,0,0,1,3.14-3.29,3.45,3.45,0,0,1,3.58,3.75A3.47,3.47,0,0,1,12.14,15.8ZM12,14.17a1.9,1.9,0,1,1,1.69-1.77A1.85,1.85,0,0,1,12,14.17Z\\\" fill=\\\"currentColor\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_eye-off\\\" viewBox=\\\"4 4 16 16\\\" fill=\\\"none\\\">\\r\\n      <polygon points=\\\"18.68 20.13 4 5.38 5.32 4.13 20 18.87 18.68 20.13\\\" fill=\\\"currentColor\\\" />\\r\\n      <path fill=\\\"currentColor\\\" d=\\\"M12.06,8.77A3.42,3.42,0,0,1,15.26,12L18,14.72a13.33,13.33,0,0,0,1.81-2,0.69,0.69,0,0,0,0-.79C17.75,9,15,7.28,11.92,7.28a7.94,7.94,0,0,0-1.25.11Z\\\" />\\r\\n      <path fill=\\\"currentColor\\\" d=\\\"M12,14.17a1.83,1.83,0,0,0,1.58-1.26l-2.38-2.39a1.9,1.9,0,0,0-1.12,1.63A1.85,1.85,0,0,0,12,14.17Z\\\" />\\r\\n      <path fill=\\\"currentColor\\\" d=\\\"M14.79,14.09a3.35,3.35,0,0,1-2.65,1.71A3.45,3.45,0,0,1,8.57,12a3.56,3.56,0,0,1,1.5-2.7L8.69,8a11.38,11.38,0,0,0-4.64,3.92,0.69,0.69,0,0,0,0,.79c2,2.85,4.82,4.61,7.87,4.61a8.44,8.44,0,0,0,4.61-1.43Z\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_circle\\\" viewBox=\\\"0 0 16 16\\\" fill=\\\"currentColor\\\">\\r\\n<circle cx=\\\"8\\\" cy=\\\"8\\\" r=\\\"8\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_pen\\\" viewBox=\\\"0 0 12 12\\\" fill=\\\"currentColor\\\">\\r\\n<g xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t<path d=\\\"M6.1,2.6L0.2,8.5C0.1,8.6,0,8.8,0,9v2.3C0,11.7,0.3,12,0.8,12H3c0.2,0,0.4-0.1,0.5-0.2l5.9-5.8L6.1,2.6z\\\" />\\r\\n\\t<path d=\\\"M11.8,2.5L9.5,0.2c-0.3-0.3-0.8-0.3-1,0L7.1,1.6l3.3,3.3l1.4-1.4C12.1,3.2,12.1,2.8,11.8,2.5z\\\" />\\r\\n</g>\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_target\\\" viewBox=\\\"0 0 12 12\\\" fill=\\\"currentColor\\\">\\r\\n<g xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n\\t<rect x=\\\"0\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\t\\r\\n\\t\\t<rect x=\\\"1.5\\\" y=\\\"-1.5\\\" transform=\\\"matrix(-1.836970e-16 1 -1 -1.836970e-16 2.9945 -1.4945)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\t\\r\\n\\t\\t<rect x=\\\"9\\\" y=\\\"-1.5\\\" transform=\\\"matrix(-1.836970e-16 1 -1 -1.836970e-16 10.4951 -8.9951)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"10.5\\\" transform=\\\"matrix(-1 -1.224647e-16 1.224647e-16 -1 22.4863 4.5)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"10.5\\\" y=\\\"7.5\\\" transform=\\\"matrix(-1 -1.224647e-16 1.224647e-16 -1 22.4967 19.5)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"9\\\" y=\\\"9\\\" transform=\\\"matrix(6.123234e-17 -1 1 6.123234e-17 -1.4997 21.0003)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"1.5\\\" y=\\\"9\\\" transform=\\\"matrix(6.123234e-17 -1 1 6.123234e-17 -9.0003 13.4997)\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<rect x=\\\"0\\\" y=\\\"7.5\\\" width=\\\"1.5\\\" height=\\\"4.5\\\" />\\r\\n\\t<ellipse cx=\\\"6\\\" cy=\\\"6\\\" rx=\\\"2.2\\\" ry=\\\"2.3\\\" />\\r\\n</g>\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_info\\\" viewBox=\\\"2 2 20 20\\\" fill=\\\"currentColor\\\">\\r\\n<g class=\\\"nc-icon-wrapper\\\" fill=\\\"currentColor\\\">\\r\\n<path d=\\\"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z\\\" />\\r\\n</g>\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_polygon\\\" viewBox=\\\"4 0 20 20\\\" fill=\\\"currentColor\\\">\\r\\n      <rect x=\\\"6.04\\\" y=\\\"8.9\\\" width=\\\"2.05\\\" height=\\\"0.97\\\" transform=\\\"translate(-4.65 10.2) rotate(-57.04)\\\" /><rect x=\\\"10.84\\\" y=\\\"6.25\\\" width=\\\"2.05\\\" height=\\\"0.97\\\" /><rect x=\\\"10.84\\\" y=\\\"16.89\\\" width=\\\"2.05\\\" height=\\\"0.97\\\" /><rect x=\\\"6.58\\\" y=\\\"13.65\\\" width=\\\"0.97\\\" height=\\\"2.05\\\" transform=\\\"translate(-6.85 6.2) rotate(-32.96)\\\" /><path d=\\\"M8.68,6.28a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1a1.45,1.45,0,1,0,1.45,1.45A1.45,1.45,0,0,0,8.68,5.28h0Z\\\" /><path d=\\\"M8.68,16.87a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1a1.45,1.45,0,1,0,1.45,1.45,1.45,1.45,0,0,0-1.45-1.45h0Z\\\" /><path d=\\\"M5.45,11.58A0.45,0.45,0,1,1,5,12a0.45,0.45,0,0,1,.45-0.45m0-1A1.45,1.45,0,1,0,6.9,12a1.45,1.45,0,0,0-1.45-1.45h0Z\\\" /><rect x=\\\"15.91\\\" y=\\\"14.14\\\" width=\\\"2.05\\\" height=\\\"0.97\\\" transform=\\\"translate(-4.55 20.88) rotate(-57.04)\\\" /><rect x=\\\"16.45\\\" y=\\\"8.31\\\" width=\\\"0.97\\\" height=\\\"2.05\\\" transform=\\\"translate(-2.35 10.72) rotate(-32.96)\\\" /><path d=\\\"M15.32,16.82a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1a1.45,1.45,0,1,0,1.45,1.45,1.45,1.45,0,0,0-1.45-1.45h0Z\\\" /><path d=\\\"M15.32,6.24a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1a1.45,1.45,0,1,0,1.45,1.45,1.45,1.45,0,0,0-1.45-1.45h0Z\\\" /><path d=\\\"M18.55,11.53a0.45,0.45,0,1,1-.45.45,0.45,0.45,0,0,1,.45-0.45m0-1A1.45,1.45,0,1,0,20,12a1.45,1.45,0,0,0-1.45-1.45h0Z\\\" />\\r\\n</symbol>\\r\\n\\r\\n<symbol id=\\\"icons_selectreg\\\" viewBox=\\\"12 13 24 20\\\" fill=\\\"currentColor\\\">\\r\\n    <path d=\\\"m 21.099609,8.4511719 c -1.469868,0 -2.548828,1.0789594 -2.548828,2.5488281 l 0,10.300781 a 0.45145663,0.45145663 0 0 1 -0.794922,0.291016 c -1.069223,-1.263628 -2.20723,-2.140625 -3.15625,-2.140625 -0.799555,0 -1.440052,0.272383 -1.724609,0.699219 a 0.45145663,0.45145663 0 0 1 -0.02344,0.03125 c -0.304031,0.380039 -0.58479,1.101873 -0.220703,2.285156 0.363172,1.180307 2.071447,4.826112 3.949219,7.791015 0.686643,1.07901 1.37235,1.961753 1.960938,2.648438 a 0.45145663,0.45145663 0 0 1 0.01367,0.01367 c 1.100572,1.400729 1.896484,2.439482 1.896484,4.080078 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 l 12,0 c 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 0,-2.462696 0.514524,-4.413564 1.013672,-6.410156 C 35.061648,28.593252 35.548828,26.542127 35.548828,24 l 0,-3 c 0,-1.469869 -1.078959,-2.548828 -2.548828,-2.548828 -0.325352,0 -0.686138,0.08548 -0.957031,0.175781 A 0.45145663,0.45145663 0 0 1 31.46875,18.332031 C 31.119977,17.19852 30.206706,16.451172 29,16.451172 c -0.439576,0 -0.8348,0.08997 -1.128906,0.310547 a 0.45145663,0.45145663 0 0 1 -0.654297,-0.123047 c -0.424766,-0.679626 -1.181444,-1.1875 -2.117188,-1.1875 -0.325352,0 -0.55809,0.076 -0.857421,0.175781 a 0.45145663,0.45145663 0 0 1 -0.59375,-0.427734 l 0,-4.199219 c 0,-1.4698687 -1.07896,-2.5488281 -2.548829,-2.5488281 z M 21,9.5488281 c 0.400314,0 0.778723,0.1400511 1.044922,0.40625 0.266199,0.2661989 0.40625,0.6446079 0.40625,1.0449219 l 0,9 c 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 l 0,-2 c 0,-0.400314 0.140051,-0.778723 0.40625,-1.044922 0.266199,-0.266199 0.644608,-0.40625 1.044922,-0.40625 0.400314,0 0.778723,0.140051 1.044922,0.40625 0.266199,0.266199 0.40625,0.644608 0.40625,1.044922 l 0,3 c 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 l 0,-2 c 0,-0.400314 0.140051,-0.778723 0.40625,-1.044922 0.266199,-0.266199 0.644608,-0.40625 1.044922,-0.40625 0.400314,0 0.778723,0.140051 1.044922,0.40625 0.266199,0.266199 0.40625,0.644608 0.40625,1.044922 l 0,3 c 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 l 0,-1 c 0,-0.400314 0.140051,-0.778723 0.40625,-1.044922 0.266199,-0.266199 0.644608,-0.40625 1.044922,-0.40625 0.400314,0 0.778723,0.140051 1.044922,0.40625 0.266199,0.266199 0.40625,0.644608 0.40625,1.044922 l 0,3 c 0,2.365422 -0.514537,4.312055 -1.013672,6.308594 l 0.0039,-0.01172 c -0.40345,1.815526 -0.892826,3.579678 -0.990234,5.722656 A 0.45145663,0.45145663 0 0 1 32,36.451172 l -10.099609,0 A 0.45145663,0.45145663 0 0 1 21.451172,36.052734 C 21.268949,34.50384 20.366883,33.503929 19.267578,32.304688 a 0.45145663,0.45145663 0 0 1 -0.0293,-0.0332 c -0.588009,-0.784011 -1.201373,-1.503012 -1.820312,-2.533203 l -0.002,-0.002 c -8.56e-4,-0.0014 -0.0011,-0.0025 -0.002,-0.0039 -1.007254,-1.612144 -1.886276,-3.221277 -2.554687,-4.570313 -0.669307,-1.350844 -1.123882,-2.415821 -1.294922,-3.042968 a 0.45145663,0.45145663 0 0 1 -0.0078,-0.03125 c -0.05341,-0.267047 -0.08399,-0.487278 -0.08399,-0.6875 0,-0.200222 -8.21e-4,-0.409335 0.208985,-0.619141 0.156606,-0.156607 0.331654,-0.197642 0.466797,-0.216797 0.135142,-0.01916 0.251856,-0.01563 0.351562,-0.01563 0.379126,0 0.656448,0.179905 0.982422,0.419922 0.325974,0.240017 0.676911,0.568581 1.03125,0.96875 0.708677,0.800338 1.432333,1.886537 1.90625,3.097656 a 0.45145663,0.45145663 0 0 1 0.03125,0.164063 l 0,0.800781 c 0,0.199686 0.05878,0.322449 0.142578,0.40625 0.0838,0.0838 0.206564,0.142578 0.40625,0.142578 0.199686,0 0.322449,-0.05878 0.40625,-0.142578 0.0838,-0.0838 0.142578,-0.206564 0.142578,-0.40625 l 0,-15 c 0,-0.400314 0.140051,-0.778723 0.40625,-1.0449219 C 20.221277,9.6888792 20.599686,9.5488281 21,9.5488281 Z\\\" />\\r\\n</symbol>\\r\\n\\r\\n</symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","let _clean = function(){  \r\n    let scrollCont = this.container.find('.mCSB_container')\r\n    if (scrollCont[0]){\r\n        scrollCont.empty();\r\n    }\r\n    else{\r\n        this.container.empty();\r\n    }\r\n};\r\n\r\nconst BaseView = function (model) {\r\n    model.view = this;\r\n    this.model = model;\r\n    this.gifLoader = '<img src=\"img/progress.gif\">';\r\n};\r\n\r\nBaseView.prototype = function () {\r\n    return {\r\n        get isActive(){\r\n            return this.frame.is(\":visible\");\r\n        },\r\n        resize: function (clean) {\r\n            if(!this.frame)\r\n                return;\r\n\r\n//console.log($('.iconSidebarControl-pane').height(), this.topOffset, this.bottomOffset)\r\n            let h = $('.iconSidebarControl-pane').height() - this.topOffset - this.bottomOffset;\r\n            // if (this.startScreen){\r\n            //     this.startScreen.height(h);\r\n            //     this.container.css({ position:\"relative\", top: -h+\"px\" });\r\n            // }\r\n            this.container.height(h);\r\n\r\n            if (clean){\r\n                this.container.empty()\r\n            }\r\n        },\r\n        repaint: function(){\r\n            _clean.call(this); \r\n            \r\n            this.inProgress(false);\r\n\r\n            if (!this.model.data)\r\n                return;\r\n\r\n            let scrollCont = this.container.find('.mCSB_container'),\r\n            content = $(this.drawTable(this.model.data)); \r\n\r\n            if (!scrollCont[0]) {\r\n                this.container.append(content).mCustomScrollbar(this.mcsbOptions);\r\n            }\r\n            else {\r\n                $(scrollCont).append(content);\r\n            }\r\n\r\n        },\r\n        show: function () {\r\n            if (!this.frame)\r\n                return;\r\n            this.frame.show();\r\n            this.model.update();\r\n        },\r\n        hide: function () {\r\n            this.frame.hide();\r\n        },\r\n        get isVisible(){\r\n            const rc = this.frame[0].getBoundingClientRect();\r\n            return rc.width!=0 && rc.height!=0;\r\n        }\r\n    }\r\n}();\r\n\r\nmodule.exports = BaseView;","const SIMPLE_MODE = 1,\r\n      ADVANCED_MODE = 2;\r\nconst _toMidnight = nsGmx.DateInterval.toMidnight, \r\n    _fromUTC = function (date) {\r\n        if (!date) return null;\r\n        var timeOffset = date.getTimezoneOffset() * 60 * 1000;\r\n        return new Date(date.valueOf() - timeOffset);\r\n    }, \r\n    _toUTC = function(date) {\r\n        if (!date) return null;\r\n        var timeOffset = date.getTimezoneOffset()*60*1000;\r\n        return new Date(date.valueOf() + timeOffset);\r\n    },\r\n    _setMode = function(mode) {\r\n        if (this._curMode === mode) {\r\n            return this;\r\n        }\r\n\r\n        //this.reset();\r\n        this._dateInputs.datepicker('hide');\r\n\r\n        this._curMode = mode;\r\n        var isSimple = mode === SIMPLE_MODE;\r\n\r\n        $el.find('.CalendarWidget-onlyMaxVersion').toggle(!isSimple);\r\n\r\n        this._moreIcon\r\n            .toggleClass('icon-calendar', isSimple)\r\n            .toggleClass('icon-calendar-empty', !isSimple)\r\n            .attr('title', isSimple ? _gtxt('CalendarWidget.ExtendedViewTitle') : _gtxt('CalendarWidget.MinimalViewTitle'));\r\n\r\n\r\n        var dateBegin = this._dateBegin.datepicker('getDate'),\r\n            dateEnd = this._dateEnd.datepicker('getDate');\r\n\r\n        if (isSimple && dateBegin && dateEnd && dateBegin.valueOf() !== dateEnd.valueOf()) {\r\n            _selectFunc.call(this, this._dateEnd);\r\n            _updateModel().call(this);\r\n        }\r\n\r\n        //this.trigger('modechange');\r\n\r\n        return this;\r\n    },\r\n    _selectFunc = function(activeInput) {\r\n        var begin = this._dateBegin.datepicker('getDate');\r\n        var end   = this._dateEnd.datepicker('getDate');\r\n\r\n        if (end && begin && begin > end) {\r\n            var dateToFix = activeInput[0] == this._dateEnd[0] ? this._dateBegin : this._dateEnd;\r\n            dateToFix.datepicker('setDate', $(activeInput[0]).datepicker('getDate'));\r\n        } else if (this._curMode === SIMPLE_MODE) {\r\n            //либо установлена только одна дата, либо две, но отличающиеся\r\n            if (!begin != !end || begin && begin.valueOf() !== end.valueOf()) {\r\n                this._dateEnd.datepicker('setDate', this._dateBegin.datepicker('getDate'));\r\n            }\r\n        }\r\n    },\r\n    _updateModel = function() {\r\n        var dateBegin = _fromUTC(this._dateBegin.datepicker('getDate')),\r\n            dateEnd = _fromUTC(this._dateEnd.datepicker('getDate'));\r\n\r\n        this.dateInterval.set({\r\n            dateBegin: dateBegin ? _toMidnight(dateBegin) : null,\r\n            dateEnd: dateEnd ? _toMidnight(dateEnd.valueOf() + nsGmx.DateInterval.MS_IN_DAY) : null\r\n        });\r\n    },\r\n    _updateWidget = function() {\r\n        var dateBegin = this.dateInterval.get('dateBegin'),\r\n            dateEnd = this.dateInterval.get('dateEnd'),\r\n            dayms = nsGmx.DateInterval.MS_IN_DAY;\r\n\r\n        if (!dateBegin || !dateEnd) {\r\n            return;\r\n        };\r\n\r\n        var isValid = !(dateBegin % dayms) && !(dateEnd % dayms);\r\n\r\n        var newDateBegin = _toUTC(dateBegin),\r\n            newDateEnd;\r\n        if (isValid) {\r\n            newDateEnd = _toUTC(new Date(dateEnd - dayms));\r\n            if (dateEnd - dateBegin > dayms) {\r\n                _setMode.call(this, ADVANCED_MODE);\r\n            }\r\n        } else {\r\n            newDateEnd = _toUTC(dateEnd);\r\n            _setMode.call(this, ADVANCED_MODE);\r\n        }\r\n\r\n        //если мы сюда пришли после выбора интервала в самом виджете, вызов setDate сохраняет фокус на input-поле\r\n        //возможно, это какая-то проблема jQueryUI.datepicker'ов.\r\n        //чтобы этого избежать, явно проверяем, нужно ли изменять дату\r\n        var prevDateBegin = this._dateBegin.datepicker('getDate'),\r\n            prevDateEnd = this._dateEnd.datepicker('getDate');\r\n\r\n        if (!prevDateBegin || prevDateBegin.valueOf() !== newDateBegin.valueOf()) {\r\n            this._dateBegin.datepicker('setDate', newDateBegin);\r\n        }\r\n\r\n        if (!prevDateEnd || prevDateEnd.valueOf() !== newDateEnd.valueOf()) {\r\n            this._dateEnd.datepicker('setDate', newDateEnd);\r\n        }\r\n    },\r\n    _shiftDates = function(delta) {\r\n        var dateBegin = _fromUTC(this._dateBegin.datepicker('getDate')),\r\n            dateEnd = _fromUTC(this._dateEnd.datepicker('getDate'));\r\n\r\n        if (!dateBegin || !dateEnd) {\r\n            return;\r\n        }\r\n\r\n        var shift = (dateEnd - dateBegin + nsGmx.DateInterval.MS_IN_DAY) * delta,\r\n            newDateBegin = new Date(dateBegin.valueOf() + shift),\r\n            newDateEnd = new Date(dateEnd.valueOf() + shift);\r\n\r\n        if ((!this._dateMin || _toMidnight(this._dateMin) <= _toMidnight(newDateBegin)) &&\r\n            (!this._dateMax || _toMidnight(this._dateMax) >= _toMidnight(newDateEnd)))\r\n        {\r\n            this._dateBegin.datepicker('setDate', _toUTC(newDateBegin));\r\n            this._dateEnd.datepicker('setDate', _toUTC(newDateEnd));\r\n\r\n            _updateModel.call(this);\r\n        }\r\n    };\r\n\r\nmodule.exports = function(options){\r\n\r\n    $el = $('<div class=\"CalendarWidget ui-widget\"></div>');\r\n\r\n    this.template = Handlebars.compile(`\r\n    <table>\r\n    <tr>\r\n        <td><div class = \"CalendarWidget-iconScrollLeft ui-helper-noselect icon-left-open\"></div></td>\r\n        <td class = \"CalendarWidget-inputCell\"><input class = \"gmx-input-text CalendarWidget-dateBegin\"></td>\r\n        <td class = \"CalendarWidget-inputCell CalendarWidget-onlyMaxVersion\"><input class = \"gmx-input-text CalendarWidget-dateEnd\"></td>\r\n        <td><div class = \"CalendarWidget-iconScrollRight ui-helper-noselect icon-right-open\" ></div></td>\r\n        <td><div class = \"CalendarWidget-iconMore {{moreIconClass}}\" title = \"{{moreIconTitle}}\"></div></td>\r\n        <td><div class = \"CalendarWidget-forecast\" hidden>{{forecast}}</div></td>\r\n    </tr><tr>\r\n        <td></td>\r\n        <td class = \"CalendarWidget-dateBeginInfo\"></td>\r\n        <td class = \"CalendarWidget-dateEndInfo\"></td>\r\n        <td></td>\r\n        <td></td>\r\n    </tr>\r\n</table>\r\n<div class=\"CalendarWidget-footer\"></div>`);\r\n\r\n    options = $.extend({\r\n        minimized: true,\r\n        showSwitcher: true,\r\n        dateMax: null,\r\n        dateMin: null,\r\n        dateFormat: 'dd.mm.yy',\r\n        name: null\r\n    }, options);\r\n\r\n    this._dateMin = options.dateMin;\r\n    this._dateMax = options.dateMax;\r\n    this.dateInterval = options.dateInterval;\r\n\r\n    $el.html(this.template({\r\n        moreIconClass: options.minimized ? 'icon-calendar' : 'icon-calendar-empty',\r\n        moreIconTitle: options.minimized ? _gtxt('CalendarWidget.ExtendedViewTitle') : _gtxt('CalendarWidget.MinimalViewTitle'),\r\n        forecast: _gtxt('CalendarWidget.forecast')\r\n    }));\r\n\r\n    this._moreIcon = $el.find('.CalendarWidget-iconMore')\r\n        .toggle(!!options.showSwitcher);\r\n\r\n    this._dateBegin = $el.find('.CalendarWidget-dateBegin');\r\n    this._dateEnd = $el.find('.CalendarWidget-dateEnd');\r\n    this._dateInputs = this._dateBegin.add(this._dateEnd);\r\n\r\n    $el.find('.CalendarWidget-iconScrollLeft').on('click', function() {\r\n        _shiftDates.call(this, -1);\r\n    }.bind(this));\r\n    $el.find('.CalendarWidget-iconScrollRight').on('click', function() {\r\n        _shiftDates.call(this, 1);\r\n    }.bind(this));\r\n\r\n    this._dateInputs.datepicker({\r\n        onSelect: function(dateText, inst){\r\n            _selectFunc.call(this, inst.input);\r\n            _updateModel.call(this);\r\n        }.bind(this),\r\n        showAnim: 'fadeIn',\r\n        changeMonth: true,\r\n        changeYear: true,\r\n        minDate: this._dateMin ? _toUTC(this._dateMin) : null,\r\n        maxDate: this._dateMax ? _toUTC(this._dateMax) : null,\r\n        dateFormat: options.dateFormat,\r\n        defaultDate: _toUTC(this._dateMax || new Date()),\r\n        showOn: options.buttonImage ? 'both' : 'focus',\r\n        buttonImageOnly: true\r\n    });\r\n\r\n    //устанавливаем опцию после того, как добавили календарик в canvas\r\n    if (options.buttonImage) {\r\n        this._dateInputs.datepicker('option', 'buttonImage', options.buttonImage);\r\n    }\r\n\r\n    $el.find('.CalendarWidget-onlyMaxVersion').toggle(!options.minimized);\r\n\r\n    options.dateBegin && this._dateBegin.datepicker('setDate', _toUTC(options.dateBegin));\r\n    options.dateEnd && this._dateEnd.datepicker('setDate', _toUTC(options.dateEnd));\r\n\r\n    if (options.container) {\r\n        if (typeof options.container === 'string')\r\n            $('#' + options.container).append($el);\r\n        else\r\n            $(options.container).append($el);\r\n    }\r\n\r\n    _setMode.call(this, options.minimized ? SIMPLE_MODE : ADVANCED_MODE);\r\n\r\n    _updateWidget.call(this);\r\n\r\n    this.dateInterval.on('change', function(){_updateWidget.call(this)}.bind(this), this);\r\n\r\n    //for backward compatibility\r\n    this.canvas = $el;\r\n}","//const Request = require('../Request');\r\n\r\n//////////////////////////\r\n\r\n\r\nmodule.exports = function (options) {\r\n\r\n    const \r\n        _lmap = nsGmx.leafletMap, \r\n        _dataChanged = function(){\r\n            _data.result = null;\r\n            this.isDirty = true;\r\n            this.update();\r\n        }\r\n        _data = {\r\n        system:'', \r\n        interval:null, \r\n        polygon:null, \r\n        result: null\r\n    };\r\n  \r\n    return {\r\n        set interval(v){\r\n            if (!_data.interval){\r\n                _data.interval = v;\r\n                _data.interval.on('change', ()=>{\r\n                    _dataChanged.call(this);\r\n                });\r\n            }\r\n        },\r\n        set system(v){\r\n            _data.system = v;\r\n            _dataChanged.call(this);\r\n        },\r\n        set polygon(v){\r\n            _data.polygon = v;\r\n            //v.on('remove', console.log)\r\n            _dataChanged.call(this);\r\n        },\r\n        isDirty: true,\r\n        get data() { return _data },\r\n        set data(value) { _data = value; },\r\n        update: function () {\r\n//console.log('IMC UPDATE', _data, this.isDirty)\r\n            if (!this.isDirty)\r\n                return;\r\n\r\n            const thisModel = this;\r\n            return Promise.resolve().then(()=>{\r\n                thisModel.view.repaint();  \r\n                thisModel.isDirty = false;\r\n            });\r\n\r\n        }, // this.update\r\n        count: function(){\r\n            const _thisModel = this, p = this.data.polygon, s = this.data.system, \r\n            b1 = this.data.interval.attributes.dateBegin, e1 = this.data.interval.attributes.dateEnd,\r\n            b2 = new Date(b1.getFullYear()-1, b1.getMonth(), b1.getDate(), b1.getHours(), b1.getMinutes()),\r\n            e2 = new Date(e1.getFullYear()-1, e1.getMonth(), e1.getDate(), e1.getHours(), e1.getMinutes());\r\n            if (!p){\r\n                return Promise.reject('polygon');\r\n            }\r\n            if (!s){\r\n                return Promise.reject('system');\r\n            }\r\n            else{ \r\n                const params = {\r\n                    WrapStyle:'message', layer: s,\r\n                    query:p.feature.geometry.type=='Polygon'?`intersects([geomixergeojson], GeometryFromGeoJson('{\"type\":\"${p.feature.geometry.type}\",\"coordinates\":[${p.feature.geometry.coordinates.map(a=>`[${a.map(c=>`[${c[0]},${c[1]}]`).join(',')}]`).join(',')}]}', 4326)) and [acqdate]>='${b2.toISOString()}' and [acqdate]<'${e2.toISOString()}'`:\r\n`intersects([geomixergeojson], GeometryFromGeoJson('{\"type\":\"${p.feature.geometry.type}\",\"coordinates\":[${p.feature.geometry.coordinates.map(a=>`[${a.map(v=>`[${v.map(c=>`[${c[0]},${c[1]}]`).join(',')}]`).join(',')}]`).join(',')}]}', 4326)) and [acqdate]>='${b2.toISOString()}' and [acqdate]<'${e2.toISOString()}'`\r\n                }\r\n//console.log(params, b2.toISOString(), e2.toISOString())\r\n\r\n                return new Promise((resolve, reject)=>{\r\n                    //setTimeout(\r\n                        sendCrossDomainPostRequest(\r\n                            `${window.serverBase}/VectorLayer/Search.ashx`, params, \r\n                            response=>{\r\n//console.log(response)\r\n                                if (response.Status && response.Status.toLowerCase()=='ok'){\r\n                                    _data.result = response.Result.values.length;\r\n                                }\r\n                                else{\r\n                                    _data.result = _gtxt(\"ImageCount.error\");\r\n                                    console.log(response)\r\n                                }\r\n\r\n                                _thisModel.isDirty = true;\r\n                                _thisModel.update();\r\n                                resolve();\r\n                            }\r\n                        );\r\n                    //}, 1000);\r\n                });\r\n            }\r\n        }\r\n    };\r\n}"],"sourceRoot":""}